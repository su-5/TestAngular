/*
  filename: angular.integralui.grid.min.js
  version : 4.0.6
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIGridService",["$rootScope",function(c){var f=null;return{addColumn:function(l,m){c.$broadcast(l+"-add-column",m)},clearColumns:function(l){c.$broadcast(l+"-clear-columns")},insertColumnAt:function(l,m,f){c.$broadcast(l+"-insert-column-at",m,f)},insertColumnBefore:function(l,m,f){c.$broadcast(l+"-insert-column-before",m,f)},insertColumnAfter:function(l,m,f){c.$broadcast(l+"-insert-column-after",m,f)},removeColumn:function(l,m){c.$broadcast(l+"-remove-column",
m)},removeColumnAt:function(l,m){c.$broadcast(l+"-remove-column-at",m)},addGroup:function(l,m){c.$broadcast(l+"-add-group",m)},clearGroups:function(l){c.$broadcast(l+"-clear-groups")},insertGroupAt:function(l,m,f){c.$broadcast(l+"-insert-group-at",m,f)},insertGroupBefore:function(l,m,f){c.$broadcast(l+"-insert-group-before",m,f)},insertGroupAfter:function(l,m,f){c.$broadcast(l+"-insert-group-after",m,f)},removeGroup:function(l,m){c.$broadcast(l+"-remove-group",m)},removeGroupAt:function(l,m){c.$broadcast(l+
"-remove-group-at",m)},addRow:function(l,m){c.$broadcast(l+"-add-row",m)},clearRows:function(l){c.$broadcast(l+"-clear-rows")},insertRowAt:function(l,m,f){c.$broadcast(l+"-insert-row-at",m,f)},insertRowBefore:function(l,m,f){c.$broadcast(l+"-insert-row-before",m,f)},insertRowAfter:function(l,m,f){c.$broadcast(l+"-insert-row-after",m,f)},removeRow:function(l,m){c.$broadcast(l+"-remove-row",m)},removeRowAt:function(l,m){c.$broadcast(l+"-remove-row-at",m)},exportToJSON:function(l,m,f,h){c.$broadcast(l+
"-export-json",m,f,h);l=this.getTempData();this.clearTempData();return l?l:""},loadData:function(l,m,f){c.$broadcast(l+"-load-data",m,f)},openEditor:function(l,m){c.$broadcast(l+"-open-editor",m)},closeEditor:function(l,m){c.$broadcast(l+"-close-editor",m)},filter:function(l,m,f){c.$broadcast(l+"-filter",m,f)},findRowById:function(l,m){c.$broadcast(l+"-find-row-by-id",m);var f=this.getTempData();this.clearTempData();return f?f:null},findRowByText:function(l,m){c.$broadcast(l+"-find-row-by-text",m);
var f=this.getTempData();this.clearTempData();return f?f:null},getCellAt:function(l,m){c.$broadcast(l+"-get-cell-at",m);var f=this.getTempData();this.clearTempData();return f?f:null},getRowAt:function(l,f){c.$broadcast(l+"-get-row-at",f);var m=this.getTempData();this.clearTempData();return m?m:null},focus:function(l,f){c.$broadcast(l+"-focus",f)},clearTempData:function(){f=null},ensureVisible:function(l,f){c.$broadcast(l+"-ensure-visible",f)},getTempData:function(){return f},getHoverColumn:function(l,
f){c.$broadcast(l+"-get-hover-column",f);var m=this.getTempData();this.clearTempData();return m?m:null},getList:function(l){c.$broadcast(l+"-get-list");l=this.getTempData();this.clearTempData();return l?l:[]},setTempData:function(c){f=c},topRow:function(l,f){if(f)c.$broadcast(l+"-set-top-row",f);else return c.$broadcast(l+"-get-top-row"),f=this.getTempData(),this.clearTempData(),f?f:null},beginLoad:function(l,f){c.$broadcast(l+"-begin-load",f)},endLoad:function(f){c.$broadcast(f+"-end-load")},moveColumn:function(f,
m,B){c.$broadcast(f+"-move-column",m,B)},moveRow:function(f,m,B,h,ta){c.$broadcast(f+"-move-row",m,B,h,ta)},getScrollPos:function(f){c.$broadcast(f+"-get-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},getMaxScrollPos:function(f){c.$broadcast(f+"-get-max-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},setScrollPos:function(f,m){c.$broadcast(f+"-set-scroll-pos",m)},scrollTo:function(f,m,B){c.$broadcast(f+"-scroll-to",m,B)},currentPage:function(f,
m){if(void 0!=m&&null!=m)c.$broadcast(f+"-set-current-page",m);else{c.$broadcast(f+"-get-current-page");var l=this.getTempData();this.clearTempData();return void 0!=l?l:-1}},firstPage:function(f){c.$broadcast(f+"-first-page")},lastPage:function(f){c.$broadcast(f+"-last-page")},nextPage:function(f){c.$broadcast(f+"-next-page")},prevPage:function(f){c.$broadcast(f+"-prev-page")},clearSelection:function(f){c.$broadcast(f+"-clear-selection")},selectedColumn:function(f,m){if(m)c.$broadcast(f+"-set-selected-column",
m);else{c.$broadcast(f+"-get-selected-column");var l=this.getTempData();this.clearTempData();return l?l:null}},selectedColumns:function(f,m){if(m)c.$broadcast(f+"-set-selected-columns",m);else{c.$broadcast(f+"-get-selected-columns");var l=this.getTempData();this.clearTempData();return l?l:null}},selectedRow:function(f,m){if(m)c.$broadcast(f+"-set-selected-row",m);else{c.$broadcast(f+"-get-selected-row");var l=this.getTempData();this.clearTempData();return l?l:null}},selectedRows:function(f,m){if(m)c.$broadcast(f+
"-set-selected-rows",m);else{c.$broadcast(f+"-get-selected-rows");var l=this.getTempData();this.clearTempData();return l?l:null}},sort:function(f,m,B,h){c.$broadcast(f+"-sort",m,B,h)},refresh:function(f,m,B){c.$broadcast(f+"-refresh",m,B)},resumeLayout:function(f,m){c.$broadcast(f+"-resume-layout",m)},suspendLayout:function(f,m){c.$broadcast(f+"-suspend-layout",m)},updateLayout:function(f,m){c.$broadcast(f+"-update-layout",m)},updateView:function(f){c.$broadcast(f+"-update-view")}}}]).controller("IntegralUIGridController",
["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUIGridService","IntegralUIDragDrop","IntegralUIFilter",function(c,f,l,m,B,h,ta,p,q,xc){var a=this;this.suppressProcess=!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};
a.defaultStyle={general:"iui-grid",column:{general:{content:"iui-grid-column-cell-content",disabled:"iui-grid-column-disabled",normal:"iui-grid-column",hovered:"iui-grid-column-hovered",selected:"iui-grid-column-selected"},header:{content:"iui-grid-column-header-cell-content",disabled:"iui-grid-column-header-disabled",normal:"iui-grid-column-header",hovered:"iui-grid-column-header-hovered",selected:"iui-grid-column-header-selected"},body:{content:"iui-grid-column-body-cell-content",disabled:"iui-grid-column-body-disabled",
normal:"iui-grid-column-body",hovered:"iui-grid-column-body-hovered",selected:"iui-grid-column-body-selected"},footer:{content:"iui-grid-column-footer-cell-content",disabled:"iui-grid-column-footer-disabled",normal:"iui-grid-column-footer",hovered:"iui-grid-column-footer-hovered",selected:"iui-grid-column-footer-selected"}},row:{general:{disabled:"iui-grid-row-disabled",focused:"iui-grid-row-focused",normal:"iui-grid-row",hovered:"iui-grid-row-hovered",selected:"iui-grid-row-selected"},checkBox:{general:"iui-checkbox",
box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-grid-expand-box",animated:"iui-grid-expand-box-load",expanded:"iui-grid-expand-box-open",collapsed:"iui-grid-expand-box-close"},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",
hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"},fixed:{disabled:"iui-grid-row-fixed-disabled",normal:"iui-grid-row-fixed",hovered:"iui-grid-row-fixed-hovered"}},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"}};this.updateGrouping=function(b){a.options.grouping=b?{enabled:h.isFieldAvailable(b.enabled,
!1),showColumns:h.isFieldAvailable(b.showColumns,!1)}:{enabled:!1,showColumns:!1}};this.updatePaging=function(b){a.options.paging=b?{enabled:h.isFieldAvailable(b.enabled,!1),showControlPanel:h.isFieldAvailable(b.showControlPanel,!0),pageSize:h.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:h.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:h.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:h.isFieldAvailable(b.allowColumnReorder,
!1),allowDrag:h.isFieldAvailable(b.allowDrag,!1),allowDrop:h.isFieldAvailable(b.allowDrop,!0),allowFilter:h.isFieldAvailable(b.allowFilter,!1),allowFocus:h.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:h.isFieldAvailable(b.autoExpand,!0),autoUpdate:h.isFieldAvailable(b.autoUpdate,!0),controlStyle:a.defaultStyle,displayMode:h.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:h.isFieldAvailable(b.enabled,!0),expandColIndex:h.isFieldAvailable(b.expandColIndex,
void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:h.isFieldAvailable(b.fillSpace,!1),gridLines:h.isFieldAvailable(b.gridLines,"both"),hoverSelection:h.isFieldAvailable(b.hoverSelection,!1),indent:h.isFieldAvailable(b.indent,15),labelEdit:h.isFieldAvailable(b.labelEdit,!1),loadRows:[],mouseWheelSpeed:h.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:h.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:h.isFieldAvailable(b.rowHeight,-1),rtl:h.isFieldAvailable(b.rtl,!1),
selectedColumn:h.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:null),selectedColumns:a.options.selectedColumns?a.options.selectedColumns:[],selectedIndex:-1,selectedRow:h.isFieldAvailable(b.selectedRow,a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:h.isFieldAvailable(b.selectionMode,"one"),showFooter:h.isFieldAvailable(b.showFooter,!0),showHeader:h.isFieldAvailable(b.showHeader,!0),
showIcons:h.isFieldAvailable(b.showIcons,!0),sorting:h.isFieldAvailable(b.sorting,"none")},a.updateGrouping(b.grouping),a.updatePaging(b.paging),a.updateDataFields(b.dataFields),a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoUpdate:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,
gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedColumns:[],selectedIndex:-1,selectedRow:null,selectedRows:[],selectionMode:"one",showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updateGrouping(),a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?
b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",allowGrouping:b.allowGrouping?b.allowGrouping:"allowGrouping",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",columns:b.columns?b.columns:"columns",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:
"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?
b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",groupText:b.groupText?b.groupText:"groupText",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?
b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.columns?b.columns:"columns",pid:b.pid?b.pid:"pid",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",
allowDrop:"allowDrop",allowFilter:"allowFilter",allowGrouping:"allowGrouping",cellTemplateUrl:"cellTemplateUrl",columns:"columns",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",footerTemplateModel:"footerTemplateModel",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",
footerTemplate:"footerTemplate",footerText:"footerText",footerTooltip:"footerTooltip",groupText:"groupText",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",objects:"columns",pid:"pid",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&
a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?
b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",visible:b.visible?b.visible:"visible"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",
contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip",visible:"visible"};a.rowsObj&&a.rowsObj.updateDataFields(a.getRowFields(a.options.rowFields))};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?
b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",
rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,d){a.columnsObj.insertAt(d,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});
c.$on(c.name+"-insert-column-at",function(b,d,c){a.columnsObj.insertAt(d,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,d,c){a.columnsObj.insertByRef(d,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,d,c){a.columnsObj.insertByRef(d,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,d){a.columnsObj.removeAt(d,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,d){a.columnsObj.removeAt(null,d,null,a.columnIsRemoved)});
this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-group",function(b,d){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertAt(d,-1,null,a.groupIsAdded)});c.$on(c.name+"-clear-groups",function(b){a.groupsObj.clear(null,a.groupsAreCleared)});c.$on(c.name+"-insert-group-at",
function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertAt(d,c,null,a.groupIsAdded)});c.$on(c.name+"-insert-group-after",function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertByRef(d,c,!0,a.groupIsAdded)});c.$on(c.name+"-insert-group-before",function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertByRef(d,c,!1,a.groupIsAdded)});c.$on(c.name+"-remove-group",function(b,d){a.groupsObj.removeAt(d,-1,null,a.groupIsRemoved)});c.$on(c.name+"-remove-group-at",function(b,
d){a.groupsObj.removeAt(null,d,null,a.groupIsRemoved)});this.groupsAreCleared=function(){a.updateLayout();a.callGroupChange()};a.groupIsAdded=function(b){a.updateLayout();a.callGroupChange(b)};a.groupIsRemoved=function(b){a.updateLayout();a.callGroupChange(b)};c.$on(c.name+"-add-row",function(b,d){a.rowsObj.insertAt(d,-1,null,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b){a.rowsObj.clear(null,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,d,c){a.rowsObj.insertAt(d,c,null,a.rowIsAdded)});
c.$on(c.name+"-insert-row-after",function(b,d,c){a.rowsObj.insertByRef(d,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,d,c){a.rowsObj.insertByRef(d,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,d){a.rowsObj.removeAt(d,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,d){a.rowsObj.removeAt(null,d,null,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};
this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.groups=[];a.groupList=[];a.groupLevel=-1;this.updateGroupList=function(){a.groupList.length=0;var b=a.groupsObj.getList();b&&(a.groups=b);if(a.options.grouping.enabled&&0<a.groups.length&&(b=a.rowsObj.getList()))for(var d=0;d<b.length;d++){var c=b[d],t=c[a.options.rowFields.cells];if(t&&0<t.length){for(var f,h=null,m=0;m<a.groups.length;m++){f=
a.groups[m];f=f[a.options.columnFields.id];var l=m;f&&(l=a.getCellIndexById(t,m,f));if(0<=l&&l<t.length){(f=t[l][a.options.cellFields.text])&&""!=f||(f=void 0!=t[l][a.options.cellFields.value]?t[l][a.options.cellFields.value].toString():"undefined");l=null;var p=a.groupList;h&&(p=h[a.options.rowFields.rows]);if(p)for(var q=0;q<p.length;q++)if(p[q][a.options.rowFields.text]==f){l=p[q];break}l||(l={},l[a.options.rowFields.text]=f,l[a.options.rowFields.cells]=[{cid:a.columnList[a.options.expandColIndex][a.options.columnFields.id],
text:f}],l.type="group",h?(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(l)):a.groupList.push(l));h=l}}h&&(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(c))}}};this.callGroupRemoving=function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a}):c.groupRemoving({e:{group:a}})};this.callGroupRemoved=function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?
c.events.groupRemoved({group:a}):c.groupRemoved({e:{group:a}})};this.callGroupChange=function(a){angular.isDefined(c.events)&&c.events.groupChange?c.events.groupChange({group:a}):c.groupChange({e:{group:a}})};a.columnList=[];a.columnFilterList=[];a.completeColumnList=[];a.currentColumnList=[];a.maxColumnLevels=0;a.relatedColumns=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var Vc=function(b,d){if(b&&0!=b.length)for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(a.maxColumnLevels<
d&&(a.maxColumnLevels=d),Vc(b[c][a.options.columnFields.columns],d+1))},H=function(b){var d=0;if(!b[a.options.columnFields.columns]||0==b[a.options.columnFields.columns].length)return 1;for(var c=0;c<b[a.options.columnFields.columns].length;c++)d+=H(b[a.options.columnFields.columns][c]);return d};this.isColumnWithChildenVisible=function(b){var d=!1;if(b&&(d=a.isColumnVisible(b))&&(b=b[a.options.columnFields.columns])&&0<b.length){for(var c=d=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&d++;
d=0<d?!0:!1}return d};var Ba=function(b,d,c){if(b)for(var r=0;r<b.length;){if(a.isColumnWithChildenVisible(b[r])){c&&(b[r][a.options.columnFields.pid]=c);var f={colSpan:b[r][a.options.columnFields.columns]?H(b[r]):0,column:b[r],isRoot:0==d?!0:!1,rowSpan:b[r][a.options.columnFields.columns]&&0!=b[r][a.options.columnFields.columns].length?0:a.maxColumnLevels-d};a.completeColumnList[d].push(f);Ba(b[r][a.options.columnFields.columns],d+1,b[r][a.options.columnFields.id])}r++}};this.updateColumnCompleteList=
function(){Vc(a.currentColumnList,1);for(var b=1;b<=a.maxColumnLevels;b++)a.completeColumnList.push([]);Ba(a.currentColumnList,0)};var P=function(b){b.type="column";b[a.options.columnFields.id]||(b[a.options.columnFields.id]=h.getUniqueId());if(a.isColumnWithChildenVisible(b))if(b[a.options.columnFields.columns])for(var d=0;d<b[a.options.columnFields.columns].length;d++)P(b[a.options.columnFields.columns][d]);else d=!0,a.options.grouping.enabled&&(d=0<=a.groups.indexOf(b)?a.options.grouping.showColumns:
!0),d&&(d=(d=b[a.options.columnFields.filterParams])?xc.createTree(d.conditions,d.formula):null,a.columnFilterList.push({cid:b[a.options.columnFields.id],tree:d}),a.columnList.push(b))};this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.completeColumnList.length=0;a.currentColumnList.length=0;a.maxColumnLevels=0;a.relatedColumns.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b){for(var d=0;d<b.length;d++){var c=
b[d];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=h.getUniqueId());if(a.isColumnWithChildenVisible(c))switch(a.currentColumnList.push(c),c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}a.updateColumnCompleteList();for(d=0;d<a.currentColumnList.length;d++)P(a.currentColumnList[d])}b=a.columnRelationsObj.getList();E(b)};var E=function(b,
d){if(b)for(var c=0;c<b.length;c++)a.isRootColumn(b[c].column)&&(b[c].id||(b[c].id=h.getUniqueId()),d&&(b[c].pid=d),a.relatedColumns.push(b[c]),b[c].children&&E(b[c].children,b[c].id))};this.isRootColumn=function(b){var d=!1;if(b&&a.completeColumnList&&0<a.completeColumnList.length)for(var c=0;c<a.completeColumnList[0].length;c++){var t=a.completeColumnList[0][c].column;if(t==b||h.isEqual(t[a.options.columnFields.id],b[a.options.columnFields.id])){d=!0;break}}return d};this.isColumnRelated=function(b){var d=
!1;if(b&&a.relatedColumns)for(var c=0;c<a.relatedColumns.length;c++){var t=a.relatedColumns[c].column;if(t&&(t==b||h.isEqual(t[a.options.columnFields.id],b[a.options.columnFields.id]))){d=!0;break}}return d};this.getColumnRelatedObject=function(b){for(var d=null,c=0;c<a.relatedColumns.length;c++){var t=a.relatedColumns[c];if(t.column&&(t.column==b||h.isEqual(t.column[a.options.columnFields.id],b[a.options.columnFields.id]))){d=t;break}}return d};this.isTherePrevRelatedColumn=function(b){var d=a.relatedColumns.indexOf(b);
return 0<d&&(a.relatedColumns[d-1].id==b.pid||b.pid&&b.pid==a.relatedColumns[d-1].pid)?!0:!1};this.isThereNextRelatedColumn=function(b){var d=a.relatedColumns.indexOf(b);return 0<=d&&d<a.relatedColumns.length-1&&(b.children&&0<b.children.length||b.pid&&b.pid==a.relatedColumns[d+1].pid)?!0:!1};var mb=function(b){for(var d=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){d=a.columnFilterList[c].tree;break}return d},Ua=function(b,d){if("group"!=b.type&&0==b[a.options.rowFields.visible])return!1;
if(0==a.options.allowFilter||"group"==b.type)return!0;var c=!0;if(b)for(var t,f,h,m=0;m<b[a.options.rowFields.cells].length;m++){c=!0;h=b[a.options.rowFields.cells][m];t=h[a.options.cellFields.cid];f=a.getColumnById(t);!f&&m<a.columnList.length&&(f=a.columnList[m]);if(f&&f[a.options.columnFields.filterParams]){f=f[a.options.columnFields.filterParams];var l=h[a.options.cellFields.value]?h[a.options.cellFields.value]:h[a.options.cellFields.text];f&&(c=f.callback?f.callback(l,h,b):xc.match(l,f.conditions,
f.formula,mb(t),f.caseSensitive))}if(!c)break}return c},Ca=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var d=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(Ua(b[c])&&!a.isRowFixed(b[c])){d=!0;
break}return d};var nb=function(b,d,c,t){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=Ua(b,t);for(var f,m,l,p=0;p<a.columnList.length;p++){l=a.columnList[p];f=l[a.options.columnFields.id];m=l[a.options.columnFields.editorType];l=l[a.options.columnFields.editorSettings];var q=p;f&&(q=a.getCellIndexById(r,p,f));0<=q&&q<r.length&&(r[q].type="cell",r[q][a.options.cellFields.rid]=
b[a.options.rowFields.id],a.setDefaultCellValue(r[q],m,l))}}if(c)if(t)a.fullList.push(b),a.fullIndentList.push(d);else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:d}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:d}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);break;case "bottom":a.currentBottomList.push(b);
break;default:a.currentList.push(b),a.indentList.push(d)}return c},Cb=function(b,d,c,t){if(!b[a.options.rowFields.rows])return c=nb(b,d,c,t);if((c=nb(b,d,c,t))&&!a.isRowFixed(b)){var r=0,f;if("group"==b.type&&(t||a.isRowExpanded(b))){var h=b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var m=0;m<h.length;m++)(f=Cb(h[m],d+Ca,b[a.options.rowFields.id],t))&&r++}}t||a.isThereChildRows||!(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||
(a.isThereChildRows=!0)}return c};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),d=0;d<b.length;d++)Cb(b[d],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=
0;Ca=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var d=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(d=a.groupList);if(d)for(a.applySorting(d),b=0;b<d.length;b++)Cb(d[b],0,null,!1)}};this.updatePageList=
function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;Ca=a.options.indent;var b=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(b=a.groupList);if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var d=0;d<b.length;d++)Cb(b[d],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns():
c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&
c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.groupEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearGroups?c.events.clearGroups():c.clearGroups(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.groupAdded?c.events.groupAdded({group:a.e.group}):c.groupAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.groupAdding?c.events.groupAdding({group:a.e.group}):c.groupAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&
c.events.groupRemoved?c.events.groupRemoved({group:a.e.group}):c.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a.e.group}):c.groupRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows():c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&
c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",
subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new ta({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new ta({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.groupsObj=new ta({objects:c.groups,events:a.groupEvents,fields:a.options.columnFields});a.columnRelationsObj=new ta({objects:c.columnRelations,fields:a.options.columnFields});c.$on(c.name+"-load-data",function(b,d,c){a.loadData(d,c)});c.$on(c.name+
"-export-json",function(b,d,c,t){p.setTempData(a.exportToJSON(d,c,t))});this.exportToJSON=function(b,d,c){var r=c;r=r?r:null;var f=a.columnsObj.getList();b=JSON.stringify(f,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.allowGrouping,a.options.columnFields.cellTemplateUrl,a.options.columnFields.columns,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,
a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerText,a.options.columnFields.footerTooltip,a.options.columnFields.groupText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,
a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.pid,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],r);c=c?c:null;r=a.getFullList();d=JSON.stringify(r,d?d:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,
a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.rowFields.visible,a.options.cellFields.rid],c);return'[\n{ "columns": '+b+' },\n{ "rows": '+d+" }\n]"};this.loadData=
function(b,d){a.suspendLayout();a.updateDataFields(d);a.rowsObj.clear(null,a.rowsAreCleared);if(angular.isDefined(c.rows))for(var r=c.rows.length=0;r<b.length;r++)c.rows.push(b[r]);a.rowsObj=new ta({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new ta({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var I=
!1;this.dragDropStatus=function(a){if(void 0!=a)I=a;else return I};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:null};var Wc=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=
function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getGridName=function(){return angular.isDefined(c.name)?c.name:""};f.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});
f.bind("dragover",function(b){b.preventDefault();if(!a.options.enabled||!a.isDropInRange(b)||a.options.grouping.enabled&&0<a.groups.length)a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");else{var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d)if(b.dataTransfer?
b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),d=q.getData(),d.source||(d.source=a.getDnDSource(b)),q.setData({source:d.source,sourceCtrl:d.sourceCtrl,target:null,dropPos:-1}),d={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},
0==a.callDragOver(d))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{d=a.getMousePos(b);b=d.y+16;d=d.x+20;var r=a.getDropMarkWindow();r.empty();r.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"Grid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:d});a.dropMark(!0)}}});f.bind("drop",function(b){b.preventDefault();
if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d&&(d=q.getData(),d.source||(d.source=a.getDnDSource(b)),d.source)){var r={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};
!1!==a.callDragDrop(r)&&(a.drop(d),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});f.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragLeave(b);a.cancelScrollTimer()}});f.bind("dragend",function(b){b.preventDefault();a.options.enabled&&
(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});f.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,d){return q.hitTest(a,d,{left:0,top:0,right:f[0].clientWidth,bottom:f[0].clientHeight})};this.isPopupActive=function(){return!1};var Mb=function(b,d){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var t={};t[a.options.cellFields.text]=b[d.text];b[c.cells].push(t)}b[c.rows]||
(b[c.rows]=[]);b[c.rows].length=0;if(b[d.items]&&0<b[d.items].length)for(t=0;t<b[d.items].length;t++)b[c.rows].push(Mb(b[d.items][t],d));return b},M=function(b,d){var c=!1;d.sourceCtrl&&(c=d.sourceCollection.removeAt(b,-1,null,d.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Mb(b,d.sourceCtrl.options.dataFields)),1===d.dropPos||2===d.dropPos?1===d.dropPos?a.rowsObj.insertByRef(b,d.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,d.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};
this.setDropSelection=function(b,d){var c=b;!c&&0<=d&&d<a.currentList.length&&(c=a.currentList[d]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var d=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var t=[],f=0;f<b.source.length;f++){for(var h=!1,m=b.sourceCollection.getParent(b.source[f]);m;){if(b.sourceCtrl.isObjInSelList(m)){h=
!0;break}m=b.sourceCollection.getParent(m)}h||t.push(b.source[f])}if(0<t.length)if(d=t[t.length-1],f=b.sourceCtrl.getObjCurrentIndex(t[0]),h=b.sourceCtrl.getObjCurrentIndex(d),f<=h)for(f=0;f<t.length;f++)M(t[f],b);else for(f=t.length-1;0<=f;f--)M(t[f],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),M(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());b.sourceCtrl.multiSelection(!1);
var p=l(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(d);a.updateFocus(a.getObjCurrentIndex(d),0);l.cancel(p)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&"row"==b.type&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isDropAllowed=function(b,d,c){if((c=a.options.allowDrop)&&b&&d&&(c=a.isRowFixed(d)||"row"!=d.type||!d[a.options.rowFields.allowDrop]&&void 0!==d[a.options.rowFields.allowDrop]?
!1:!0))if(Array.isArray(b))for(var r=0;r<b.length;r++){if(b[r][a.options.rowFields.pid]&&d[a.options.rowFields.pid]&&!h.isEqual(b[r][a.options.rowFields.pid],d[a.options.rowFields.pid])){c=!1;break}else if(h.isEqual(b[r][a.options.rowFields.id],d[a.options.rowFields.id])){c=!1;break}if(!c)break}else b[a.options.rowFields.pid]&&d[a.options.rowFields.pid]&&!h.isEqual(b[a.options.rowFields.pid],d[a.options.rowFields.pid])?c=!1:h.isEqual(b[a.options.rowFields.id],d[a.options.rowFields.id])&&(c=!1);return c};
this.getDropMarkWindow=function(){for(var a=Wc,d=angular.element(document.body).children(),c=0;c<d.length;c++){var f=angular.element(d[c]);if(f[0].attributes&&f[0].attributes["data-element"]&&"dropmark"===f[0].attributes["data-element"].value){a=f;break}}return a};this.dropMark=function(b,d){d||(d=a.getDropMarkWindow());if(d){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(d).css("display",c)}};this.updateDropMarkElem=function(a,d){a&&d&&(a.css("top",d.top+"px"),a.css("left",
d.left+"px"),a.css("width",d.width+"px"))};c.$on(c.name+"-open-editor",function(b,d){a.openEditor(d)});c.$on(c.name+"-close-editor",function(b,d){a.closeEditor(d)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:h.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&
c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};
this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,d,r){var f=!0;a.allowEvents&&(f=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:d,value:r}):c.cellvalueChanging({e:{row:b,cell:d,value:r}}));return f};this.callCellValueChanged=function(b,d,r){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?
c.events.cellvalueChanged({row:b,cell:d,value:r}):c.cellvalueChanged({e:{row:b,cell:d,value:r}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,d){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:d});c.columnClick({e:{column:a,mousePos:d}})};this.callColumnDblClick=function(a,d){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:d});
c.columnDblclick({e:{column:a,mousePos:d}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,d){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:d}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:d}})};this.callColumnPosChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnPoschanged&&
c.events.columnPoschanged({sourceColumn:a,targetColumn:d});c.columnPoschanged({e:{sourceColumn:a,targetColumn:d}})};this.callColumnRightClick=function(a,d){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:d});c.columnRightclick({e:{column:a,mousePos:d}})};this.callColumnSizeChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=
function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,
sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?
c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,
sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,d,r,f){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:d,cell:r,mousePos:f});c.cellClick({e:{event:a,row:d,cell:r,mousePos:f}})};this.callCellDblClick=function(a,d,r){return angular.isDefined(c.events)&&
c.events.cellDblClick?c.events.cellDblClick({row:a,cell:d,mousePos:r}):c.cellDblclick({e:{row:a,cell:d,mousePos:r}})};this.callCellHover=function(a,d){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:d}):c.cellHover({e:{event:a,cell:d}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,d,r){angular.isDefined(c.events)&&c.events.rowClick?
c.events.rowClick({event:a,row:d,mousePos:r}):c.rowClick({e:{event:a,row:d,mousePos:r}})};this.callRowDblClick=function(a,d){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:d}):c.rowDblclick({e:{row:a,mousePos:d}})};this.callRowHover=function(a,d){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,row:d}):c.rowHover({e:{event:a,row:d}})};this.callRowRightClick=function(a,d){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,
mousePos:d});c.rowRightclick({e:{row:a,mousePos:d}})};this.callKeyDown=function(a,d){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:d}):c.keyDown({e:{event:a,row:d}})};this.callKeyPress=function(a,d){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:d}):c.keyPress({e:{event:a,row:d}})};this.callKeyUp=function(a,d){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:d}):c.keyUp({e:{event:a,row:d}})};this.callScrollPosChanged=
function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};f.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});f.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});f.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));
a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];this.suppressWatchScrollVisibility=!1;var dc=function(b,d,c){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=Ua(b);for(var f,m,l,p=0;p<a.columnList.length;p++){l=a.columnList[p];f=l[a.options.columnFields.id];m=l[a.options.columnFields.editorType];
l=l[a.options.columnFields.editorSettings];var q=p;f&&(q=a.getCellIndexById(r,p,f));0<=q&&q<r.length&&(r[q].type="cell",a.setDefaultCellValue(r[q],m,l))}}c&&(a.expandList.push(b),a.expandIndentList.push(d));return c},C=function(b,d,c){if(!b[a.options.rowFields.rows])return c=dc(b,d+Ca,c);if(c=dc(b,d+Ca,c)){var r=0,f;if("group"==b.type&&a.isRowExpanded(b)){var h=b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var m=0;m<h.length;m++)(f=C(h[m],d+Ca,b[a.options.rowFields.id]))&&r++}}!a.isThereChildRows&&
(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var d=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)C(b[c],a.indentList[d],null)}if(0<a.expandList.length){a.allowEvents=!1;d++;Array.prototype.splice.apply(a.currentList,[d,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,
[d,0].concat(a.expandIndentList));a.getRowScope()?a.updateView():a.updateLayout();var f=l(function(){a.suppressWatchScrollVisibility=!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=l(function(){a.suppressWatchScrollVisibility=!1;l.cancel(b)},10);l.cancel(f)},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var d=null,c=!1,f=b,h=-1,m=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&
!c;){d=a.getList(b);for(h=d.indexOf(f)+1;!c&&h<d.length;)f=d[h],0<a.getRowCurrentIndex(f)&&(c=!0),h++;c||(f=b);b=a.getParent(b)}if(!c&&f)for(d=a.getList(),a.options.grouping.enabled&&0<a.groups.length&&(d=a.groupList),h=d.indexOf(f)+1;h<d.length;)if(f=d[h],0<a.getRowCurrentIndex(f)){c=!0;break}else h++;m++;d=a.currentList.length-m;c&&(d=a.getRowCurrentIndex(f)-m);if(0<d){a.currentList.splice(m,d);a.indentList.splice(m,d);a.getRowScope()?a.updateView():a.updateLayout();var p=l(function(){a.suppressWatchScrollVisibility=
!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=l(function(){a.suppressWatchScrollVisibility=!1;l.cancel(b)},10);l.cancel(p)},1)}}};this.toggle=function(b,d){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(d&&0!=b[a.options.rowFields.expanded]||!1===d&&0==b[a.options.rowFields.expanded])){a.updateType="view";var c=void 0!==d?d:!1!==b[a.options.rowFields.expanded]?!0:
!1;c=void 0!=d?d:!c;c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c)}}else{c=a.getFullList();for(var f=0;f<c.length;f++)c[f][a.options.rowFields.expanded]=d;a.updateCurrentLayout()}};this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,d,c){a.filter(d,c)});this.filter=function(b,d){if(b)b[a.options.columnFields.filterParams]=d;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=
null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,d,r,f,h){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:h}):c.gotFocus({e:{event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:h}})};this.callLostFocus=function(a,d,f,t,h){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:d,cell:f,edit:void 0!=t?!0:!1,editValue:h}):c.lostFocus({e:{event:a,row:d,cell:f,edit:void 0!=
t?!0:!1,editValue:h}})};this.getTabIndex=function(){return f[0].attributes&&f[0].attributes.tabindex?f[0].attributes.tabindex.value:""};this.updateFocus=function(b,d){if(1==a.options.allowFocus)var c=l(function(){if(a.isRowIndexInRange(b)){var r="none";0<=d&&d<a.columnList.length&&(r=a.columnList[d][a.options.columnFields.fixed]);var h=a.getElemFromRow(a.currentList[b],r);h&&(1==a.options.allowCellFocus&&0<=d&&d<a.columnList.length?(r=a.getElemFromCell(b,d,r))&&r[0].focus():h[0].focus())}else f[0].focus();
l.cancel(c)},5)};c.$on(c.name+"-focus",function(b,d){if(d)switch(d.type){case "group":var c=a.getRowCurrentIndex(d);a.updateFocus(c);break;case "row":c=a.getRowCurrentIndex(d);a.updateFocus(c);break;case "cell":c=a.getCellRowIndex(d);var f=a.getCellColumnIndex(d);a.updateFocus(c,f)}else a.updateFocus()});var G=!1;this.getCell=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],
d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellObject=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellIndexById=
function(b,d,c){var f=-1;if(b){d=a.getColumnRealIndex(d);for(var r=0;r<b.length;r++)if(void 0==b[r][a.options.cellFields.cid]){f=d;break}else if(b[r][a.options.cellFields.cid]==c){f=r;break}}return f};this.getCellIndexFromRow=function(b,d){var c=-1;if(b&&d&&d[a.options.rowFields.cells])for(var f=0;f<d[a.options.rowFields.cells].length;f++)if(d[a.options.rowFields.cells][f]==b){c=f;break}return c};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);
return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var d=a.findRowById(b[a.options.cellFields.rid]);if(d&&(d=d[a.options.rowFields.cells])&&0<d.length)return d.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var d=null,c=0;c<a.columnList.length;c++)if(a.columnList[c][a.options.columnFields.id]==b){d=a.columnList[c];
break}return d};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?!0:!1:!0};this.getContentElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length)for(var c=a.children(),f=0;f<c.length;f++){var h=angular.element(c.eq(f));if(h[0].attributes&&
h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==d){b=h;break}}return b};this.getElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var c=a.children(),f=0;f<c.length;f++){var h=angular.element(c.eq(f));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==d){b=h;break}}}return b};this.getChildElement=function(a,d){var b=null;d||(d="content");if(a&&0<a.children().length)for(var c=
a.children(),f=0;f<c.length;f++){var h=angular.element(c.eq(f));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==d){b=h;break}}return b};this.getElemFromColumn=function(b,d,c){var f=null;if(b){b=a.getColumnCurrentIndex(b);var r=a.getHeaderElem(d);"footer"==c&&(r=a.getFooterElem(d));if(r&&(d=r.find("td"))&&0<d.length)for(c=0;c<d.length;c++)if(r=angular.element(d[c]),r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){f=
r;break}}return f};this.getElemFromRow=function(b,c,f){var d=null;if(b&&(b=a.getRowCurrentIndex(b,f),(c=a.getRowElems(c,f))&&0<c.length))for(f=0;f<c.length;f++){var r=angular.element(c[f]);if(r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){d=r;break}}return d};this.getElemFromCell=function(b,c,f,h){var d=null;if(a.isRowIndexInRange(b,h)){switch(h){case "top":b=a.getElemFromRow(a.currentTopList[b],f,h);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],
f,h);break;default:b=a.getElemFromRow(a.currentList[b],f,h)}if(b&&(b=b.find("td"))&&0<b.length)for(f=0;f<b.length;f++)if(h=angular.element(b[f]),h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===c.toString()){d=h;break}}return d};this.getElemFromColumnCell=function(b,c,f,h,m){var d=null;b=a.getColumnCompleteIndex(b);if((c=f?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(f=0;f<c.length;f++){var r=angular.element(c[f]);switch(h){case "column-expand-cell":r[0].attributes["data-element"]&&
r[0].attributes["data-element"].value.toString()==h&&r[0].attributes["data-level"]&&r[0].attributes["data-level"].value.toString()===b.level.toString()&&r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.index.toString()&&(d=r);break;case "column-footer":r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===m.toString()&&(d=r);break;default:r[0].attributes["data-level"]&&r[0].attributes["data-level"].value.toString()===b.level.toString()&&r[0].attributes["data-index"]&&
r[0].attributes["data-index"].value.toString()===b.index.toString()&&(d=r)}}return d};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "group":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";
if(1==b.selected)return"selected";if(b==a.hoverRow)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==
c)return a.hoverColumn;var d=null;var f="left";for(var m=0;!d&&3>m;){if(f=a.getHeaderElem(f)){var l=f.find("td");if(l&&0<l.length)for(var p=0;p<l.length;p++){f=angular.element(l[p]);var q=h.getPageRect(f);if(h.checkHit(b,c,q)){d=a.getColumnFromElem(f);break}}}m++;f=1==m?"right":"none"}return d};this.getCellAt=function(b,c){var d=null,f=a.getRowAt(b,c);if(f){var m=a.getElemFromRow(f).find("td");if(m&&0<m.length)for(var l=0;l<m.length;l++){var p=angular.element(m[l]);var q=h.getPageRect(p);if(h.checkHit(b,
c,q)&&(d=a.getRowCurrentIndex(f),p=a.getIndexFromElem(p),d=a.getCellObject(d,p)))break}}return d};this.getRowAt=function(b,c){var d=null;var f="none";for(var m=0;!d&&3>m;){var l=a.getRowElems(f);if(l&&0<l.length)for(var p=0;p<l.length;p++){f=angular.element(l[p]);var q=h.getPageRect(f);if(h.checkHit(b,c,q)){d=a.getRowFromElem(f);break}}m++;f=1==m?"left":"right"}return d};this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):
-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?a.getRowFromElem(b):null}return null};this.getColumnCompleteIndex=function(b){var c={level:-1,index:-1};if(b&&a.completeColumnList)for(var f=
0;f<a.completeColumnList.length;f++){for(var m=0;m<a.completeColumnList[f].length;m++){var l=a.completeColumnList[f][m];if(l.column==b||h.isEqual(l.column[a.options.columnFields.id],b[a.options.columnFields.id])){c={level:f,index:m};break}}if(0<=c.index)break}return c};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.columnsObj.getList();return 0<=b&&
b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-level"]&&b[0].attributes["data-index"]){var c=b[0].attributes["data-level"].value;b=b[0].attributes["data-index"].value;if(0<=c&&c<a.completeColumnList.length&&0<=b&&b<a.completeColumnList[c].length)return a.completeColumnList[c][b].column}return null};this.getIndexFromElem=
function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,f="none";b&&b[0].attributes["data-fixed"]&&(f=b[0].attributes["data-fixed"].value);switch(f){case "top":if(a.isRowIndexInRange(c,f))return a.currentTopList[c];break;case "bottom":if(a.isRowIndexInRange(c,f))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};
this.isColumnVisible=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};this.isColumnIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&h.isEnabled(b[a.options.rowFields.enabled])};
this.mouseButtonStatus=function(a){G=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){p.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-text",function(b,c){p.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-list",function(b,c){p.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){p.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,
c){if(b){for(var d=[],f=a.getParent(b);f;)d.push(f),f=a.getParent(f);for(f=d.length-1;0<=f;f--)d[f][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var h=l(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);l.cancel(h)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.findParent=function(b,c){var d=null;
if(b&&c)for(var f=0;!d&&f<c.length;)d=c[f][a.options.rowFields.id]&&b[a.options.rowFields.pid]&&c[f][a.options.rowFields.id].toString()===b[a.options.rowFields.pid].toString()?c[f]:a.findParent(b,c[f][a.options.rowFields.rows]),f++;return d};this.getParent=function(b){return b?a.findParent(b,a.groupList):null};this.getList=function(b){return a.rowsObj.getList(b)};this.findParentColumn=function(b){var c=null;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var h=0;h<a.completeColumnList[f].length;h++){var m=
a.completeColumnList[f][h].column;if(m[a.options.columnFields.id]&&b[a.options.columnFields.pid]&&m[a.options.columnFields.id].toString()===b[a.options.columnFields.pid].toString()){c=m;break}}if(c)break}return c};this.getParentColumn=function(b){return b?a.findParentColumn(b):null};this.getColumnLevel=function(b){var c=-1;if(b)for(var f=0;f<a.completeColumnList.length;f++){for(var m=0;m<a.completeColumnList[f].length;m++){var l=a.completeColumnList[f][m].column;if(l==b||h.isEqual(l[a.options.columnFields.id],
b[a.options.columnFields.id])){c=f;break}}if(0<=c)break}return c};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=
a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);
break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};f.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():
a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,f){a.refresh(c,f)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c){a.beginLoad(c)});c.$on(c.name+"-end-load",function(b){a.endLoad()});this.callLoadComplete=function(){angular.isDefined(c.events)&&
c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){p.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});
c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,
a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){p.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){p.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,f){a.scrollTo(c,f)});var J=!1;this.shiftFirstSelectedRow=this.shiftFirstSelectedColumn=null;this.multiSelection=function(a){if(void 0!=
a)J=a;else return J};this.columnSelection=function(b,d){if(b){var f=a.columnSelection(),h=!0,m=!0;m=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(h&&!1!==m)if(m=d&&(d.shiftKey||d.ctrlKey||d.metaKey)?!0:!1,h){(h=(h=!a.isColumnInSelList(b)||!m||d&&d.shiftKey)&&!(a.isColumnInSelList(b)&&d&&3==d.which))&&(d&&d.shiftKey||!m)&&a.clearPrevColumnSelection();a.options.selectedColumn=b;if(d&&d.shiftKey){if(a.shiftFirstSelectedColumn||
(a.shiftFirstSelectedColumn=f),h=a.getColumnCurrentIndex(a.shiftFirstSelectedColumn),f=a.getColumnCurrentIndex(b),h>f&&(m=h,h=f,f=m),a.isColumnIndexInRange(h)&&a.isColumnIndexInRange(f))for(;h<=f;h++)a.columnList[h][a.options.columnFields.selected]=!0,a.options.selectedColumns.push(a.columnList[h])}else m?(f=null===b[a.options.columnFields.selected]||"undefined"===b[a.options.columnFields.selected]?!1:b[a.options.columnFields.selected],b[a.options.columnFields.selected]=!f,b[a.options.columnFields.selected]?
a.isColumnInSelList(b)||a.options.selectedColumns.push(b):a.options.selectedColumns=a.options.selectedColumns.filter(function(a){return a!=b})):(b[a.options.columnFields.selected]=!0,a.isColumnInSelList(b)||a.options.selectedColumns.push(b)),a.shiftFirstSelectedColumn=null;angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b);a.callAfterSelect(b);a.refreshColumns()}else m?(f=null===b[a.options.columnFields.selected]||"undefined"===b[a.options.columnFields.selected]?!1:b[a.options.columnFields.selected],
value&&"undefined"!==value&&(f=value),b[a.options.columnFields.selected]=!f,b[a.options.columnFields.selected]?a.isColumnInSelList(b)||a.options.selectedColumns.push(b):a.options.selectedColumns=a.options.selectedColumns.filter(function(a){return a!=b}),a.shiftFirstSelectedColumn=null,a.callAfterSelect(b),a.refreshColumns()):m||(m||1!=a.options.selectedColumns.length&&a.isColumnInSelList(b)||a.clearPrevColumnSelection(b),a.shiftFirstSelectedColumn=null)}else return a.options.selectedColumn};this.clearPrevColumnSelection=
function(b){for(var c=0;c<a.options.selectedColumns.length;c++)b&&!h.isEqual(a.options.selectedColumns[c][a.options.columnFields.id],b[a.options.columnFields.id])?a.options.selectedColumns[c][a.options.columnFields.selected]=!1:b||(a.options.selectedColumns[c][a.options.columnFields.selected]=!1);a.options.selectedColumns.length=0;b&&a.options.selectedColumns.push(b);a.refreshColumns()};this.isColumnInSelList=function(b){var c=!1,f=a.options.selectedColumns;if(b&&f)for(var m=0;m<f.length;m++)if(h.isEqual(f[m][a.options.columnFields.id],
b[a.options.columnFields.id])){c=!0;break}return c};this.updateColumnSelection=function(b,c){var d=c&&(c.shiftKey||c.ctrlKey||c.metaKey)?!0:!1;0<a.options.selectedColumns.length&&!d&&(a.clearPrevColumnSelection(),b[a.options.columnFields.selected]=!0,a.options.selectedColumns.push(b),a.callAfterSelect(b),a.refreshColumns())};this.isRowSelected=function(a){return h.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!h.isEqual(a.options.selectedRows[c][a.options.rowFields.id],
b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.rowSelection=function(b,d,f,m,l,p){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var r=a.rowSelection(),q=!0;r&&(q=
!h.isEqual(r[a.options.rowFields.id],b[a.options.rowFields.id]));var t=!0;t=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==t)if(f=d||f||m?!0:!1,q){q=!0;"multi-extended"==a.options.selectionMode&&(q=(q=!a.isObjInSelList(b)||!f||d)&&!(a.isObjInSelList(b)&&p));q&&("one"==a.options.selectionMode?a.clearPrevSelection():G&&d?a.clearPrevSelection():J||f||"multi-simple"===a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=
b;if(G&&d&&"one"!=a.options.selectionMode){if(a.shiftFirstSelectedRow||(a.shiftFirstSelectedRow=r),d=a.getRowCurrentIndex(a.shiftFirstSelectedRow),l=a.getRowCurrentIndex(b),d>l&&(p=d,d=l,l=p),a.isRowIndexInRange(d)&&a.isRowIndexInRange(l))for(;d<=l;d++)a.currentList[d][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[d])}else G&&(J||f||"multi-simple"===a.options.selectionMode)?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],
b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b)),a.shiftFirstSelectedRow=null;angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else J||f||"multi-simple"===a.options.selectionMode?(d=null===b[a.options.rowFields.selected]||
"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],l&&"undefined"!==l&&(d=l),b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.shiftFirstSelectedRow=null,a.callAfterSelect(b),a.refresh(null,null,!0)):J||f||"multi-simple"===a.options.selectionMode||(f||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b),
a.shiftFirstSelectedRow=null)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,f){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!f&&!J&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,f=a.options.selectedRows;if(b&&f)for(var m=0;m<f.length;m++)if(h.isEqual(f[m][a.options.rowFields.id],
b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?p.setTempData(a.hoverColumn):c&&p.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){p.setTempData(a.columnSelection())});c.$on(c.name+
"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-columns",function(b){p.setTempData(a.options.selectedColumns)});c.$on(c.name+"-set-selected-columns",function(b,c){c&&Array.isArray(c)&&l(function(){for(var b=0;b<a.options.selectedColumns.length;b++)a.options.selectedColumns[b][a.options.columnFields.selected]=!1;for(b=a.options.selectedColumns.length=0;b<c.length;b++)c[b][a.options.columnFields.selected]=!0,a.options.selectedColumns.push(c[b]);0<c.length?(a.options.selectedColumn=
c[c.length-1],a.callAfterSelect(a.options.selectedColumn)):a.options.selectedColumn=null;a.refreshColumns()},1)});c.$on(c.name+"-get-selected-row",function(b){p.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var d=l(function(){a.rowSelection(c);l.cancel(d)},1)});c.$on(c.name+"-get-selected-rows",function(b){p.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&l(function(){for(var b=a.options.selectedRows.length=
0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,f){a.moveColumn(c,f)});c.$on(c.name+"-move-row",function(b,c,f,h,m){a.moveRow(c,f,h,m)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=
b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoUpdate",function(b,
c){b!==c&&(a.options.autoUpdate=b,a.updateLayout())});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.grouping.enabled&&a.updateGroupPanel(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),
a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("grouping",function(b,c){b!==c&&(a.updateGrouping(b),a.updateLayout())},!0);c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=b)});
c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);
c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",
function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,f,h){a.sort(c,f,h)});this.sort=function(b,c,f){a.sortColumn=b;a.sortComparer=f;if("ascending"==
c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,f){var d=-1;if(b)for(var h=0;h<b.length;h++)if(void 0==b[h][a.options.cellFields.cid]){d=c;break}else if(b[h][a.options.cellFields.cid]==f){d=h;break}return d};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=
a.getColumnCurrentIndex(a.sortColumn),f=0<=c?c:a.options.expandColIndex;if(f<a.columnList.length){var m=a.columnList[f][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var d=null,l=null;if(b[a.options.rowFields.cells]){var r=a.getCellIndexInCollection(b[a.options.rowFields.cells],f,m);0<=r&&((d=b[a.options.rowFields.cells][r][a.options.cellFields.value])||
(d=b[a.options.rowFields.cells][r][a.options.cellFields.text]),h.isObject(d)&&(d=d.value?d.value:d.text))}c[a.options.rowFields.cells]&&(r=a.getCellIndexInCollection(c[a.options.rowFields.cells],f,m),0<=r&&((l=c[a.options.rowFields.cells][r][a.options.cellFields.value])||(l=c[a.options.rowFields.cells][r][a.options.cellFields.text]),h.isObject(l)&&(l=l.value?l.value:l.text)));d=void 0!=d?d:null;l=void 0!=l?l:null;switch(a.options.sorting){case "ascending":if(d<l)return-1;if(d>l)return 1;break;case "descending":if(d>
l)return-1;if(d<l)return 1;break;default:return 0}})}}};var ob=function(b){if(b){var c=h.isFieldAvailable(b.general,"iui-grid-column");var f=(f=b.header)?{content:h.isFieldAvailable(f.content,"iui-grid-column-header-cell-content"),disabled:h.isFieldAvailable(f.disabled,"iui-grid-column-header-disabled"),normal:h.isFieldAvailable(f.normal,"iui-grid-column-header"),hovered:h.isFieldAvailable(f.hovered,"iui-grid-column-header-hovered"),selected:h.isFieldAvailable(f.selected,"iui-grid-column-header-selected")}:
a.options.controlStyle.column.header;b=(b=b.footer)?{content:h.isFieldAvailable(b.content,"iui-grid-column-footer-cell-content"),disabled:h.isFieldAvailable(b.disabled,"iui-grid-column-footer-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-column-footer"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-column-footer-hovered"),selected:h.isFieldAvailable(b.selected,"iui-grid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:f,footer:b}}return a.options.controlStyle.column};
this.getExpandBoxStyle=function(b){return b?{general:h.isFieldAvailable(b.general,"iui-grid-expand-box"),animated:h.isFieldAvailable(b.animated,"iui-grid-expand-box-load"),expanded:h.isFieldAvailable(b.expanded,"iui-grid-expand-box-open"),collapsed:h.isFieldAvailable(b.collapsed,"iui-grid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Ha=function(b){if(b){var c=(c=b.general)?{disabled:h.isFieldAvailable(c.disabled,"iui-grid-row-disabled"),focused:h.isFieldAvailable(c.focused,"iui-grid-row-focused"),
normal:h.isFieldAvailable(c.normal,"iui-grid-row"),hovered:h.isFieldAvailable(c.hovered,"iui-grid-row-hovered"),selected:h.isFieldAvailable(c.selected,"iui-grid-row-selected")}:a.options.controlStyle.row.general;var f=b.checkBox;if(f){var m=h.isFieldAvailable(f.general,"iui-checkbox");f=(f=f.box)?{general:h.isFieldAvailable(f.general,"iui-checkbox-box"),disabled:h.isFieldAvailable(f.disabled,"iui-checkbox-disabled"),checked:h.isFieldAvailable(f.checked,"iui-checkbox-checked"),indeterminate:h.isFieldAvailable(f.indeterminate,
"iui-checkbox-indeterminate"),unchecked:h.isFieldAvailable(f.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box;m={general:m,box:f}}else m=a.options.controlStyle.row.checkBox;f=a.getExpandBoxStyle(b.expandBox);var l=(l=b.cell)?{content:h.isFieldAvailable(l.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(l.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(l.disabled,"iui-grid-row-cell-disabled"),focused:h.isFieldAvailable(l.focused,"iui-grid-row-cell-focused"),
normal:h.isFieldAvailable(l.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(l.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(l.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?{disabled:h.isFieldAvailable(b.disabled,"iui-grid-row-fixed-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-fixed"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;return{general:c,checkBox:m,expandBox:f,
cell:l,fixed:b}}return a.options.controlStyle.row},pb=function(b){return b?{content:h.isFieldAvailable(b.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(b.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(b.disabled,"iui-grid-row-cell-disabled"),focused:h.isFieldAvailable(b.focused,"iui-grid-row-cell-focused"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(b.selected,"iui-grid-row-cell-selected")}:
a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:h.isFieldAvailable(b.general,"iui-grid"),column:ob(b.column),row:Ha(b.row),cell:pb(b.cell)}:{general:h.isFieldAvailable(a.defaultStyle.general,"iui-grid"),column:ob(a.defaultStyle.column),row:Ha(a.defaultStyle.row),cell:pb(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,f){var d=a.options.controlStyle.column;b&&b.style&&(d=b.style);b=a.options.controlStyle.column.body;var h=d.body;switch(c){case "header":b=
a.options.controlStyle.column.header;h=d.header;break;case "footer":b=a.options.controlStyle.column.footer,h=d.footer}if(f)switch(f){case "content":return h&&h.content?h.content:b.content;case "disabled":return h&&h.disabled?h.disabled:b.disabled;case "hovered":return h&&h.hovered?h.hovered:b.hovered;case "selected":return h&&h.selected?h.selected:b.selected;default:return h&&h.normal?h.normal:b.normal}else return c?h?h:b:d?d:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var d=
a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(d=b.style)}if(c){if(h.isString(d.general))return d.general;if(a.isRowFixed(b))switch(c){case "disabled":return d.fixed&&d.fixed.disabled?d.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return d.fixed&&d.fixed.hovered?d.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return d.fixed&&d.fixed.normal?
d.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return d.general&&d.general.disabled?d.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return d.general&&d.general.focused?d.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return d.general&&d.general.hovered?d.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return d.general&&d.general.selected?d.general.selected:a.options.controlStyle.row.general.selected;
default:return d.general&&d.general.normal?d.general.normal:a.options.controlStyle.row.general.normal}}else return d?d:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-grid-row-cell-content"};this.getDefaultCellLabelClass=function(){return"iui-grid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-grid-lines-both"};this.getCurrentCellStyle=function(b,c,f){var d=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;
case "parent":b&&(d=pb(a.getCurrentRowStyle(b)));break;default:c.style&&(d=c.style)}if(f)switch(f){case "content":return d.content?d.content:a.options.controlStyle.cell.content;case "disabled":return d.disabled?d.disabled:a.options.controlStyle.cell.disabled;case "focused":return d.focused?d.focused:a.options.controlStyle.cell.focused;case "hovered":return d.hovered?d.hovered:a.options.controlStyle.cell.hovered;case "selected":return d.selected?d.selected:a.options.controlStyle.cell.selected;default:return d.normal?
d.normal:a.options.controlStyle.cell.normal}else return d?d:a.options.controlStyle.row.cell}}]).directive("iuiGrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window","IntegralUIListCtrlService",function(c,f,l,m,B,h,ta){return{restrict:"EA",controller:"IntegralUIGridController",transclude:!0,replace:!0,template:'<div class="iui-grid" data-element="grid"><div class="iui-grid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",
allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoUpdate:"=",columns:"=",columnRelations:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",grouping:"=",groups:"=",hoverSelection:"=",indent:"=",labelEdit:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showFooter:"=",showHeader:"=",
showIcons:"=",sorting:"@",afterEdit:"&",afterLabelEdit:"&",afterSelect:"&",beforeEdit:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellDblclick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearGroups:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",
dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",groupAdded:"&",groupAdding:"&",groupChange:"&",groupRemoved:"&",groupRemoving:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(p,q,xc,a,Vc){var H=this,Ba=q.children().eq(0),P=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),
E=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),mb=angular.element('<div class="iui-scrollbar-corner"></div>'),Ua=null,Ca=null,nb=null,Cb=!1,I=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)Cb=a;else return Cb};var Wc=function(){var e="iui-grid-block";a.options.showStatusIcons&&(e+=" "+e+"-shift-left");a.options.rtl&&(e+=" "+e+"-rtl");return e};p.$on("$destroy",
function(a){H.s2t();cb&&(f.cancel(cb),cb=null);db&&(f.cancel(db),db=null);x&&(x.unbind("mouseenter mouseleave mousemove mouseup"),Kd());Ia&&Ia.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");angular.element(h).unbind("dragenter",Ld);angular.element(h).unbind("dragover",Md);angular.element(h).unbind("dragend",Nd);angular.element(h).unbind("keyup",Od);angular.element(h).unbind("mousemove",
Pd);angular.element(h).unbind("mousedown",Qd);angular.element(h).unbind("mouseup",Rd);I&&I.unbind("blur focus keydown mousedown");Sd();A&&A.$destroy();v&&v.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());a.dropMark();var Mb=function(){Ua&&(f.cancel(Ua),Ua=null)};a.addDropMark=function(){var e=q[0];for(var b=null;e;){if(e===document.getElementsByTagName("body")[0]){b=e;break}e=e.offsetParent}if(e=b)angular.element(e).append(a.getDropMarkWindow()),
a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(e){e=a.getMousePos(e);var b=q[0].getBoundingClientRect();e.x-=angular.element(h)[0].pageXOffset;e.y-=angular.element(h)[0].pageYOffset;var c=b.top+D;b=b.bottom-N;O&&E&&(b-=E[0].offsetHeight);return e.y<c||e.y>b?!1:!0};var M=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),dc=function(){M&&(M.remove(),M.css("top","-9999999px"),M.css("left","-9999999px"))};a.getCellElemFromRow=
function(e){return e&&(e=a.getElemFromRow(e))?a.getChildElement(e,"cell"):null};a.openEditor=function(e,b){if(e)switch(e.type){case "cell":b||(b=a.getColumnById(e[a.options.cellFields.cid]));if(!b){var g=a.getCellColumnIndex(e),c=a.columnsObj.getList();c&&0<=g&&g<c.length&&(b=c[g])}if(b){g=a.getCellType(e,a.getColumnRealIndex(b));c=a.getCellRowIndex(e);var z=a.getCellColumnIndex(e);if(c=a.getElemFromCell(c,z,b[a.options.columnFields.fixed]))switch(g){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(c,
e,b);break;case "dropdown":a.openDropDownEditor(c,e,b);break;default:0!=e[a.options.cellFields.allowEdit]&&ec(null,c,0)}}}};a.closeEditor=function(e,b,c){if(e)switch(e.type){case "cell":if(b||(b=a.getColumnById(e[a.options.cellFields.cid])),b)switch(a.getCellType(e,a.getColumnRealIndex(b))){case "incell":a.closeActiveEditor(e);break;case "dropdown":a.closeActiveEditor(e)}else a.closeActiveEditor()}else a.closeActiveEditor();c||"optimal"!=a.options.displayMode||a.updateView();J=null};var C=null,G=
!1,J=null,ob=null,Ha=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(e,b,k){G&&a.closeActiveEditor(b,!0);pb();if(b&&k&&(J=b,k='<div ng-include="'+k[a.options.columnFields.editorTemplate]+'"></div>',C=angular.element('<div class="iui-incell-editor"></div>'),C.append(c(k)(p.$parent)),0!=a.callBeforeEdit(b))){e.children().eq(0).append(C);G=!0;ob="incell";d();C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",function(a){a.stopPropagation()});C.bind("click",
function(a){a.stopPropagation()});C.bind("keydown",function(e){switch(e.keyCode){case 27:a.closeActiveEditor(J)}e.stopPropagation()});C.bind("keypress",function(a){a.stopPropagation()});C.bind("keyup",function(a){a.stopPropagation()});var g=f(function(){var a=m.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,10)-(a.left+a.right);a=parseInt(getComputedStyle(e[0]).height,10)+2;C.css("width",b+"px");C.css("height",a+"px");C.css("top",e[0].offsetTop+"px");p.$apply();C.children&&1==C.children().length&&
(b=C.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));f.cancel(g)},1)}};a.openDropDownEditor=function(e,b,k){G&&a.closeActiveEditor(b,!0);pb();if(b&&k&&(J=b,k='<div ng-include="'+k[a.options.columnFields.editorTemplate]+'"></div>',C=angular.element('<div class="iui-dropdown-editor"></div>'),C.append(c(k)(p.$parent)),0!=a.callBeforeEdit(b)))var g=f(function(){angular.element(Ab).append(C);C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",
function(a){a.stopPropagation()});C.bind("click",function(a){a.stopPropagation()});G=!0;ob="dropdown";var a=e[0].getBoundingClientRect(),b=angular.element(h)[0].pageXOffset,c=angular.element(h)[0].pageYOffset,k=f(function(){var g=m.getPadding(e[0]);g=parseInt(getComputedStyle(e[0]).width,10)+(g.left+g.right);var n=m.getPadding(C[0]);g-=n.left+n.right;n=parseInt(getComputedStyle(C[0]).width,10);g<n&&(g=n);n=a.right-(g+3)+b;C.css("top",a.bottom+c+"px");C.css("left",n+"px");C.css("width",g+"px");p.$apply();
f.cancel(k)},1);f.cancel(g)},1)};a.closeActiveEditor=function(e,b){G=!1;pb();C&&C.remove();ob=J=null;b||a.callAfterEdit(e)};var pb=function(){C&&C.unbind("click keydown keypress keyup mousedown mouseup")},b=function(a,b){a&&(Ha.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(Ha),Ha.css("left",a[0].offsetLeft+a[0].offsetWidth-Ha[0].offsetWidth-2+"px"),Ha.css("top",a[0].offsetTop+(a[0].offsetHeight-Ha[0].offsetHeight)/2+"px"))},d=function(){Ha&&("dropdown"!=ob||"dropdown"==ob&&!G)&&(Ha.removeAttr("class"),
Ha.remove())},r=null,t=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),yc=function(a,b){!a||Bb&&!b||(a.append(t),t.css("top",a[0].offsetTop+"px"),t.css("left",a[0].offsetLeft+a[0].offsetWidth-t[0].offsetWidth+"px"),t.css("height",getComputedStyle(a[0]).height))},Na=function(a){!t||Bb&&!a||t.remove()};a.getCellType=function(b,c){var e=null,g="label";b&&(e=a.getColumnById(b[a.options.cellFields.cid]));!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);e&&(g=e[a.options.columnFields.editorType]);
return g};var Ab=m.getBodyElem(q[0]),cc=m.getUniqueId(4),ua=null,Bb=!1,fc=0,af=function(b,g,k){if(Ab&&b.items&&0<b.items.length){b=m.getUniqueId(4);var e=c('<iui-list name="'+b+'" style="position:absolute;top:-99px;height:100px" items="data[0]['+g+"].column."+a.options.columnFields.editorSettings+'.items"></iui-list>')(A);angular.element(Ab).append(e);ta.updateLayout(b);var z=f(function(){if(0<e.children().length){var a=e.children().eq(0);0<a.children().length&&(fc=angular.element(a.children().eq(0))[0].offsetHeight,
k&&(k.avgItemHeight=fc))}e.remove();f.cancel(z)},1)}},Db=null,Eb=function(b,g,k,n){var e=a.getCell(k,n);if(e!=r&&(r=e,ua&&ua.remove(),Db&&Db.$destroy(),Ab)){Db=p.$new();Db.data=a.columnList[n];J=e;var d='<iui-list name="'+cc+'" style="position:absolute;"';d+=' items="data.'+a.options.columnFields.editorSettings+'.items"';d+=' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"';d+=' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"';d+=' checkbox-settings="data.'+
a.options.columnFields.editorSettings+'.checkBoxSettings"';d+=' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"';ua=c(d+(' nav-selection="false" before-select="onCellValueChanging(e, '+k+", "+n+')" after-select="onCellValueChanged(e, '+k+", "+n+')"></iui-list>'))(Db);fc=0;Nb&&n<Nb.length&&(fc=Nb[n].avgItemHeight);var eb=f(function(){angular.element(Ab).append(ua);var c=b[0].getBoundingClientRect(),k=angular.element(h)[0].pageXOffset,n=angular.element(h)[0].pageYOffset;
n=c.bottom+n-1;c=c.left+k;k=b.children().eq(0);var z=m.getPadding(k[0]);k=parseInt(getComputedStyle(k[0]).width,10)+(z.left+z.right);z=m.getPadding(ua[0]);k-=z.left+z.right;void 0!=g.dropDownWidth&&k<g.dropDownWidth&&(k=g.dropDownWidth);z=void 0!=g.dropDownHeight?g.dropDownHeight:100;void 0!=g.maxDropDownItems&&(z=fc*g.maxDropDownItems);ua.css("top",n+"px");ua.css("left",c+"px");ua.css("width",k+"px");ua.css("height",z+"px");ua.css("z-index","999");e&&e[a.options.cellFields.value]&&ta.selectedItem(cc,
e[a.options.cellFields.value]);ta.updateLayout(cc);var d=f(function(){if(e&&e[a.options.cellFields.value]){ta.ensureVisible(cc,e[a.options.cellFields.value]);var b=f(function(){ta.focus(cc,e[a.options.cellFields.value]);f.cancel(b)},1)}f.cancel(d)},10);t&&(Na(!0),yc(b,!0));Bb=!0;bf();f.cancel(eb)},1)}};a.removeDropDownList=function(a){ua&&(r=null,ua.remove(),Bb=!1,a||Na(),ua.unbind("keydown"));Db&&Db.$destroy();J=null};var bf=function(){ua.bind("keydown",function(b){switch(b.keyCode){case 27:a.removeDropDownList(),
Na()}})},ec=function(b,c,k){a.options.labelEdit&&(void 0===k&&(k=500),Ca=f(function(){if(Ca)var a=f(function(){zc(b,c,!0);f.cancel(a)},k);f.cancel(Ca)},k/3))},gc=function(){Ca&&(f.cancel(Ca),Ca=null)},Ob=null,Pb=null,zc=function(b,c,k){if(a.dragDropStatus())h=I[0].value,a.labelEditStatus(!1),I.unbind("blur focus keydown mousedown"),I.remove(),Pb=Ob=null;else{var e=a.getRowFromChildElem(c);if(e){var g=a.getRowCurrentIndex(e),d=a.getIndexFromElem(c),eb=a.getCellObject(g,d),h="";h=c.children().eq(0);
if(eb)if(k){if(0!=a.callBeforeLabelEdit(eb)){Ob=e;Pb=eb;a.labelEditStatus(!0);I.unbind("blur focus keydown mousedown");b=parseInt(getComputedStyle(c[0]).width,10)-4;k=parseInt(getComputedStyle(c[0]).height,10)-3;I.css("top",c[0].offsetTop+"px");I.css("left",c[0].offsetLeft+"px");I.css("width",b+"px");I.css("height",k+"px");h.append(I);I[0].value=eb[a.options.cellFields.text];I.bind("keydown",function(b){switch(b.keyCode){case 13:eb[a.options.cellFields.text]=I[0].value?I[0].value:"null";zc(b,c,!1);
break;case 27:zc(b,c,!1)}b.stopPropagation()});I.bind("focus",function(b){var e=angular.element(this);a.callGotFocus(b,Ob,Pb,!0,e[0].value)});I.bind("blur",function(a){zc(a)});I.bind("mousedown",function(a){a.stopPropagation()});var m=f(function(){I[0].focus();I[0].select();f.cancel(m)},10)}}else h=I[0].value,a.labelEditStatus(!1),I.unbind("blur focus keydown"),I.remove(),a.updateView(),a.updateFocus(g,d),a.callAfterLabelEdit(eb),a.callLostFocus(b,e,eb,!0,h),Pb=Ob=null}else h=I[0].value,a.labelEditStatus(!1),
I.unbind("blur focus keydown mousedown"),I.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(b,Ob,Pb,!0,h),Pb=Ob=null}},Td=function(b){var e="",c=a.defaultStyle.row.expandBox.general;b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&b[a.options.rowFields.style].expandBox.general!=c?c+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=c&&(c+=" "+a.options.controlStyle.row.expandBox.general);var n=a.getCurrentRowStyle(b);
n=a.getExpandBoxStyle(n.expandBox);if(a.isThereChildRows||b&&b[a.options.rowFields.hasChildren])e=c;c=b[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(b)||!b[a.options.rowFields.rows]||b[a.options.rowFields.rows]&&0==b[a.options.rowFields.rows].length);b&&!a.isRowFixed(b)&&(c||a.isThereVisibleChildren(b))&&(e=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?e+(" "+n.expanded):!1!==b[a.options.rowFields.expanded]?e+(" "+n.collapsed):e+(" "+n.expanded),!0===
a.options.rtl&&(e+="-rtl"),a.options.enabled&&a.isRowEnabled(b)||(e+="-disabled"));return e};q.bind("mousemove",function(b){if(a.options.enabled&&0===b.button&&Y&&y){var e=a.getMousePos(b),c=e.y+16;e=e.x+20;ha.empty();ha.append("<span>"+y[a.options.columnFields.headerText]+"</span>");ha.css("top",c+"px");ha.css("left",e+"px");ha.css("display","block");Ud();b.stopPropagation()}});var Xd=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var k=0;k<c.length;k++){var n=angular.element(c[k]);
Vd(n);n=n.find("td");for(var z=0;z<n.length;z++){var d=angular.element(n[z]),f=a.getElement(d,"expandbox");f&&f.unbind("click touchend");Wd(d)}}b++;c=1==b?"left":"right"}},Sd=function(){pb();for(var b=0,c="none";3>b;){var k=a.getRowElems(c);if(k&&0<k.length)for(var n=0;n<k.length;n++){var z=angular.element(k[n]);Vd(z);z=z.find("td");for(var d=0;d<z.length;d++){var f=angular.element(z[d]),h=a.getElement(f,"expandbox");h&&h.unbind("click touchend");Wd(f)}}k=c;for(n=0;2>n;){rowFixed=0==n?"top":"bottom";
if((z=a.getRowElems(k,rowFixed))&&0<z.length)for(d=0;d<z.length;d++)for((f=angular.element(z[d]))&&f.unbind("mousedown mouseenter mouseleave"),f=f.find("td"),h=0;h<f.length;h++){var m=angular.element(f[h]);m&&m.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}n++}if((k=a.getHeaderElem(c))&&0<k.length)for(n=0;n<k.length;n++)for(z=angular.element(k[n]),z=z.find("td"),d=0;d<z.length;d++)(f=angular.element(z[d]))&&(c=a.getChildElement(f,"column-header-cell"))&&(c=a.getContentElement(c,
"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},hf=function(){Xd();for(var b=0,c="none";3>b;){var k=a.getRowElems(c);if(k&&0<k.length)for(var n,z=k.length-1,d=0;d<=z;d++){n=angular.element(k[d]);cf(n);for(var f=n.find("td"),h=0;h<f.length;h++){var m=angular.element(f[h]);df(a.getElement(m,"expandbox"));ef(m,a.getRowFromElem(n),h)}}for(k=0;2>k;){rowFixed=0==k?"top":"bottom";if((n=a.getRowElems(c,rowFixed))&&0<n.length)for(d=0;d<n.length;d++)for(z=angular.element(n[d]),ff(z),f=
z.find("td"),h=0;h<f.length;h++)m=angular.element(f[h]),gf(m,a.getRowFromElem(z),h);k++}b++;c=1==b?"left":"right"}},Y=!1,y=null,qb=-1,Ac=function(b,c){if(b){var e=a.getColumnWidthFromData(b);return a.isColumnWithFixedWidth(b)||10<c.x&&c.x<e-10}return!1},Yd=function(a,b){var e=parseInt(getComputedStyle(a[0]).height,10),c=parseInt(getComputedStyle(wa[0]).height,10),g=m.getPadding(a[0]);wa.css("top",(e+g.top+g.bottom-c)/2+"px");1==b?(wa.css("left","0"),wa.css("right","auto")):(wa.css("left","auto"),
wa.css("right","0"))},Yc=function(b){b=b.find("td");for(var e=0;e<b.length;e++)currentElem=angular.element(b[e]),currentElem.bind("click",function(b){if(a.options.enabled&&1===b.which){var e=m.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&Ac(c,e)&&a.callColumnClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var e=m.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&Ac(c,e)&&a.callColumnDblClick(c,
a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("contextmenu",function(b){var e=a.getColumnFromElem(this);e&&(Oa=e,e[a.options.columnFields.contextMenu]&&0<e[a.options.columnFields.contextMenu].length&&b.preventDefault(),Zd(b,e),b.stopPropagation())}),currentElem.bind("mouseenter",function(b){var e=angular.element(this);if(!(e&&e[0].attributes["data-element"]&&"column-expand-cell"==e[0].attributes["data-element"].value.toString()||!a.options.enabled||Z||na)){var c=a.getColumnFromElem(this);
c&&(a.hoverColumn=c,a.refresh(c),a.callColumnHover(c));1===b.which&&Y&&y&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&wa&&(wa.remove(),a.hoverColumn!=y&&(e.append(wa),Yd(e)))}}),currentElem.bind("mouseleave",function(b){b=angular.element(this);b&&b[0].attributes["data-element"]&&"column-expand-cell"==b[0].attributes["data-element"].value.toString()||!a.options.enabled||Z||na||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),wa&&wa.remove(),Z||q.css("cursor","default"))}),
currentElem.bind("mousemove",function(b){var e=angular.element(this);if((!e||!e[0].attributes["data-element"]||"column-expand-cell"!=e[0].attributes["data-element"].value.toString())&&a.options.enabled)if(e=angular.element(this),1===b.which&&Y&&y&&a.hoverColumn&&a.hoverColumn!=y&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&y[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){var c=parseInt(getComputedStyle(e[0]).width,10),g=a.getColumnCompleteIndex(y),k=a.getColumnCompleteIndex(a.hoverColumn);
wa.empty();qb=-1;y[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&g.level==k.level&&(b.offsetX>c/2?(qb=2,wa.append('<span class="iui-grid-column-reorder-mark-right"></span>')):(qb=1,wa.append('<span class="iui-grid-column-reorder-mark-left"></span>')),Yd(e,qb))}else if(e=a.getColumnFromChildElem(this))b=m.getClientMousePos(b,this),c=a.getColumnWidthFromData(e),g=10,a.isFilteringAllowed(e)&&(g=0),10>b.x&&!a.isColumnWithFixedWidth(e)&&$d(e,"left")?(q.css("cursor","ew-resize"),
Va="left"):b.x>c-g&&!a.isColumnWithFixedWidth(e)&&$d(e,"right")?(q.css("cursor","ew-resize"),Va="right"):Z||(q.css("cursor","default"),Va="none")}),currentElem.bind("mouseup",function(b){var e=angular.element(this);if((!e||!e[0].attributes["data-element"]||"column-expand-cell"!=e[0].attributes["data-element"].value.toString())&&a.options.enabled){if(1===b.which)if(Y&&y&&a.hoverColumn&&a.hoverColumn!=y&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&y[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){if(0!=
a.callColumnPosChanging(y,a.hoverColumn)&&(b=a.getColumnCompleteIndex(y),e=a.getColumnCompleteIndex(a.hoverColumn),y[a.options.columnFields.pid]==a.hoverColumn[a.options.columnFields.pid]&&b.level==e.level)){b=a.columnsObj.getParent(y);b=a.columnsObj.getList(b);e=b.indexOf(y);var c=b.indexOf(a.hoverColumn);if(0<=e&&0<=c){var g=c;e<c?1==qb&&g--:e>c&&2==qb&&g++;a.moveObject(e,g,b);a.updateLayout();a.callColumnPosChanged(y,a.hoverColumn)}}}else e=a.getColumnFromChildElem(this),a.updateColumnSelection(e,
b);y=null;qb=-1;Z=Y=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",function(b){var e=angular.element(this);if(e&&e[0].attributes["data-element"]&&"column-expand-cell"==e[0].attributes["data-element"].value.toString()){if(1==b.which&&(e=a.getColumnFromChildElem(this))&&a.isColumnRelated(e)&&(e=a.getColumnRelatedObject(e))&&e.children){e.expanded=!(void 0!=e.expanded?e.expanded:0!=e.expanded);for(var c=0;c<e.children.length;c++)e.children[c].column[a.options.columnFields.visible]=e.expanded;
a.updateLayout()}}else if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(),e=a.getColumnFromChildElem(this))){m.getClientMousePos(b,this);var g=e;if(0===b.button&&!Z){c=g;var k=g[a.options.columnFields.fixed];switch(Va){case "left":"right"==k?c=g:(g=Bc(g,k))?(c=g,g[a.options.columnFields.fixed]!=k?(c=null,Z=!1):Z=!0):Z=!1;c&&(Z=!0);break;case "right":"right"==k?(g=Cc(g,k))?(c=g,g[a.options.columnFields.fixed]!=k?(c=null,Z=!1):Z=!0):Z=!1:(c=g,Z=!0)}!a.isColumnWithFixedWidth(c)&&
Z?a.setColumnResizingParams(c,Va,a.getMousePos(b).x):Z=!1}if(!Z)switch(c=m.getClientMousePos(b,this),Ac(e,c)&&a.columnSelection(e,b),b.which){case 1:a.options.allowColumnReorder&&0!=e[a.options.columnFields.allowDrag]&&0==Y&&0!=e[a.options.columnFields.allowGrouping]&&(y=e,a.getMousePos(b),Y=!0,(e=m.getBodyElem(q[0]))&&angular.element(e).append(ha));break;case 3:Ac(e,c)&&a.callColumnRightClick(e,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&
(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&jf(this);a.stopPropagation()})}(currentElem)},Ia=null,jf=function(b){a.closeFilterWindow();var e=a.getColumnFromChildElem(b);if(e){var k=angular.element(b),n=k.parent().parent();if(Ab){b='<div ng-include="'+e[a.options.columnFields.filterTemplate]+'"></div>';Ia=angular.element('<div class="iui-filter-window"></div>');Ia.append(c(b)(p.$parent));var z=f(function(){angular.element(Ab).append(Ia);Ia.bind("mousedown",
function(a){a.stopPropagation()});k[0].getBoundingClientRect();var b=n[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,d=f(function(){var k=b.bottom+g,n=b.right-(parseInt(getComputedStyle(Ia[0]).width,10)+3)+c;e[a.options.columnFields.filterParams]&&"left"==e[a.options.columnFields.filterParams].templateAlignment&&(n=b.left+c);Ia.css("top",k+"px");Ia.css("left",n+"px");f.cancel(d)},1);f.cancel(z)},1)}}};a.closeFilterWindow=function(){Ia&&(Ia.unbind("mousedown"),
Ia.remove())};var Vd=function(a){a&&a.unbind("click contextmenu blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},cf=function(b){b&&(b.bind("click",function(a){a.preventDefault();Fb()}),b.bind("contextmenu",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&(Oa=e,e[a.options.rowFields.contextMenu]&&0<e[a.options.rowFields.contextMenu].length&&b.preventDefault(),Zd(b,e),b.stopPropagation())}),b.bind("dragover",function(b){var e=a.getRowFromElem(this);
if(e&&a.isRowEnabled(e)){if(a.isScrollBarVisible("vertical")){e=a.getMousePos(b);var c=q[0].getBoundingClientRect();e.x-=angular.element(h)[0].pageXOffset;e.y-=angular.element(h)[0].pageYOffset;var g=c.top+D+25;c=c.bottom-N-25;O&&E&&(c-=E[0].offsetHeight);e.y<g?Dc(!1):e.y>c?Dc(!0):Qb()}else Qb();b.stopPropagation()}}),b.bind("dragend",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),B.getData().source||B.clearData())}),b.bind("mouseenter",
function(b){if(!na){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!Y&&(a.hoverRow=e,a.refresh(e),a.callRowHover(b,e),a.options.hoverSelection&&(nb=f(function(){nb&&a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0)},500)))}}),b.bind("mouseleave",function(b){na||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),nb&&(f.cancel(nb),nb=null))}),b.bind("keydown",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){var c=!0;a.callKeyDown(b,e);var g=
a.getRowCurrentIndex(e);switch(b.keyCode){case 9:ae(b,e,g);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:be(b,g);break;case 34:ce(b,g);break;case 35:de(b,g);break;case 36:ee(b,g);break;case 37:fe(b,e,g);break;case 32:ge(b,e);break;case 38:Zc(b,g);break;case 39:he(b,e,g);break;case 40:$c(b,g);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),
b.bind("keyup",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,e)}}),b.bind("keypress",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callKeyPress(b,e)}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var e=
a.getRowFromElem(this);e&&a.isRowEnabled(e)?a.callGotFocus(b,e):a.updateFocus()}),b.bind("blur",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callLostFocus(b,e)}))},df=function(b){b&&(b.bind("click",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),
a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}))},Ec={x:0,y:0},Rb={x:0,y:0},Sb=!1,ad=!1,fb=null,ie=function(){return{x:angular.element(h)[0].pageXOffset,y:angular.element(h)[0].pageYOffset}},Tb=function(a){var b=ie();return{x:a.x-b.x,y:a.y-b.y}},ef=function(e,c,k){e&&(e.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();B.clearData();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e))if(gc(),
a.isDragAllowed(e)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():""));b={source:e,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=
a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}B.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),e.bind("dragover",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();var g=!0;b.dataTransfer?g="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&
(g="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(g&&(e=a.getRowFromChildElem(c))){g=c[0].getBoundingClientRect();var k=angular.element(h)[0].pageXOffset,n=angular.element(h)[0].pageYOffset,d=a.getMousePos(b);d.x-=g.left+k;d.y-=g.top+n;c=B.getDropPos(d,{x:0,y:0,width:c[0].offsetWidth,height:c[0].offsetHeight},!0);k=B.getData();g=a.isDropAllowed(k.source,e,c);n={event:b,sourceCtrl:k.sourceCtrl?k.sourceCtrl.getGridName():"",dragRow:k.source,targetCtrl:a.getGridName(),targetRow:e,isDropAllowed:g,
dropPos:c,mousePos:a.getMousePos(b)};n=a.callDragOver(n);if(g&&!1!==n){n=a.getMousePos(b);b=n.y+16;n=n.x+20;d=a.getDropMarkWindow();d.empty();var f="";switch(c){case 1:f="iui-drop-marker-move-up";break;case 2:f="iui-drop-marker-move-down"}d.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+e[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:n});a.dropMark(g);B.setData({source:k.source,sourceList:k.sourceList,target:e,dropPos:c})}else b.dataTransfer?
b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),e.bind("drop",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();Mb();a.dropMark();e=!0;b.dataTransfer?e="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(e="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(e){var g=a.getRowFromChildElem(c);
if(g){c=B.getData();var k=c.source;k||(k=a.getDnDSource(b));if(e=a.isDropAllowed(k,g,c.dropPos))a.toggle(g,!0),k&&(e={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:k,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:e,dropPos:c.dropPos,mousePos:a.getMousePos(b)},!1!==a.callDragDrop(e)&&(a.drop(c),p.$$phase||p.$apply()))}}B.clearData();b.stopPropagation()}}),e.bind("dragenter",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){b.preventDefault();if(a.options.autoExpand)var c=
f(function(){Ua||(Ua=f(function(){Ua&&a.toggle(e,!0)},750));f.cancel(c)},1);var g=B.getData();g.source||(g.source=a.getDnDSource(b));g={event:b,sourceCtrl:g.sourceCtrl?g.sourceCtrl.getGridName():"",dragRow:g.source,targetCtrl:a.getGridName(),targetRow:g.target,mousePos:a.getMousePos(b)};a.callDragEnter(g);b.stopPropagation()}}),e.bind("dragleave",function(b){a.hoverRow=null;var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(b.preventDefault(),Mb(),e=B.getData(),e.source||(e.source=a.getDnDSource(b)),
e={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:e.target,mousePos:a.getMousePos(b)},a.callDragLeave(e),b.stopPropagation())}),e.bind("touchstart",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(b.preventDefault(),(e=a.getTouchData(b))&&0<e.length)){ad=!0;var c=f(function(){ad=!1;f.cancel(c)},750);Ec=Tb({x:e[0].pageX,y:e[0].pageY});a.closeFilterWindow();e=Ec;if((e=a.getRowAt(e.x,e.y))&&a.isRowEnabled(e)){var g=
angular.element(this);a.mouseButtonStatus(!0);fb=e;var k=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),d=a.getCell(k,n),h=a.getCellType(d,n),m=null,l=a.options.editorSettings;g[0].focus();a.updateFocus(k,n);d&&(m=a.getColumnById(d[a.options.cellFields.cid]));!m&&0<=n&&n<a.columnList.length&&(m=a.columnList[n]);var p="click"==a.options.editorSettings.activate;m&&m[a.options.columnFields.editorSettings]&&(l=m[a.options.columnFields.editorSettings],p=void 0!=l.activate?"click"==l.activate:
p);d&&d!=J?a.closeEditor(J):a.closeEditor();switch(h){case "checkbox":break;case "combobox":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);d&&0!=d[a.options.cellFields.allowEdit]&&m&&p?Eb(angular.element(this),l,k,n):a.removeDropDownList();break;case "incell":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);!G&&d&&0!=d[a.options.cellFields.allowEdit]&&p&&a.openInCellEditor(g,d,m);break;case "dropdown":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);!G&&d&&0!=
d[a.options.cellFields.allowEdit]&&p&&a.openDropDownEditor(g,d,m);break;default:a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0),a.removeDropDownList(),d&&0!=d[a.options.cellFields.allowEdit]&&p&&ec(b,angular.element(this))}}}}),e.bind("touchmove",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(e=a.getTouchData(b))&&0<e.length){Rb=Tb({x:e[0].pageX,y:e[0].pageY});e=Math.abs(Rb.x-Ec.x);var c=Math.abs(Rb.y-Ec.y),g=q[0].getBoundingClientRect();if(B.hitTest(Rb.x,Rb.y,
g)){if(b.preventDefault(),M&&M.css("display","block"),!ad)if(!Sb&&(2<e||2<c)&&fb&&a.isRowEnabled(fb))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{Sb=!0;B.clearData();if((e=a.getTouchData(b))&&0<e.length&&(Tb({x:e[0].pageX,y:e[0].pageY}),fb&&a.isRowEnabled(fb)&&(gc(),a.isDragAllowed(fb)))){a.dragDropStatus(!0);a.addDropMark();e={source:fb,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":e.source=a.options.selectedRows;break;case "multi-extended":e.source=
a.options.selectedRows}B.setData(e);if(e=a.getCellElemFromRow(fb))if(e=a.getContentElement(e))M.empty(),M.append(e.clone()),M.css("display","none"),q.append(M)}b.stopPropagation()}else if(Sb&&(angular.element(this),b.preventDefault(),(c=a.getTouchData(b))&&0<c.length)){e=ie();var k=Tb({x:c[0].pageX,y:c[0].pageY});if(c=a.getRowAt(k.x,k.y)){var n=a.getCellElemFromRow(c);if(n){g=n[0].getBoundingClientRect();n=B.getDropPos({x:k.x-g.left,y:k.y-g.top},{x:0,y:0,width:n[0].offsetWidth,height:n[0].offsetHeight},
!0);g=B.getData();var d=a.isDropAllowed(g.source,c,n);b={event:b,sourceCtrl:g.sourceCtrl?g.sourceCtrl.getGridName():"",dragRow:g.source,targetCtrl:a.getGridName(),targetRow:c,isDropAllowed:d,dropPos:n,mousePos:k};var f=q[0].getBoundingClientRect();var h=k.x-f.left;f=k.y-f.top;M.css("top",f-16+"px");M.css("left",h+"px");M.css("display","block");b=a.callDragOver(b);if(d&&0!=b){b=k.y+e.y+16;e=k.x+e.x+20;k=a.getDropMarkWindow();k.empty();h="iui-drop-marker-move-in";switch(n){case 1:h="iui-drop-marker-move-up";
break;case 2:h="iui-drop-marker-move-down"}k.append("<span class='"+h+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:e});a.dropMark(d);B.setData({source:g.source,sourceList:g.sourceList,target:c,dropPos:n})}else a.dropMark(),M&&M.css("display","none")}}else g=q[0].getBoundingClientRect(),c=g.top+D,g=g.bottom-N,O&&E&&(g-=E[0].offsetHeight),!a.options.allowDrop||k.y<c||k.y>g?(a.dropMark(),M&&M.css("display",
"none")):(f=q[0].getBoundingClientRect(),h=k.x-f.left,f=k.y-f.top,M.css("top",f-16+"px"),M.css("left",h+"px"),M.css("display","block"),c=B.getData(),g={source:c.source,sourceCtrl:c.sourceCtrl,target:null,dropPos:-1},B.setData(g),b={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:k},b=a.callDragOver(b),0==b?a.dropMark():(b=k.y+e.y+16,e=k.x+e.x+20,k=a.getDropMarkWindow(),k.empty(),
k.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(p.name?p.name:"Grid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:e}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),M&&M.css("display","none")}}),e.bind("touchend",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if((e=a.getTouchData(b))&&0<e.length){e=Tb({x:e[0].pageX,y:e[0].pageY});var c=q[0].getBoundingClientRect();if(B.hitTest(e.x,
e.y,c))if(Sb){angular.element(this);b.preventDefault();Mb();a.dropMark();dc();if((e=a.getTouchData(b))&&0<e.length){e=Tb({x:e[0].pageX,y:e[0].pageY});var g=a.getRowAt(e.x,e.y);if(g){c=B.getData();var k=c.source,n=a.isDropAllowed(k,g,c.dropPos);n&&(a.toggle(g,!0),k&&(e={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:k,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:n,dropPos:c.dropPos,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),p.$$phase||p.$apply())))}else a.dropMark(),
g=q[0].getBoundingClientRect(),c=g.top+D,g=g.bottom-N,O&&E&&(g-=E[0].offsetHeight),e.y>=c&&e.y<=g&&(c=B.getData(),c.source&&(e={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),p.$$phase||p.$apply())))}B.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(e=a.getRowFromChildElem(this))&&a.isRowEnabled(e)&&
a.updateSelection(b,e,b.shiftKey),gc()}e=Sb;a.removeDropMark();dc();Rb={x:0,y:0};Sb=!1;fb=null;e&&b.stopPropagation()}}),e.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();if(1===b.which){var g=a.getRowCurrentIndex(e),k=parseInt(a.getIndexFromElem(this),10),n=a.getCell(g,k),d=a.getCellType(n,k),f=null,h=a.options.editorSettings;n&&(f=a.getColumnById(n[a.options.cellFields.cid]));!f&&0<=k&&k<a.columnList.length&&(f=
a.columnList[k]);var m="dblclick"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(h=f[a.options.columnFields.editorSettings],m=void 0!=h.activate?"dblclick"==h.activate:m);switch(d){case "checkbox":break;case "combobox":n&&0!=n[a.options.cellFields.allowEdit]&&f&&m?Eb(angular.element(this),h,g,k):a.removeDropDownList();break;case "incell":!G&&n&&0!=n[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(c,n,f);break;case "dropdown":!G&&n&&0!=n[a.options.cellFields.allowEdit]&&
m&&a.openDropDownEditor(c,n,f);break;default:a.removeDropDownList(),n&&0!=n[a.options.cellFields.allowEdit]&&m&&ec(b,angular.element(this),0)}0!=a.callCellDblClick(e,n,a.getMousePos(b))&&"checkbox"!=d&&0!=a.callRowDblClick(e,a.getMousePos(b))&&n&&!m&&(a.toggle(e),a.updateFocus(g,k))}b.stopPropagation()}}),e.bind("mouseenter",function(e){if(!na){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!Y){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,k))if(a.hoverCell=
g,a.refresh(c),a.callCellHover(e,g),e=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(k=a.getCellType(g,k),k){case "combobox":Bb||yc(e);break;case "incell":G&&g==J||b(e,k);break;case "dropdown":G&&g!=J||b(e,k);break;default:Na(),d()}else Na()}}}),e.bind("mouseleave",function(b){if(!na&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var e=parseInt(a.getIndexFromElem(this),10);a.getCell(b,e)&&(Na(),d())}}),e.bind("keydown",function(b){var e=
a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=!0,g=angular.element(this);a.callKeyDown(b,e);var k=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),d=a.getCell(k,n),f=a.getCellType(d,n),h=a.getColumnById(d[a.options.cellFields.cid]);!h&&0<=n&&n<a.columnList.length&&(h=a.columnList[n]);switch(b.keyCode){case 9:ae(b,e,k,n);break;case 13:switch(f){case "checkbox":je(d,n);break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]?h&&Eb(angular.element(this),h[a.options.columnFields.editorSettings],
k,n):a.removeDropDownList();break;case "incell":!G&&d&&0!=d[a.options.cellFields.allowEdit]&&a.openInCellEditor(g,d,h);break;case "dropdown":!G&&d&&0!=d[a.options.cellFields.allowEdit]&&a.openDropDownEditor(g,d,h);break;default:d&&0!=d[a.options.cellFields.allowEdit]&&ec(b,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:be(b,k,n);break;case 34:ce(b,k,n);break;case 35:de(b,k,n);break;case 36:ee(b,
k,n);break;case 37:fe(b,e,k,n);break;case 32:ge(b,e,d,n);break;case 38:Zc(b,k,n);break;case 39:he(b,e,k,n);break;case 40:$c(b,k,n);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),e.bind("keyup",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||
a.multiSelection(!1)}a.callKeyUp(b,e);b.stopPropagation()}}),e.bind("keypress",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.callKeyPress(b,e),b.stopPropagation())}),e.bind("click",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),g=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,g);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mousedown",function(b){a.closeFilterWindow();
var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:var g=a.getRowCurrentIndex(e),k=parseInt(a.getIndexFromElem(this),10),n=a.getCell(g,k),d=a.getCellType(n,k),f=null,h=a.options.editorSettings;n&&(f=a.getColumnById(n[a.options.cellFields.cid]));!f&&0<=k&&k<a.columnList.length&&(f=a.columnList[k]);var m="click"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(h=f[a.options.columnFields.editorSettings],
m=void 0!=h.activate?"click"==h.activate:m);n&&n!=J?a.closeEditor(J):a.closeEditor();switch(d){case "checkbox":break;case "combobox":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);n&&0!=n[a.options.cellFields.allowEdit]&&f&&m?Eb(angular.element(this),h,g,k):a.removeDropDownList();break;case "dropdown":a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0);!G&&n&&0!=n[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(c,n,f);break;case "incell":a.rowSelection(e,b.shiftKey,
b.ctrlKey,b.metaKey,null,void 0);!G&&n&&0!=n[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(c,n,f);break;default:if("image"==d?0!=h.allowSelection:1)a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,void 0),a.removeDropDownList(),n&&0!=n[a.options.cellFields.allowEdit]&&m&&ec(b,angular.element(this))}break;case 3:a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey,null,!0),a.callRowRightClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==
b.which){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),g=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,g);var k=a.getCellType(c,g),n=null,d=a.options.editorSettings;c&&(n=a.getColumnById(c[a.options.cellFields.cid]));!n&&0<=g&&g<a.columnList.length&&(n=a.columnList[g]);n&&n[a.options.columnFields.editorSettings]&&(d=n[a.options.columnFields.editorSettings]);("image"==k?0!=d.allowSelection:1)&&a.updateSelection(b,e,b.shiftKey)}gc()}}),e.bind("focus",
function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);g=a.getCell(g,k);a.callGotFocus(e,c,g);if(g&&0!=g[a.options.cellFields.allowEdit])switch(e=angular.element(this),k=a.getCellType(g,k),k){case "combobox":Bb||yc(e);break;case "incell":G||b(e,k);break;case "dropdown":G||b(e,k);break;default:Na()}else Na()}}),e.bind("blur",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),
g=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,g);a.callLostFocus(b,e,c)}}))},Wd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},ff=function(b){b&&(b.bind("mouseenter",function(b){if(!na){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!Y&&(a.hoverRow=e,a.refreshHover(e),a.callRowHover(b,e))}}),b.bind("mouseleave",function(b){na||(a.hoverRow=
null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},gf=function(e,c,k){e&&(e.bind("touchstart",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){b.preventDefault();a.closeFilterWindow();b=angular.element(this);e=a.getRowCurrentIndex(e);var c=parseInt(a.getIndexFromElem(this),10),g=a.getCell(e,c),k=a.getCellType(g,c),n=null,d=a.options.editorSettings;b[0].focus();
g&&(n=a.getColumnById(g[a.options.cellFields.cid]));!n&&0<=c&&c<a.columnList.length&&(n=a.columnList[c]);var f="click"==a.options.editorSettings.activate;n&&n[a.options.columnFields.editorSettings]&&(d=n[a.options.columnFields.editorSettings],f=void 0!=d.activate?"click"==d.activate:f);g&&g!=J?a.closeEditor(J):a.closeEditor();switch(k){case "checkbox":break;case "combobox":g&&0!=g[a.options.cellFields.allowEdit]&&n&&f?Eb(angular.element(this),d,e,c):a.removeDropDownList();break;case "incell":!G&&
g&&0!=g[a.options.cellFields.allowEdit]&&f&&a.openInCellEditor(b,g,n);break;case "dropdown":!G&&g&&0!=g[a.options.cellFields.allowEdit]&&f&&a.openDropDownEditor(b,g,n);break;default:a.removeDropDownList()}}}),e.bind("mouseenter",function(e){if(!na){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!Y){var g=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,k))if(a.hoverCell=g,a.refreshHover(c),a.callCellHover(e,g),e=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(k=
a.getCellType(g,k),k){case "combobox":Bb||yc(e);break;case "incell":G&&g==J||b(e,k);break;case "dropdown":G&&g!=J||b(e,k);break;default:Na(),d()}else Na()}}}),e.bind("mouseleave",function(b){if(!na&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var e=parseInt(a.getIndexFromElem(this),10);a.getCell(b,e)&&(Na(),d())}}),e.bind("click",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),
g=parseInt(a.getIndexFromElem(this),10);c=a.getCell(c,g);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();if(1===b.which){var g=a.getRowCurrentIndex(e),k=parseInt(a.getIndexFromElem(this),10),n=a.getCell(g,k),d=a.getCellType(n,k),f=null,h=a.options.editorSettings;n&&(f=a.getColumnById(n[a.options.cellFields.cid]));
!f&&0<=k&&k<a.columnList.length&&(f=a.columnList[k]);var m="dblclick"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(h=f[a.options.columnFields.editorSettings],m=void 0!=h.activate?"dblclick"==h.activate:m);switch(d){case "checkbox":break;case "combobox":n&&0!=n[a.options.cellFields.allowEdit]&&f&&m?Eb(angular.element(this),h,g,k):a.removeDropDownList();break;case "incell":!G&&n&&0!=n[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(c,n,f);break;case "dropdown":!G&&
n&&0!=n[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(c,n,f);break;default:a.removeDropDownList()}a.callCellDblClick(e,n,a.getMousePos(b));a.callRowDblClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mousedown",function(b){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);a.mouseButtonStatus(!0);switch(b.which){case 1:e=a.getRowCurrentIndex(e);var g=parseInt(a.getIndexFromElem(this),10),k=a.getCell(e,g),n=a.getCellType(k,
g),d=null,f=a.options.editorSettings;k&&(d=a.getColumnById(k[a.options.cellFields.cid]));!d&&0<=g&&g<a.columnList.length&&(d=a.columnList[g]);var h="click"==a.options.editorSettings.activate;d&&d[a.options.columnFields.editorSettings]&&(f=d[a.options.columnFields.editorSettings],h=void 0!=f.activate?"click"==f.activate:h);k&&k!=J?a.closeEditor(J):a.closeEditor();switch(n){case "checkbox":break;case "combobox":k&&0!=k[a.options.cellFields.allowEdit]&&d&&h?Eb(angular.element(this),f,e,g):a.removeDropDownList();
break;case "dropdown":!G&&k&&0!=k[a.options.cellFields.allowEdit]&&h&&a.openDropDownEditor(c,k,d);break;case "incell":!G&&k&&0!=k[a.options.cellFields.allowEdit]&&h&&a.openInCellEditor(c,k,d);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mouseup",function(a){1==a.which&&gc()}))};a.getTopRow=function(){return a.isRowIndexInRange(w-1)?a.currentList[w]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return Ja;
case "right":return oa}return Wa};a.getHeaderElem=function(a){switch(a){case "left":return pa;case "right":return aa}return xa};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return ya?ya.find("tr"):null;case "bottom":return za?za.find("tr"):null;default:return Xa?Xa.find("tr"):null}case "right":switch(b){case "top":return ia?ia.find("tr"):null;case "bottom":return Ka?Ka.find("tr"):null;default:return Ya?Ya.find("tr"):null}default:switch(b){case "top":return ja?ja.find("tr"):
null;case "bottom":return ba?ba.find("tr"):null;default:return ka?ka.find("tr"):null}}};var ke=function(b){var e="";b.icon?e=b.icon:a.options.rowIcon&&(e=a.options.rowIcon);return e},bd=function(b){return b.icon||a.options.rowIcon},ae=function(b,c,k,n){var e=a.currentList.length;0<e&&(b.shiftKey?m.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Zc(b,k,n):m.isEqual(c[a.options.rowFields.id],a.currentList[e-1][a.options.rowFields.id])||$c(b,k,n))},$c=function(b,c,k){b.preventDefault();
focusDelayTime=0;var e=c,g=w+F-2;g=g<a.currentList.length-1?g:a.currentList.length-1;e>=g&&Q&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(e=a.getNextRow(e)){c=a.getRowCurrentIndex(e);c>g&&Q&&(a.ensureVisible(e,"bottom"),focusDelayTime=100);a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,k);f.cancel(d)},focusDelayTime)}},Zc=function(b,c,k){b.preventDefault();focusDelayTime=0;var e=w;e=0<e?e:0;c==e&&Q&&(a.setScrollPos({x:a.scrollPos.x,
y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var g=a.getPrevRow(c);if(g){c=a.getRowCurrentIndex(g);c<e&&Q&&(a.ensureVisible(g,"bottom"),focusDelayTime=100);a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,k);f.cancel(d)},focusDelayTime)}},he=function(b,c,k,n){b.preventDefault();if((void 0===n||0<=n&&n==a.options.expandColIndex)&&!a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(k,
n);else if(0<=n){focusDelayTime=0;var e=n+1;b=a.columnList.length-1;e===b&&(focusDelayTime=1);if(0<=e&&e<=b){b=m.getPageRect(q);c=a.getElemFromCell(k,e);c=m.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var g=f(function(){a.updateFocus(k,e);f.cancel(g)},focusDelayTime)}}},fe=function(b,c,k,n){b.preventDefault();if((void 0===n||0<=n&&n==a.options.expandColIndex)&&a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,
!1),a.updateFocus(k,n);else if(0<=n){focusDelayTime=0;var e=1<n?n-1:0;if(0<=e){b=m.getPageRect(q);c=a.getElemFromCell(k,e);c=m.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var g=f(function(){a.updateFocus(k,e);f.cancel(g)},focusDelayTime)}}},be=function(b,c,k){b.preventDefault();var e=c-F;e=0<e?e:0;if(e!==c){focusDelayTime=1;var g=a.getPrevRow(e+1);if(g){a.scrollTo(g);a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);p.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(g),
k);f.cancel(d)},focusDelayTime)}}},ce=function(b,c,k){b.preventDefault();var e=c+F;a.options.showHeader&&e--;a.options.showFooter&&e--;e=e<a.currentList.length-1?e:a.currentList.length-1;if(e!==c){focusDelayTime=1;var g=a.getNextRow(e-1);if(g){a.scrollTo(g,"bottom");a.rowSelection(g,b.shiftKey,b.ctrlKey,b.metaKey);p.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(g),k);f.cancel(d)},focusDelayTime)}}},de=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:R.y});var e=
a.getLastRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var g=f(function(){a.updateFocus(a.getRowCurrentIndex(e),k);f.cancel(g)},1)}},ee=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var e=a.getFirstRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var g=f(function(){a.updateFocus(a.getRowCurrentIndex(e),k);f.cancel(g)},1)}},je=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var e=a.getColumnById(b[a.options.cellFields.cid]);!e&&0<=c&&
c<a.columnList.length&&(e=a.columnList[c]);if(e){var g=b[a.options.cellFields.value];if((e=e[a.options.columnFields.editorSettings])&&1==e.threeState)switch(m.isString(g)||(g="unchecked"),g){case "checked":g="unchecked";break;case "indeterminate":g="checked";break;default:g="indeterminate"}else g=m.isBoolean(g)?!g:!0;b[a.options.cellFields.value]=g;p.$apply()}}},ge=function(b,c,k,n){b.preventDefault();je(k,n);a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey,c.selected);p.$apply()},ka=null,ja=null,
ba=null,Pa=angular.element('<div class="iui-grid-block iui-grid-block-top"></div>'),xa=null,gb=angular.element('<div class="iui-grid-block iui-grid-block-left"></div>'),S=0,Ub=0,pa=null,Ja=null,Xa=null,ya=null,za=null,Za=angular.element('<div class="iui-grid-block iui-grid-block-right"></div>'),Qa=0,Vb=0,aa=null,oa=null,Ya=null,ia=null,Ka=null,Ra=angular.element('<div class="iui-grid-block iui-grid-block-bottom"></div>'),Wa=null,w=0,A=null,v=null,qa=null,Aa=null,F=100,U=0,K=0,rb=0,Fc=0,D=0,N=0,Wb=
0,Gc=!1,na=!1,hc=9,ic=9,Hc=0,$a=0,sb=0,Gb=1,Ic=0,Jc=0,tb=0,Xb=0,Kc=1,V=null,da=null,O=!1,Q=!1;this.scrollMousePos=null;var R={x:0,y:0},Nb=[];p.verScrollVisibility=!1;p.$watch("verScrollVisibility",function(b,c){a.suppressWatchScrollVisibility||b==c||a.updateCurrentLayout()});a.getColumnWidth=function(b){var e=100;b&&b[a.options.columnFields.width]&&(e=b[a.options.columnFields.width],m.isPercent(e)?(b=q[0].clientWidth-2*a.columnList.length,Q&&P&&(b-=P[0].offsetWidth),e=Math.floor(parseInt(e,10)/100*
b)):m.isString&&(e=parseInt(e,10)));return e};a.getColumnWidthFromData=function(b){var e=0;if(A){for(var c=null,n=0;n<A.data.length;n++)for(var d=0;d<A.data[n].length;d++){var f=A.data[n][d];if(f.column==b||m.isEqual(f.column[a.options.columnFields.id],b[a.options.columnFields.id])){c=f;break}if(c)break}c&&(e=c.width)}return e};var jc=function(b){var e=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var c=0;c<b.length;c++){var n=angular.element(b[c]);
e+=n[0].offsetWidth}return e},kf=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var k=0;k<c.length;k++){var n=angular.element(c[k]);n[0].attributes["data-element"]&&"column-header"==n[0].attributes["data-element"].value.toString()&&n[0].attributes["data-level"]&&"0"==n[0].attributes["data-level"].value.toString()&&(b+=n[0].offsetWidth)}a.isThereLeftFixedColumns&&(pa?S=pa[0].offsetWidth:
Ja&&(S=Ja[0].offsetWidth),b+=S);a.isThereRightFixedColumns&&(aa?Qa=aa[0].offsetWidth:oa&&(Qa=oa[0].offsetWidth),b+=Qa)}else 0<a.currentList.length&&(ka&&(b+=jc()),a.isThereLeftFixedColumns&&(b+=jc("left")),a.isThereRightFixedColumns&&(b+=jc("right")));return b};a.updateScrollVisibility=function(){var a=f(function(){O||(E.css("display","none"),R.x=0);Q||(P.css("display","none"),R.y=0);O&&Q||mb.css("display","none");f.cancel(a)},1)};q.append(E);q.append(P);q.append(mb);a.updateScrollVisibility();var le=
function(){return ja?ja[0].offsetHeight:ya?ya[0].offsetHeight:ia?ia[0].offsetHeight:0},me=function(){return ba?ba[0].offsetHeight:za?za[0].offsetHeight:Ka?Ka[0].offsetHeight:0},kc=0,lc=999;a.updateViewSize=function(){var b=f(function(){var e=0;a.options.grouping.enabled&&x&&(e=x[0].offsetHeight);Wb=0;var c=q[0].clientWidth;Q&&P&&(c-=P[0].offsetWidth);O=!1;0<a.columnList.length&&(Wb+=kf(),Wb>c&&(E.unbind("mousedown"),E.css("display","block"),E.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=m.getClientMousePos(b,this);var e=Math.floor(q[0].clientWidth);V&&(b.x<V[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-e,y:a.scrollPos.y}):b.x>V[0].offsetLeft+V[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+e,y:a.scrollPos.y}))}}),V=angular.element(E.children().eq(0)),O=!0,V.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(H.scrollMousePos=a.getMousePos(b),Gc=
!0));b.stopPropagation()})));Q=!1;p.verScrollVisibility=!1;0<a.currentList.length&&(c=0,a.options.paging.enabled&&X&&(c=X[0].offsetHeight),topRowHeight=le(),bottomRowHeight=me(),e=q[0].clientHeight-e-c-(D+N)-topRowHeight-bottomRowHeight,O&&E&&(e-=E[0].offsetHeight),F=0<U?Math.floor(e/U)+1:0<D?Math.floor(e/D):100,F<a.currentList.length+1&&(P.unbind("mousedown"),P.css("display","block"),P.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,
null,!0);b=m.getClientMousePos(b,this);var e=Math.floor(q[0].clientHeight);da&&(b.y<da[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-e}),Dc(!1,e)):b.y>da[0].offsetTop+da[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e}),Dc(!0,e)))}}),da=angular.element(P.children().eq(0)),Q=!0,p.verScrollVisibility=!0,da.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which)){H.scrollMousePos=a.getMousePos(b);
na=!0;kc=0;lc=999;for(var e=0,c=!1,g=!1,k=a.scrollPos.x+rb-(S+Qa),d=0;d<a.columnList.length;d++)if(!a.isColumnFixed(a.columnList[d])){var n=a.getColumnWidth(a.columnList[d])+4;e+=n;!c&&e>=a.scrollPos.x&&(kc=d,c=!0);!g&&e>=k&&(lc=d,g=!0);if(c&&g)break}}b.stopPropagation()})));O||(E.unbind("mousedown"),R.x=0);Q||(P.unbind("mousedown"),R.y=0);O&&Q&&E.css("display","block");!O&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!Q&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0});f.cancel(b)},
1)};a.updateScrollView=function(){cd()};var cd=function(){var b=f(function(){var e=0;a.options.grouping.enabled&&x&&(e=x[0].offsetHeight);var c=0;a.options.paging.enabled&&X&&(c=X[0].offsetHeight);rb=q[0].offsetWidth-2;Fc=q[0].offsetHeight-2-e-c;O&&(Fc-=E[0].offsetHeight);Q&&(rb-=P[0].offsetWidth);Ba.css("margin-top",e+"px");Ba.css("width",rb+"px");Ba.css("height",Fc+"px");O&&(E.css("left","0px"),E.css("bottom",c+"px"),E.css("width",rb-2+"px"));var d=2;a.options.paging.enabled&&X&&(d=4);Q&&(P.css("top",
e+"px"),P.css("right","0px"),P.css("height",Fc-d+"px"));O&&Q&&(mb.css("left","auto"),mb.css("right","0px"));var z=f(function(){topRowHeight=le();bottomRowHeight=me();var b=D+topRowHeight;O&&rb<Wb&&($a=2,sb=E[0].clientWidth-4,Hc=0,sb>$a&&(Hc=sb-$a),hc=Math.floor(Hc*rb/Wb),9>hc&&(hc=9),V.css("width",hc+"px"),R.x=Wb-rb,Gb=R.x/(Hc-hc-2));var g=a.currentList.length+1;Q&&0<a.currentList.length&&F<g&&(tb=2,Xb=P[0].clientHeight-4,Ic=0,Xb>tb&&(Ic=Xb-tb),ic=Math.floor(Ic*F/g),9>ic&&(ic=9),da.css("height",ic+
"px"),Kc=(g-F+1)/(Ic-ic-2),R.y=Math.floor((g-F+1)*U),0>R.y&&(R.y=0),0==w?da.css("top",tb+"px"):w+F-1==a.currentList.length&&da.css("top",Xb-da[0].offsetHeight+"px"));a.isThereLeftFixedColumns&&(pa?S=pa[0].offsetWidth:Ja?S=Ja[0].offsetWidth:0<a.currentList.length&&(S=jc("left")),Ub=q[0].clientHeight-e-c-D-N,O&&(Ub-=E[0].offsetHeight),gb.css("top",e+D+"px"),gb.css("width",S+"px"),gb.css("height",Ub+"px"),xa&&xa.css("left",S+"px"),ka&&ka.css("left",S+"px"),Wa&&Wa.css("left",S+"px"));a.isThereRightFixedColumns&&
(aa?Qa=aa[0].offsetWidth:oa?Qa=oa[0].offsetWidth:0<a.currentList.length&&(Qa=jc("right")),Vb=q[0].clientHeight-e-c-D-N,O&&(Vb-=E[0].offsetHeight),g=0,Q&&(g=P[0].offsetWidth),aa&&aa.css("right",g+"px"),Za.css("top",e+D+"px"),Za.css("right",g+"px"),Za.css("width",Qa+"px"),Za.css("height",Vb+"px"),oa&&oa.css("right",g+"px"));g=c;O&&E&&(g+=E[0].offsetHeight);Ra.css("bottom",g+"px");ka&&ka.css("top",b+"px");ba&&ba.css("bottom",N+"px");Xa&&Xa.css("top",topRowHeight+"px");Ya&&Ya.css("top",topRowHeight+"px");
b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>R.x&&(b=R.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Gb)-(sb-V[0].offsetWidth-$a):Math.floor(a.scrollPos.x/Gb)+$a,O&&V&&V.css("left",b+"px"),dd());f.cancel(z)},1);f.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){b=(q[0].clientWidth-b)/a.columnList.length;for(c=0;c<a.columnList.length;c++){var k=a.getColumnWidth(a.columnList[c])+
b;a.columnList[c][a.options.columnFields.width]=k}return!0}}return!1};p.onCellValueChanging=function(b,c,k){var e=c+w,g=a.getCell(e,k);if(g&&0==g[a.options.cellFields.allowEdit])return!1;g=!0;var d=a.getColumnObject(k),f="label",h=null;d&&(f=d[a.options.columnFields.editorType],h=d[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=h&&1==h.threeState?b.checkState:b.checked;g=a.callCellValueChanging(a.getRowObject(e),a.getCellObject(e,k),b);break;case "combobox":g=a.callCellValueChanging(a.getRowObject(c),
a.getCellObject(c,k),b.item)}return g};p.onCellValueChanged=function(b,c,k){var e=c+w,g=a.getColumnObject(k),d="label",f=null;g&&(d=g[a.options.columnFields.editorType],f=g[a.options.columnFields.editorSettings]);switch(d){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,k),b);break;case "combobox":if(e=a.getCell(c,k))e[a.options.cellFields.value]=b.item,p.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);
a.updateFocus(c,k);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,k),b.item)}};p.onEditorClick=function(b,c,k){c+=w;var e=a.getColumnObject(k),g="label";e&&(g=e[a.options.columnFields.editorType]);switch(g){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,k),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,k){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=k&&1==k.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&
(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var ed=function(b){b=void 0==b?"none":b;var e='<table cellpadding="0" cellspacing="0" style="position:absolute;top:0;">';if(0<a.relatedColumns.length&&0<a.completeColumnList.length){e+="<tr>";for(var c=
0;c<a.completeColumnList[0].length;c++){var d=a.completeColumnList[0][c];e+='<td class="iui-grid-column-expand-cell" data-level="0" data-index="'+c+'" data-element="column-expand-cell" colspan="'+d.colSpan+'">';e+='<div class="iui-grid-column-expand-cell-content">';if(a.isColumnRelated(d.column)&&(d=a.getColumnRelatedObject(d.column))){var f=a.isTherePrevRelatedColumn(d),h=a.isThereNextRelatedColumn(d);if(d.children&&0<d.children.length){var m="iui-grid-column-expand-box";m=0!=d.expanded?m+" iui-grid-column-expand-box-close":
m+" iui-grid-column-expand-box-open";e+='<span class="'+m+'"></span>'}else if(f||h)e+='<span class="iui-grid-column-expand-line-vertical"></span>';f&&(e+='<span class="iui-grid-column-expand-line-left"></span>');h&&0!=d.expanded&&(e+='<span class="iui-grid-column-expand-line-right"></span>')}e+="</div></td>"}e+="</tr>"}for(f=0;f<a.completeColumnList.length;f++){e+="<tr>";for(c=0;c<a.completeColumnList[f].length;c++)d=a.completeColumnList[f][c],h=d.column[a.options.columnFields.fixed],h=void 0==h?
"none":h,h==b&&(e+='<td iui-class="{{data['+f+"]["+c+'].style.header.general}}" data-level="'+f+'"  data-index="'+c+'" data-element="column-header"',0<d.colSpan&&(e+=' colspan="'+d.colSpan+'"'),0<d.rowSpan&&(e+=' rowspan="'+d.rowSpan+'"'),e+='><div iui-class="{{data['+f+"]["+c+'].style.header.cell}}" data-element="column-header-cell"',e+=' iui-contextmenu menu-items="data['+f+"]["+c+"].column."+a.options.columnFields.contextMenu+'"',e+=' iui-style="overflow:hidden;width:{{data['+f+"]["+c+"].width}}px;text-align:{{data["+
f+"]["+c+'].headerAlignment}};">',e+='<span iui-class="{{data['+f+"]["+c+'].style.header.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+f+"]["+c+"].column."+a.options.columnFields.headerTooltip+'">',e+="{{data["+f+"]["+c+"].column."+a.options.columnFields.headerText+"}}</span>",e+='<span iui-class="{{data['+f+"]["+c+'].style.filtering}}" data-level="'+f+'" data-index="'+c+'" data-element="filter-button" ng-show="data['+f+"]["+c+'].showFiltering"></span>',e+='<span iui-class="{{data['+
f+"]["+c+'].style.sorting}}" data-level="'+f+'" data-index="'+c+'" data-element="sort-button" ng-show="data['+f+"]["+c+'].showSorting"></span>',e+="</div>",e+="</td>");e+="</tr>"}return e+"</table>"},fd=function(b){b=void 0==b?"none":b;var e='<table cellpadding="0" cellspacing="0" style="position:absolute;bottom:0;"><tr>';for(var c=0;c<a.columnList.length;c++){var d=a.columnList[c];var f=d[a.options.columnFields.fixed];f=void 0==f?"none":f;f==b&&(e+='<td iui-class="{{dataFooter['+c+'].style.footer.general}}" data-index="'+
c+'" data-element="column-footer">',e+='<div iui-class="{{dataFooter['+c+'].style.footer.cell}}" data-element="column-footer-cell"',e+=' iui-contextmenu menu-items="dataFooter['+c+"].column."+a.options.columnFields.contextMenu+'"',e+=' iui-style="overflow:hidden;width:{{dataFooter['+c+"].width}}px;text-align:{{dataFooter["+c+'].footerAlignment}};">',d[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(d,!0)?(e+='<iui-item-content obj="dataFooter['+c+"].column."+a.options.columnFields.templateSettings+
'.footer.templateObj" template-url="{{dataFooter['+c+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',e+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):d[a.options.columnFields.footerContent]?e+=d[a.options.columnFields.footerContent]:d[a.options.columnFields.footerTemplate]?e+='<div ng-include="'+d[a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(e+='<span iui-class="{{dataFooter['+c+'].style.footer.content}}" data-element="cell-content"',
e+=' iui-tooltip="dataFooter['+c+"].column."+a.options.columnFields.footerTooltip+'">',e+="{{dataFooter["+c+"].column."+a.options.columnFields.footerText+"}}</span>"),e+="</div>",e+="</td>")}return e+"</tr></table>"},Da=function(b,c,k,d){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;d='<tr class="iui-grid-row" data-index="'+b+'" data-fixed="'+d+'"';k&&(d+=' style="position:absolute;top:-9999px"');d+=">";for(var e=0;e<a.columnList.length;e++)k=a.columnList[e][a.options.columnFields.fixed],
k=void 0==k?"none":k,k==c&&(d+='<td class="iui-grid-row-cell" data-element="cell" data-index="'+e+'">',d+="<div",d+=' class="iui-grid-row-cell-content" data-element="cell-content"',d+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=0<a.groups.length&&e==a.options.expandColIndex?d+'padding-left:0px;">':d+'">',d+=ne(b,e),d+="</div>",d+="</td>");return d+"</tr>"}c=void 0==c?"none":c;d='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+
b+'].index}}" data-fixed="'+d+'" tabindex="{{data['+b+'].tabindex}}"';k&&(d+=' style="position:absolute;top:-9999px"');d+=">";for(e=0;e<a.columnList.length;e++)k=a.columnList[e][a.options.columnFields.fixed],k=void 0==k?"none":k,k==c&&(d+='<td iui-class="{{data['+b+"].cells["+e+'].style.cell}}" data-element="cell" data-index="'+e+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+b+"].cells["+e+'].tabindex}}">',d+='<div ng-show="data['+b+'].visible"',d+=' iui-class="{{data['+b+"].cells["+
e+'].style.content}}" data-element="cell-content"',d+=' iui-style="width:{{data['+b+"].cells["+e+"].width}}px;text-align:{{data["+b+"].cells["+e+"].alignment}};",0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=0<a.groups.length&&e==a.options.expandColIndex?d+("padding-left:{{data["+b+"].cells["+e+'].indent}}px;">'):d+'">',d+=ne(b,e),d+="</div>",d+="</td>");return d+"</tr>"},ne=function(b,c){if("optimal"==a.options.displayMode){var e="";c===a.options.expandColIndex&&(e+='<span data-element="expandbox"></span><span data-element="icon"></span>');
var g=a.columnList[c][a.options.columnFields.editorSettings],d=ub(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+m.getUniqueId(4)+'"';g&&1==g.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+
a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";
break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';
e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:d&&""!=d?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+'<span class="iui-grid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+
'">'),e+=".</span>")}return e}e="";c===a.options.expandColIndex&&(e=e+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));g=a.columnList[c][a.options.columnFields.editorSettings];d=ub(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+m.getUniqueId(4)+'"';g&&1==g.threeState?
(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&
(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');
e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:d&&""!=d?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+
'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",e+="</span>")}return e},x=angular.element('<div class="iui-grid-grouping-panel"></div>'),
ea=null,mc=null,Hb=-1,vb=!1,W=angular.element('<div style="opacity:0.75;position:absolute;top:-9999px;z-index:999;pointer-events:none;"></div>'),gd=0,ra=angular.element('<div style="display:inline-block;"></div>'),wb=[],hd=function(b){var e=b[a.options.columnFields.groupText];e&&""!=e||(e=b[a.options.columnFields.headerText]);return e},mf=function(){Kd();x.unbind("mouseenter mouseleave mousemove mouseup");x.empty();x.remove();wb.length=0;if(a.options.grouping.enabled){var b="",c=0;if(0<a.groups.length)for(var k=
0;k<a.groups.length;k++){var d="iui-grid-grouping-panel-item";k<a.groups.length-1&&(d+=" iui-grid-grouping-marker");var f=hd(a.groups[k]);b+='<div class="'+d+'" data-index="'+k+'">';b+='<p class="iui-grid-grouping-panel-item-label">'+f+"</p>";b+='<span class="iui-grid-grouping-panel-item-button"></span></div>'}else k=angular.element('<span class="iui-grid-grouping-panel-item" style="position:absolute;top:-999px;">Temp</span>'),q.append(k),c=k[0].offsetHeight,k.remove();if(""!=b){var Xc=angular.element(b);
x.append(Xc)}la&&x.css("opacity",ma.opacity);q.append(x);d=0;f=x.find("div");for(k=0;k<f.length;k++){var l=angular.element(f[k]),p=m.getMargin(l[0]);wb.push({x:d,width:l[0].offsetWidth});d+=l[0].offsetWidth+p.left+p.right}k=m.getPadding(x[0]);x.bind("mouseenter",function(b){a.options.enabled&&1==b.which&&Y&&y&&(W.empty(),W.append('<div class="iui-grid-grouping-panel-item">'+y[a.options.columnFields.headerText]+"</div>"),x.append(W),gd=W[0].offsetWidth,W.css("display","none"),vb=!0,ea=null);b.stopPropagation()});
x.bind("mousemove",function(b){if(a.options.enabled&&1==b.which&&(Y&&y||vb&&ea)){if(Y&&y&&0>a.columnList.indexOf(y)){q.css("cursor","no-drop");document.body.style.cursor="no-drop";return}var e=x[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,k=a.getMousePos(b);k.x-=e.left+c;k.y-=e.top+g;e="";y?e=hd(y):ea&&(e=hd(ea));oe(b,e);ha&&ha.css("display","none");q.css("cursor","default");document.body.style.cursor="default";mc=null;e=-1;ea&&(e=a.groups.indexOf(ea));
for(c=wb.length-1;0<=c;c--)if(k.x>=wb[c].x){k.x<=wb[c].x+wb[c].width&&(mc=a.groups[c]);if(g=a.getElemFromGroup(a.groups[c]))Hb=c,ra.css("display","inline-block"),y&&ra.css("width",g[0].offsetWidth+"px"),y?k.x<=wb[c].x+wb[c].width?(k=pe(mc))?(k=a.getElemFromGroup(k))&&k.after(ra):x.prepend(ra):g.after(ra):0==c?x.prepend(ra):e>c?(k=pe(mc))&&(k=a.getElemFromGroup(k))&&k.after(ra):g.after(ra);Hb=0>Hb?0:Hb>a.groups.length-1?a.groups.length-1:Hb;break}}b.stopPropagation()});x.bind("mouseup",function(b){if(a.options.enabled&&
1==b.which&&(Y&&y||vb&&ea)){if(vb&&ea){var e=a.groups.indexOf(ea),c=Hb;e!=c?(a.moveObject(e,c,a.groups),a.updateLayout(),a.callGroupChange(ea)):(e=a.getElemFromGroup(ea))&&e.css("display","inline-block")}else mc?(c=Hb,0>a.groups.indexOf(y)&&(a.groups.splice(c,0,y),a.updateLayout(),a.callGroupChange(y))):0>a.groups.indexOf(y)&&(a.groups.push(y),a.updateLayout(),a.callGroupChange(y));W&&W.remove();ra&&ra.remove();y=null;qb=-1;vb=Y=!1;ea=null;ha&&ha.remove();q.css("cursor","default");document.body.style.cursor=
"default";b.stopPropagation()}});x.bind("mouseleave",function(b){a.options.enabled&&(ra&&ra.remove(),W&&W.css("display","none"))});x.css("width",q[0].clientWidth+"px");""==b?x.css("height",c+(k.top+k.bottom)-2+"px"):Xc&&x.css("height",Xc[0].offsetHeight+(k.top+k.bottom)-2+"px");lf();a.updateGroupPanel()}};a.updateGroupPanel=function(){var b=1;a.options.enabled||(b=.5);if(x){var c=x.find("span");if(c&&0<c.length)for(var k=0;k<c.length;k++){var d=angular.element(c[k]);d.css("opacity",b)}if((c=x.find("p"))&&
0<c.length)for(k=0;k<c.length;k++)d=angular.element(c[k]),a.options.enabled?d.removeClass("iui-grid-grouping-panel-item-disabled"):d.addClass("iui-grid-grouping-panel-item-disabled")}};var oe=function(b,c){W.empty();W.append('<div class="iui-grid-grouping-panel-item"><p class="iui-grid-grouping-panel-item-label">'+c+"</p></div>");x.append(W);var e=m.getPadding(x[0]),g=x[0].getBoundingClientRect(),d=angular.element(h)[0].pageXOffset,f=angular.element(h)[0].pageYOffset,l=a.getMousePos(b);l.x-=g.left+
d;l.y-=g.top+f;gd=W[0].offsetWidth;g=l.x-gd/2;W.css("top",e.top+"px");W.css("left",g+"px");W.css("display","block")};a.getGroupFromElem=function(b){return b&&(b=angular.element(b))&&(b=b.parent(),b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,a.isGroupIndexinRange(b,a.groups)))?a.groups[b]:null};a.getElemFromGroup=function(b){var e=null;if(b){b=a.groups.indexOf(b);for(var c=x.find("div"),d=0;d<c.length;d++){var f=angular.element(c[d]);if(f[0].attributes&&f[0].attributes["data-index"]&&
f[0].attributes["data-index"].value==b){e=f;break}}}return e};var pe=function(b){return b&&(b=a.groups.indexOf(b)-1,a.isGroupIndexinRange(b,a.groups))?a.groups[b]:null},Kd=function(){for(var a=x.find("p"),b=0;b<a.length;b++){var c=angular.element(a[b]);c.unbind("mousedown")}a=x.find("span");for(b=0;b<a.length;b++)c=angular.element(a[b]),c.unbind("mousedown")},lf=function(){for(var b=x.find("p"),c=0;c<b.length;c++){var k=angular.element(b[c]);k.bind("mousedown",function(b){if(a.options.enabled&&1==
b.which){var e=angular.element(this),c=e.parent();vb=!0;ea=a.getGroupFromElem(e);ra.css("width",c[0].offsetWidth+6+"px");ra.css("display","inline-block");c.after(ra);c.css("display","none");oe(b,ea[a.options.columnFields.headerText])}b.stopPropagation()})}b=x.find("span");for(c=0;c<b.length;c++)k=angular.element(b[c]),k.bind("mousedown",function(b){if(a.options.enabled){var e=a.getGroupFromElem(this);if(e){var c=a.groups.indexOf(e);0<=c&&0!=a.callGroupRemoving(e)&&(a.groups.splice(c,1),a.updateLayout(),
a.callGroupRemoved(e),a.callGroupChange(e))}}b.stopPropagation()})};a.isGroupIndexinRange=function(a,b){return 0<=a&&a<b.length?!0:!1};a.moveObject=function(b,c,k){a.isGroupIndexinRange(b,k)&&a.isGroupIndexinRange(c,k)&&k.splice(c,0,k.splice(b,1)[0])};var nf=function(){U=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var g=angular.element('<div class="'+a.options.controlStyle.row.cell.content+
'" style="position:absolute;top:-9999999px;">Temp</div>');q.append(g);b=m.getPadding(g[0]);g.remove()}U=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&v){b=[];var k=[];g=[];for(var d=[],h=[],l=[],p=0,va=0;va<a.currentList.length&&10>va;va++)b.push(Da(va,"none",!0)),k.push(c(b[va])(v)),q.append(k[va]),a.isThereLeftFixedColumns&&(g.push(Da(va,"left",!0)),d.push(c(g[va])(v)),q.append(d[va])),a.isThereRightFixedColumns&&(h.push(Da(va,"right",!0)),l.push(c(h[va])(v)),q.append(l[va])),
p++;if(0<p)var r=f(function(){for(var b=0,e=0,c=0,g=0;g<p;g++)b+=k[g][0].offsetHeight,k[g].remove(),a.isThereLeftFixedColumns&&(e+=d[g][0].offsetHeight,d[g].remove()),a.isThereRightFixedColumns&&(c+=l[g][0].offsetHeight,l[g].remove());U=Math.floor(Math.max(Math.max(b,e),c)/p);f.cancel(r)},1)}},L=null,id=0,jd=0,X=angular.element('<div class="iui-pagination-panel"></div>'),of=function(){L&&L.$destroy();X.empty();X.remove();jd=id=0;if(a.options.paging.showControlPanel){L=p.$new();L.currentPage=0;L.minPages=
0;L.numPages=a.pageList.length;0<L.numPages&&0==L.currentPage&&(L.currentPage=1);L.onFirstPage=function(){a.options.enabled&&(a.firstPage(),L.currentPage=a.currentPageNumber)};L.onLastPage=function(){a.options.enabled&&(a.lastPage(),L.currentPage=a.currentPageNumber)};L.onNextPage=function(){a.options.enabled&&(a.nextPage(),L.currentPage=a.currentPageNumber)};L.onPrevPage=function(){a.options.enabled&&(a.prevPage(),L.currentPage=a.currentPageNumber)};L.$watch("currentPage",function(b,e){a.options.enabled&&
b!=e&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});id=q[0].clientWidth;for(var b="",g=0;6>g;g++)switch(g){case 0:b+='<span class="iui-pagination-panel-button iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:b+='<span class="iui-pagination-panel-button iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:b+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:b+=
'<span class="iui-pagination-panel-label"> / {{numPages}}</span>';break;case 4:b+='<span class="iui-pagination-panel-button iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:b+='<span class="iui-pagination-panel-button iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(b)(L);X.append(b);q.append(X);X.css("width",id+"px");b&&(m.getMargin(b[0]),g=m.getPadding(X[0]),jd=b[0].offsetHeight+(g.top+g.bottom)-2,X.css("height",jd+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=
function(){var b=1;a.options.enabled||(b=.5);if(X){var c=X.find("span");if(c&&0<c.length)for(var k=0;k<c.length;k++){var d=angular.element(c[k]);d.css("opacity",b)}(c=X.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;L&&(L.currentPage=0<L.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=
a.pageList.length,L&&(L.currentPage=a.currentPageNumber)))};var hb=angular.element('<div class="iui-grid-block" style="position:absolute;top:-9999999px"></div>'),sa=angular.element('<div class="iui-grid-block iui-grid-block-top" style="position:absolute;top:-9999999px"></div>'),La=angular.element('<div class="iui-grid-block iui-grid-block-bottom" style="position:absolute;top:-9999999px"></div>'),ib=angular.element('<div class="iui-grid-block iui-grid-block-left" style="position:absolute;top:-9999999px"></div>'),
jb=angular.element('<div class="iui-grid-block iui-grid-block-right" style="position:absolute;top:-9999999px"></div>'),qe=function(){hb&&(hb.empty(),hb.remove());sa&&(sa.empty(),sa.remove());La&&(La.empty(),La.remove());ib&&(ib.empty(),ib.remove());jb&&(jb.empty(),jb.remove())},pf=function(){if(1<a.updateStatus)T("end");else var b=f(function(){if(0<a.columnList.length&&1==a.updateStatus){var e=0;a.options.grouping.enabled&&x&&(e=x[0].offsetHeight);A=p.$new();A.data=re();A.dataFooter=se();a.refreshColumns();
A.$apply();for(var k=N=D=0;k<a.columnList.length;k++){var d={columnID:void 0!=a.columnList[k][a.options.columnFields.id]?a.columnList[k][a.options.columnFields.id]:k,avgItemHeight:0};switch(a.columnList[k][a.options.columnFields.editorType]){case "combobox":af(a.columnList[k].editorSettings,k,d);Nb.push(d);break;default:Nb.push(d)}}a.options.showHeader&&(q.append(sa),la&&(Pa.css("opacity",ma.opacity),sa.css("opacity",ma.opacity)),sa.css("top",e+"px"),e=ed(),xa=angular.element(c(e)(A)),sa.append(xa),
a.isThereLeftFixedColumns&&(e=ed("left"),pa=c(e)(A),sa.append(pa),pa.css("z-index","2"),pa.addClass("iui-grid-column-header-left")),a.isThereRightFixedColumns&&(e=ed("right"),aa=c(e)(A),sa.append(aa),aa.css("right","0"),aa.css("z-index","1"),aa.addClass("iui-grid-column-header-right")));a.options.showFooter&&(q.append(La),la&&(Ra.css("opacity",ma.opacity),La.css("opacity",ma.opacity)),e=fd(),Wa=c(e)(A),La.append(Wa),a.isThereLeftFixedColumns&&(e=fd("left"),Ja=c(e)(A),La.append(Ja),Ja.css("z-index",
"2"),Ja.addClass("iui-grid-column-footer-left")),a.isThereRightFixedColumns&&(e=fd("right"),oa=c(e)(A),La.append(oa),oa.css("right","0"),oa.css("z-index","1"),oa.addClass("iui-grid-column-footer-right")));var h;e=-1;for(k=0;k<a.completeColumnList.length;k++)for(d=0;d<a.completeColumnList[k].length;d++){var m=a.completeColumnList[k][d].column;var l=h=null;m[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(m)?(h=m[a.options.columnFields.templateSettings].header,e=1):m[a.options.columnFields.headerContent]?
(h=m[a.options.columnFields.headerContent],e=2):m[a.options.columnFields.headerTemplate]&&(h=m[a.options.columnFields.headerTemplate],e=3);m[a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(m,!0)?l=m[a.options.columnFields.templateSettings].footer:m[a.options.columnFields.footerContent]?l=m[a.options.columnFields.footerContent]:m[a.options.columnFields.footerTemplate]&&(l=m[a.options.columnFields.footerTemplate]);if((h||l)&&(l=a.getElemFromColumnCell(m,m[a.options.columnFields.fixed]))&&
h&&h&&(l=a.getChildElement(l,"column-header-cell")))switch(l.empty(),e){case 1:A&&(h='<iui-item-content obj="data['+k+"]["+d+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+k+"]["+d+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+k+"]["+d+'].draggable}}"',h+=' data-element="header-template-content" ng-cloak></iui-item-content>',l.append(c(h)(A)));break;case 2:l.append(c(h)(p.$parent));break;case 3:h='<div ng-include="'+
h+'"',m[a.options.columnFields.headerTemplateModel]&&(h+=' onload="'+m[a.options.columnFields.headerTemplateModel]+'"'),h+=' style="margin:0;padding:0"></div>',l.append(c(h)(p.$parent))}}Sa(40);T("rows")}else Sa(70),T("scroll");f.cancel(b)},1)},qf=function(){for(var b=0,g="",k=topRowHeight=0;k<a.currentTopList.length;k++)g+=Da(k,"none",!1,"top"),b++;0<b&&(tempElems=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:-999999px;"></table>'),
tempElems.append(c(g)(qa)),Ba.append(tempElems),f(function(){topRowHeight=tempElems[0].offsetHeight;tempElems.remove()},1))},rf=function(){if(1<a.updateStatus)T("end");else var b=f(function(){if(0<a.columnList.length){var e=0;a.options.grouping.enabled&&x&&(e=x[0].offsetHeight);var k=0;a.options.paging.enabled&&X&&(k=X[0].offsetHeight);var d=0;if(a.options.showHeader&&xa){D=xa[0].offsetHeight;a.isThereLeftFixedColumns&&pa?D=pa[0].offsetHeight:a.isThereRightFixedColumns&&aa&&(D=aa[0].offsetHeight);
var h=0,m=xa.find("td");if(m&&0<m.length)for(var l=0;l<m.length;l++){var va=angular.element(m[l]);h+=va[0].offsetWidth}h>q[0].clientWidth&&(h=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),h.css("bottom","-9999px"),q.append(h),d=h[0].offsetHeight,h.remove());sa.css("width",q[0].clientWidth+"px");sa.css("height",D+"px");a.isThereLeftFixedColumns&&(S=pa[0].offsetWidth,Ub=q[0].clientHeight-D-N,xa.css("left",S+"px"));a.isThereRightFixedColumns&&
(Qa=aa[0].offsetWidth,Vb=q[0].clientHeight-D-N)}a.options.showFooter&&(N=Wa[0].offsetHeight,a.isThereLeftFixedColumns&&Ja?N=Ja[0].offsetHeight:a.isThereRightFixedColumns&&oa&&(N=oa[0].offsetHeight),La.css("width",q[0].clientWidth+"px"),La.css("height",N+"px"),a.isThereLeftFixedColumns&&(S=Ja[0].offsetWidth,Ub=q[0].clientHeight-D-N,Wa.css("left",S+"px")),a.isThereRightFixedColumns&&(Qa=oa[0].offsetWidth,Vb=q[0].clientHeight-D-N));kd();if(0<a.currentList.length){v=p.$new();v.data=ld();qa=p.$new();qa.data=
te();Aa=p.$new();Aa.data=ue();a.refreshRows();v.$apply();qa.$apply();Aa.$apply();nf();qf();var r=f(function(){Xd();ka&&ka.remove();ja&&ja.remove();ba&&ba.remove();Xa&&Xa.remove();ya&&ya.remove();za&&za.remove();Ya&&Ya.remove();ia&&ia.remove();Ka&&Ka.remove();K=0;for(var b="",g=0;g<a.currentTopList.length;g++)b+=Da(g,"none",!1,"top"),K++;0<K&&(ja=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:'+D+'px;"></table>'),ja.append(c(b)(qa)),
hb.append(ja));K=0;b="";for(g=0;g<a.currentBottomList.length;g++)b+=Da(g,"none",!1,"bottom"),K++;0<K&&(ba=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block" style="position:absolute;bottom:'+N+'px;"></table>'),ba.append(c(b)(Aa)),hb.append(ba));b=q[0].clientHeight-e-k-(D+N)-d;F=0<U?Math.floor(b/U)+1:0<D?Math.floor(b/D)+1:100;K=0;b="";for(g=0;g<F;g++)b+=Da(g),K++;if(0<K){ka=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+
(D+topRowHeight)+'px;"></table>');ka.append(c(b)(v));hb.append(ka);if(a.isThereLeftFixedColumns){b="";for(g=K=0;g<a.currentTopList.length;g++)b+=Da(g,"left",!1,"top"),K++;0<K&&(ya=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-left-top" style="position:absolute;"></table>'),ya.append(c(b)(qa)),ib.append(ya));b="";for(g=K=0;g<a.currentBottomList.length;g++)b+=Da(g,"left",!1,"bottom"),K++;0<K&&(za=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),
za.append(c(b)(Aa)),ib.append(za));ka.css("left",S+"px");b="";for(g=K=0;g<F;g++)b+=Da(g,"left"),K++;0<K&&(Xa=angular.element('<table class="iui-grid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Xa.append(c(b)(v)),ib.append(Xa),q.append(ib),la&&gb.css("opacity",ma.opacity))}if(a.isThereRightFixedColumns){b="";for(g=K=0;g<a.currentTopList.length;g++)b+=Da(g,"right",!1,"top"),K++;0<K&&(ia=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-right-top" style="position:absolute;"></table>'),
ia.append(c(b)(qa)),jb.append(ia));b="";for(g=K=0;g<a.currentBottomList.length;g++)b+=Da(g,"right",!1,"bottom"),K++;0<K&&(Ka=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),Ka.append(c(b)(Aa)),jb.append(Ka));b="";for(g=K=0;g<F;g++)b+=Da(g,"right"),K++;0<K&&(Ya=angular.element('<table class="iui-grid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ya.append(c(b)(v)),
jb.append(Ya),q.append(jb),la&&Za.css("opacity",ma.opacity))}}Sa(70);T("scroll");f.cancel(r)},5)}else Sa(70),T("scroll")}else Sa(70),T("scroll");f.cancel(b)},1)},Yb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},sf=function(){if(1<a.updateStatus)T("end");else{if(1==a.updateStatus){ja&&ja.unbind("dragover");ba&&ba.unbind("dragover");ya&&ya.unbind("dragover");za&&za.unbind("dragover");
ia&&ia.unbind("dragover");ia&&ia.unbind("dragover");hb&&(Ba.empty(),Ba.append(hb.children()),ja&&ja.bind("dragover",function(a){Yb(a);a.stopPropagation()}),ba&&ba.bind("dragover",function(a){Yb(a);a.stopPropagation()}));if(sa){var b=0;a.options.grouping.enabled&&x&&(b=x[0].offsetHeight);Pa.css("top",b+"px");Pa.empty();Pa.append(sa.children());a.options.showHeader&&(Pa.css("width",q[0].clientWidth+"px"),Pa.css("height",D+"px"));q.append(Pa)}La&&(Ra.empty(),Ra.append(La.children()),a.options.showFooter&&
(Ra.css("width",q[0].clientWidth+"px"),Ra.css("height",N+"px")),q.append(Ra));ib&&(gb.empty(),gb.append(ib.children()),q.append(gb),ya&&ya.bind("dragover",function(a){Yb(a);a.stopPropagation()}),za&&za.bind("dragover",function(a){Yb(a);a.stopPropagation()}));jb&&(Za.empty(),Za.append(jb.children()),q.append(Za),ia&&ia.bind("dragover",function(a){Yb(a);a.stopPropagation()}),Ka&&Ka.bind("dragover",function(a){Yb(a);a.stopPropagation()}));a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();
a.updateScrollView()}Sa(80,"complete");T("complete")}},tf=function(){switch(ma.type){case "circular":1==a.updateStatus&&(ve(),Zb=0,xb=!0,a.callLoadComplete());break;case "linear":we(!1);break;default:Zb=0,xb=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)$b=a.updateActive=!0,1==a.updateStatus?T("start"):T("end");else if(md())var b=f(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();f.cancel(b)},
1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},nc=[],oc=[],pc=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";nc.length=0;oc.length=0;pc.length=0;for(var k=nc;3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var d,f,h=0;h<c.length;h++){d=angular.element(c[h]);f={rowElem:d,cellList:[]};if(h<F){d=d.find("td");for(var m=0;m<d.length;m++){var l=angular.element(d[m]),p=a.getContentElement(l);if(p){var q=m;l[0].attributes&&
l[0].attributes["data-index"]&&(q=parseInt(l[0].attributes["data-index"].value,10));l={cell:l,block:p,expandBox:null,icon:null,content:null};q==a.options.expandColIndex&&(l.expandBox=angular.element(a.getContentElement(p,"expandbox")),l.icon=angular.element(a.getContentElement(p,"icon")));var r="content";switch(a.columnList[q][a.options.columnFields.editorType]){case "checkbox":r="checkbox";break;case "image":r="image";break;default:(q=ub(q))&&""!=q&&(r="template-content")}l.content=angular.element(a.getContentElement(p,
r));f.cellList.push(l)}}}k.push(f)}b++;1==b?(c="left",k=oc):(c="right",k=pc)}}};var T=function(b){if($b&&!Ib)switch(b){case "start":1<a.updateStatus?T("end"):(a.updateColumnList(),a.updateGroupList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Sa(10),T("init"));break;case "init":1<a.updateStatus?T("end"):(Nb.length=0,Sd(),a.options.grouping.enabled&&mf(),Gc||na||cd(),qe(),Wa=xa=ba=ja=ka=null,Ub=S=0,za=ya=Xa=pa=null,Vb=Qa=0,Ka=ia=Ya=aa=null,A&&A.$destroy(),v&&v.$destroy(),a.options.paging.enabled&&
of(),q.append(hb),Sa(20),T("columns"));break;case "columns":pf();break;case "rows":sa?a.options.showHeader&&sa.find("td").length<a.columnList.length?f(function(){T(b)},1):rf():f(function(){T(b)},1);break;case "scroll":sf();break;case "complete":1<a.updateStatus?T("end"):(qe(),Sa(90),T("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(xa&&Yc(xa),a.isThereLeftFixedColumns&&pa&&Yc(pa),a.isThereRightFixedColumns&&aa&&Yc(aa)),0<a.currentList.length&&hf(),Sa(100));
T("end");break;case "end":tf()}else f(function(){T(b)},1)},xe=5,Lc=0,Jb=0,Mc=0,ye=0,Ib=!1,Nc=!1,ma={type:"none",speed:"normal",opacity:0},nd=null,la=!1,xb=!1,we=function(b){var e=l(function(){b?Jb++:Jb--;Mc=(q[0].clientHeight-Jb)/2+2;qc.css("height",Jb+"px");kb.css("top",Mc+"px");b&&Jb>=xe?(la=!0,Sa(0),xb=Ib=!1,l.cancel(e)):!b&&0>=Jb&&(kb&&kb.remove(),Zb=0,xb=!0,a.callLoadComplete(),l.cancel(e))},20)},ve=function(){nd&&l.cancel(nd);ab&&ab.remove()};a.beginLoad=function(a){if(!Ib)switch(Ib=!0,ma=a?
{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},od(ma.opacity),ma.type){case "circular":ve();q.append(ab);ab.css("top",(q[0].clientHeight-ab[0].offsetHeight)/2+"px");ab.css("left",(q[0].clientWidth-ab[0].offsetWidth)/2+"px");la=!0;xb=Ib=!1;var b=0,e=3;switch(ma.speed){case "veryfast":e=7;break;case "fast":e=5;break;case "slow":e=2;break;case "veryslow":e=1}nd=l(function(){b+=e;360<b&&(b=0);var a=
"rotate("+b+"deg)";ab.css("-ms-transform",a);ab.css("-webkit-transform",a);ab.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);xe=parseInt(getComputedStyle(a[0]).height,10);a.remove();qc.css("width","0px");qc.css("height","0px");q.append(kb);Zb=0;Lc=Math.floor(.5*q[0].clientWidth);Jb=0;Mc=q[0].clientHeight/2+2;ye=(q[0].clientWidth-Lc)/2;kb.css("width",Lc+"px");kb.css("top",Mc+"px");kb.css("left",
ye+"px");kb.css("opacity","1");we(!0);break;default:la=!0,xb=Ib=!1}};a.endLoad=function(){if(!Nc)if(Nc=!0,la){la=!1;var a=3,b=ma.opacity,c=l(function(){xb&&(10<a||1<=b?(od(1),Nc=Ib=xb=!1,ma={type:"none",speed:"normal"},l.cancel(c)):(b+=a/10,od(b),a+=3))},1)}else Nc=!1};var od=function(a){x&&x.css("opacity",a);Pa&&Pa.css("opacity",a);gb&&gb.css("opacity",a);Ba&&Ba.css("opacity",a);Za&&Za.css("opacity",a);Ra&&Ra.css("opacity",a);X&&X.css("opacity",a);E&&E.css("opacity",a);P&&P.css("opacity",a);mb&&
mb.css("opacity",a)},qc=angular.element('<div class="iui-load-block-progress"></div>'),kb=angular.element('<div class="iui-load-block"></div>');kb.append(qc);var Zb=0,$b=!1,ab=angular.element('<div class="iui-load-circular"></div>'),Sa=function(a){if(la&&"linear"==ma.type){$b=!1;var b=Math.floor(Lc*a/100),e=Zb;a=10;switch(ma.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var c=b>e?Math.floor((b-e)/a):1;c=0<c?c:1;var d=l(function(){e+=c;qc.css("width",
e+"px");e>=b&&(Zb=b,$b=!0,l.cancel(d))},1)}else $b=!0};a.updateStatus=0;a.updateActive=!1;a.updateLayout=function(b){q.append(H.$tw);H.s1t(H.twp);b=!0;for(var e=q.parent();"body"!=e[0].tagName.toLowerCase();){if("none"==getComputedStyle(e[0]).display){b=!1;break}e=e.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-grid-block-rtl"),a.options.rtl&&q.addClass("iui-grid-block-rtl"),Ba.removeClass("iui-grid-block-shift-left iui-grid-block-rtl"),
Ba.addClass(Wc()),U=0,F=100,N=D=0,$b=!0,T("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.updateGroupList();a.options.paging.enabled&&(a.updatePageList(),L&&(L.minPages=0<a.pageList.length?1:0,L.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var e=f(function(){a.updateViewSize();a.updateViewSize();b&&a.updateScrollVisibility();a.updateScrollView();f.cancel(e)},1)}};var ze=function(b){var e={top:0,
right:0,bottom:0,left:0};(b=a.getElemFromColumnCell(b))&&(b=a.getChildElement(b,"column-header-cell"))&&(e=m.getPadding(b[0]));return e},Ae=function(b){var e=b[a.options.columnFields.columns];if(!e||0==e.length)return e=a.getColumnWidth(b),e=0<=e?e:0,b=pd(b),e<b.min&&(e=b.min),e>b.max&&(e=b.max),e;for(var c,d=0,f=0;f<e.length;f++)a.isColumnWithChildenVisible(e[f])&&(c=ze(e[f]),d+=Ae(e[f])+c.left+c.right);c=ze(b);return d-=c.left+c.right},Be=function(b,c){var e=b?b.column:c;return{draggable:b?b.isRoot&&
a.options.enabled&&a.options.allowColumnReorder&&b.column[a.options.columnFields.allowDrag]:!1,headerAlignment:e[a.options.columnFields.headerAlignment],footerAlignment:e[a.options.columnFields.footerAlignment],index:a.columnList?a.columnList.indexOf(e):-1,indent:0,column:e,showFiltering:a.isFilteringAllowed(e),showSorting:a.isSortingAllowed()&&e==a.sortColumn,style:{header:{},footer:{}},width:Ae(e)}},Ce=function(b,c){var e=0;if(c==a.options.expandColIndex){var g=a.columnList[a.options.expandColIndex];
e=a.getColumnWidth(g);var d=e-a.indentList[b];d=0<=d?d:0;var f={top:0,right:0,bottom:0,left:0};(g=a.getElemFromColumn(g,g[a.options.columnFields.fixed]))&&(g=a.getChildElement(g,"column-header-cell"))&&(f=m.getPadding(g[0]));f=f.left+a.indentList[b];0==d&&(f=e);e=f}return e},qd=function(b,c,d){var e=c;d&&(d=a.columnList[c][a.options.columnFields.id])&&(e=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,d));return e},De=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?
a.columnList[b][a.options.columnFields.contentAlignment]:"left"},Ee=function(b,c){var e=a.columnList[c],d=a.getColumnWidth(e);e=pd(e);d<e.min&&(d=e.min);d>e.max&&(d=e.max);c==a.options.expandColIndex&&(d-=a.indentList[b]);return 0<=d?d:0},rd=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},Fe=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?
a.getTabIndex().toString()+(b+1).toString():""},Ge=function(b,c,d){if(0<=c){var e=a.currentList[b][a.options.rowFields.cells];switch(d){case "top":e=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":e=a.currentBottomList[b][a.options.rowFields.cells]}if(c<e.length)return e[c]}return{}},ub=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},sd=function(b,c,d,f){for(var e=[],g=0;g<a.columnList.length;g++){var k=
qd(c,g,d),n=d?Ge(c,k,f):{},h=De(g),m=a.columnList[g][a.options.columnFields.editorSettings];m=m&&m.style?m.style:null;if(d)a:{if(0<=k){var l=a.currentList[c][a.options.rowFields.cells];if(k<l.length){l=1==a.options.enabled&&l[k][a.options.cellFields.enabled];break a}}l=1==a.options.enabled}else l=!1;var p=d?Ce(c,g):0,q=k,r=d?rd(c,g):"",u=ub(g);if(d){var t=c;var v=k;var w=ub(g);t=Ge(t,v);v=0<=v&&w&&""!=w&&t&&void 0!=t[a.options.cellFields.templateObj]&&null!=t[a.options.cellFields.templateObj]?!0:
!1}else v=!1;if(d)a:{if(0<=k&&(w=a.currentList[c][a.options.rowFields.cells],k<w.length)){w=w[k][a.options.cellFields.text];break a}w=""}else w="";if(d)a:{if(0<=k&&(t=a.currentList[c][a.options.rowFields.cells],k<t.length)){t=t[k][a.options.cellFields.value];break a}t=null}else t=null;k={related:n,alignment:h,editorStyle:m,enabled:l,indent:p,index:q,style:{},tabindex:r,templateUrl:u,templateVisible:v,text:w,value:t,visible:d?0<=k?!0:!1:!1,width:d?Ee(c,g):0};e.push(k)}return{cells:e,expandBox:d?Td(b):
"",expandBoxVisible:d&&!f?0!=a.options.showExpandBoxes:!1,draggable:d&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:d?ke(b):"",iconVisible:d?0!=a.options.showIcons&&bd(b):!1,index:c,row:d?b:{},style:{},tabindex:d&&!f?Fe(c):"",updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:!1,visible:d}},re=function(){for(var b=[],c=0;c<a.completeColumnList.length;c++){b.push([]);for(var d=0;d<a.completeColumnList[c].length;d++)b[c].push(Be(a.completeColumnList[c][d]))}return b},se=function(){for(var b=
[],c=0;c<a.columnList.length;c++)b.push(Be(null,a.columnList[c]));return b},ld=function(){for(var b=[],c=w;c<w+F;c++)b.push(sd(a.currentList[c],c,c<a.currentList.length));return b},te=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(sd(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},ue=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(sd(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},kd=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=
a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",(D-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(D-parseInt(getComputedStyle(c[0]).height,
10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return v};var Ie=function(){a.allowEvents=!1;if(A&&0<a.columnList.length)if(A.data=re(),A.dataFooter=se(),v){if(td(!1),v.data=ld(),qa&&(qa.data=te()),Aa&&(Aa.data=ue()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),A.$apply(),v.$apply(),
qa&&qa.$apply(),Aa&&Aa.$apply(),kd(),0>=a.options.rowHeight&&md())for(var b=w;0<=b&&b<w+F&&b<a.currentList.length;b++)He(a.currentList[b])}else a.refresh(null,null,!1),A.$apply(),kd();a.allowEvents=!0},ud=function(b,c){var e=0;if(b&&v){var d=a.getElemFromRow(b,c);d&&(e=d[0].offsetHeight)}return e},md=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=ub(c);if(d&&""!=d){b=!0;break}}return b},vd=function(b,c,d){for(var e=0,g="none";3>e;){if((g=a.getElemFromRow(b,c,g))&&(g=g.find("td"))&&0<
g.length)for(var k=0;k<g.length;k++){var f=angular.element(g[k]);f=a.getContentElement(f);var h=m.getBorderWidth(f[0]),l=m.getPadding(f[0]);f&&f.css("height",d-(h.top+h.bottom)-(l.top+l.bottom)-2.85+"px")}e++;g=1==e?"top":"bottom"}},wd=function(b,c){for(var e=0,d="none";3>e;){if((d=a.getElemFromRow(b,c,d))&&(d=d.find("td"))&&0<d.length)for(var g=0;g<d.length;g++){var f=angular.element(d[g]);(f=a.getContentElement(f))&&f.css("height","auto")}e++;d=1==e?"top":"bottom"}},He=function(a){wd(a,"none");
wd(a,"left");wd(a,"right");var b=ud(a),c=ud(a,"left"),e=ud(a,"right");b=Math.max(Math.max(b,c),e);vd(a,"none",b);vd(a,"left",b);vd(a,"right",b)};a.updateView=function(b,c){if(b)Ie(),a.updateCurrentView(c);else var e=f(function(){Ie();a.updateCurrentView(c);f.cancel(e)},1)};a.updateVerticalScrollView=function(){if(v&&(a.allowEvents=!1,td(!1),v.data=ld(),a.refresh(null,null,!1,!0),v.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&md()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=
w;0<=b&&b<w+F&&b<a.currentList.length;b++)He(a.currentList[b])};a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=nc;3>c;){var f=0,h=a.columnList.length,m=0;if("none"==e&&b){f=kc;h=lc;for(var l=0;l<f&&l<a.columnList.length;l++)a.isColumnFixed(a.columnList[l])||m++}if(d&&0<d.length)for(l=0;l<d.length;l++)if(l<F&&l<a.currentList.length&&l+w<a.currentList.length){var p=a.currentList[l+w];d[l].rowElem&&(d[l].rowElem.attr("data-index",l+w),d[l].rowElem.attr("tabindex",
Fe(l+w)));for(var q=m,r=f;r<=h&&r<a.columnList.length;r++){var u=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none";if(u==e&&q<d[l].cellList.length){d[l].cellList[q].block.css("width",Ee(l+w,r)+"px");d[l].cellList[q].block.css("text-align",De(r));d[l].cellList[q].block.css("opacity",1);d[l].cellList[q].cell.attr("draggable",a.isRowEnabled(p)&&a.isDragAllowed(p));d[l].cellList[q].cell.attr("tabindex",rd(l+w,r));u="";var t=qd(l+w,r,!0);0<=t&&t<a.currentList[l+
w][a.options.rowFields.cells].length&&(r==a.options.expandColIndex&&(0<a.groups.length&&d[l].cellList[q].block.css("padding-left",Ce(l+w,r)+"px"),d[l].cellList[q].expandBox&&(d[l].cellList[q].expandBox.removeAttr("class"),d[l].cellList[q].expandBox.addClass(Td(p))),d[l].cellList[q].icon&&(d[l].cellList[q].icon.removeAttr("class"),d[l].cellList[q].icon.addClass(ke(p)))),u=p[a.options.rowFields.cells][t][a.options.cellFields.text],"combobox"==a.columnList[r][a.options.columnFields.editorType]&&(u=p[a.options.rowFields.cells][t][a.options.cellFields.value]?
p[a.options.rowFields.cells][t][a.options.cellFields.value].text:""));if(d[l].cellList[q].content)switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(t=ub(r))&&""!=t||d[l].cellList[q].content.text(u)}q++}}}else for(d[l].rowElem&&(d[l].rowElem.attr("data-index",l+w),d[l].rowElem.attr("tabindex","")),q=m,r=f;r<=h&&r<a.columnList.length;r++)if(u=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none",
u==e&&q<d[l].cellList.length){t=r;d[l].cellList[q].block.css("width","0px");d[l].cellList[q].cell.attr("draggable",!1);d[l].cellList[q].cell.attr("tabindex","");t==a.options.expandColIndex&&(0<a.groups.length&&d[l].cellList[q].block.css("padding-left","0px"),d[l].cellList[q].expandBox&&d[l].cellList[q].expandBox.removeAttr("class"),d[l].cellList[q].icon&&d[l].cellList[q].icon.removeAttr("class"));if(d[l].cellList[q].content){switch(a.columnList[t][a.options.columnFields.editorType]){case "checkbox":break;
case "image":break;default:(t=ub(r))&&""!=t||d[l].cellList[q].content.html("")}d[l].cellList[q].content.attr("draggable",!1);d[l].cellList[q].content.attr("tabindex",rd(l+w,r))}q++}c++;1==c?(e="left",d=oc):(e="right",d=pc)}};var rc=function(b,c,d,f){var e={cell:"",content:"",general:"",label:""};switch(d){case "column":f?(d=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=d&&(d+=" "+a.options.controlStyle.column.footer.normal),e.general=d,e.cell="iui-grid-column-footer-cell",
d=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=d&&(d+=" "+a.options.controlStyle.column.footer.content)):(d=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=d&&(d+=" "+a.options.controlStyle.column.header.normal),e.general=d,e.cell="iui-grid-column-header-cell",d=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=d&&(d+=" "+a.options.controlStyle.column.header.content));e.content=d;break;case "row":d=
a.defaultStyle.row.general.normal;a.isRowFixed(b)?(d=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=d&&(d+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=d&&(d+=" "+a.options.controlStyle.row.general.normal);e.general=d;break;case "cell":d=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=d&&(d+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":d=c==w+F-1||c==a.currentList.length-
1?d+" iui-grid-lines-horizontal":d+" iui-grid-lines-none";break;case "horizontal":d+=" iui-grid-lines-horizontal";break;case "vertical":d=c==w+F-1||c==a.currentList.length-1?d+" iui-grid-lines-both":d+" iui-grid-lines-vertical";break;default:d+=" iui-grid-lines-both"}e.general=d;d=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=d&&(d+=" "+a.options.controlStyle.row.cell.content);e.content=d;e.label=a.getDefaultCellLabelClass()}return e},Je=function(b){var c="";a.isFilteringAllowed(b)&&
(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Ke=function(b){var c="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},
Ma=function(b,c,d,f){var e=a.getObjState(b);d=rc(b,d,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",e),c!=a.options.controlStyle.column.footer.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(d.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",e),c!=a.options.controlStyle.column.header.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&
(d.content+=" "+b));break;case "group":c=a.getCurrentRowStyle(b,e);c!=a.options.controlStyle.row.general.normal&&(d.general+=" "+c);break;case "row":c=a.getCurrentRowStyle(b,e);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(d.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&(d.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,e),f!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&
(d.content+=" "+b)}return d},lb=function(a,b,c,d){var e=v;switch(d){case "top":e=qa;break;case "bottom":e=Aa}e&&(e.data[a].cells[b].style.cell=c.general,e.data[a].cells[b].style.content=c.content,e.data[a].cells[b].style.label=c.label)},Le=function(b){if(v&&(b-=w,0<=b&&b<v.data.length&&v.data[b].visible)){v.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)v.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"}};a.refreshColumns=function(){for(var b=
0;b<a.completeColumnList.length;b++)for(var c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1)};a.refreshRows=function(){for(var b=w;b<w+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Le(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var Me=function(b,c,d,f,h){if(d&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<
d.data.length&&d.data[c].visible)){d.data[c].style=Ma(b).general;for(var e=rc(b,c,"cell"),g=0;g<a.columnList.length&&g<d.data[c].cells.length;g++){var k=d.data[c].cells[g].index;if(0<=k){var n=b[a.options.rowFields.cells];k<n.length?(k=Ma(n[k],b,c),lb(c,g,k,f)):lb(c,g,e,f)}else lb(c,g,e,f)}void 0==h&&d&&d.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,d,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,d,
f):a.refreshNormal(b,c,d)};var Ne=function(a){for(var b=null,c=0;c<A.data.length;c++){for(var e=0;e<A.data[c].length;e++)if(A.data[c][e].column==a){b=A.data[c][e];break}if(b)break}return b};a.refreshNormal=function(b,c,d){if(b)switch(b.type){case "column":A&&(1==a.options.showHeader&&(c=Ne(b))&&(c.style.header=Ma(b),c.style.filtering=Je(b),c.style.sorting=Ke(b)),1==a.options.showFooter&&(c=a.getColumnCurrentIndex(b),0<=c&&c<A.dataFooter.length&&(A.dataFooter[c].style.footer=Ma(b,null,-1,!0))),void 0==
d&&A&&A.$apply());break;case "group":if(v){var e=a.getRowCurrentIndex(b),f=e-w;if(0<=f&&f<v.data.length&&v.data[f].visible){v.data[f].style=Ma(b).general;var g=rc(b,e,"cell");for(c=0;c<a.columnList.length&&c<v.data[f].cells.length;c++){var k=v.data[f].cells[c].index;if(0<=k){var h=b[a.options.rowFields.cells];k<h.length?(k=Ma(h[k],b,e),lb(f,c,k)):lb(f,c,g)}else lb(f,c,g)}void 0==d&&v&&v.$apply()}}break;case "row":if(v&&!a.isRowFixed(b)&&(e=a.getRowCurrentIndex(b),f=e-w,0<=f&&f<v.data.length&&v.data[f].visible)){v.data[f].style=
Ma(b).general;g=rc(b,e,"cell");for(c=0;c<a.columnList.length&&c<v.data[f].cells.length;c++)k=v.data[f].cells[c].index,0<=k?(h=b[a.options.rowFields.cells],k<h.length?(k=Ma(h[k],b,e),lb(f,c,k)):lb(f,c,g)):lb(f,c,g);void 0==d&&v&&v.$apply()}Me(b,a.currentTopList,qa,"top",d);Me(b,a.currentBottomList,Aa,"bottom",d)}else{for(b=0;b<a.completeColumnList.length;b++)for(c=0;c<a.completeColumnList[b].length;c++)a.refresh(a.completeColumnList[b][c].column,null,!1);for(b=w;b<w+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],
null,!1):Le(b);1==d&&v&&v.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==d&&qa&&qa.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==d&&Aa&&Aa.$apply()}};a.refreshOptimal=function(b,c,d,f){if(b)switch(b.type){case "column":A&&(1==a.options.showHeader&&(c=Ne(b))&&(c.style.header=Ma(b),c.style.filtering=Je(b),c.style.sorting=Ke(b)),1==a.options.showFooter&&(c=a.getColumnCurrentIndex(b),0<=c&&c<A.dataFooter.length&&
(A.dataFooter[c].style.footer=Ma(b,null,-1,!0))),void 0==d&&A&&A.$apply());break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.completeColumnList.length;b++)for(d=0;d<a.completeColumnList[b].length;d++)a.refresh(a.completeColumnList[b][d].column,null,!1);for(b=w;b<w+F;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):Oe(b-w)}};var Oe=function(b,c){for(var e=0,d="none",f=nc;3>e;){var g=b,h=0,l=a.columnList.length,m=0;if("none"==d&&c){h=kc;l=lc;for(var p=0;p<h&&p<a.columnList.length;p++)a.isColumnFixed(a.columnList[p])||
m++}if(f&&0<f.length&&0<=g&&g<f.length&&v)for(sc(f[g].rowElem,a.defaultStyle.row.general.normal);h<=l&&h<a.columnList.length;h++)(a.columnList[h][a.options.columnFields.fixed]?a.columnList[h][a.options.columnFields.fixed]:"none")==d&&m<f[g].cellList.length&&(sc(f[g].cellList[m].cell,a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"),m++);e++;1==e?(d="left",f=oc):(d="right",f=pc)}},sc=function(a,b){a&&(a.removeAttr("class"),a.addClass(b))};a.refreshCurrentView=function(b,c){for(var e=0,d="none",
f=nc;3>e;){var g=b,h=c;if(g)switch(g.type){case "group":Pe(g,f,d,h);break;case "row":Pe(g,f,d,h)}else for(g=w;g<w+F;g++)g<a.currentList.length?a.refreshCurrentView(a.currentList[g],!0):Oe(g,!0);e++;1==e?(d="left",f=oc):(d="right",f=pc)}};var Pe=function(b,c,d,f){if(v&&c&&0<c.length){var e=a.getRowCurrentIndex(b),g=e-w;if(0<=g&&g<c.length&&g<v.data.length&&v.data[g].visible){sc(c[g].rowElem,Ma(b).general);var k=0,h=a.columnList.length,n=0;if("none"==d&&f)for(k=kc,h=lc,f=0;f<k&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||
n++;for(;k<=h&&k<a.columnList.length;k++)(a.columnList[k][a.options.columnFields.fixed]?a.columnList[k][a.options.columnFields.fixed]:"none")==d&&n<c[g].cellList.length&&(f=qd(e,k,!0),0<=f&&f<a.currentList[e][a.options.rowFields.cells].length?sc(c[g].cellList[n].cell,Ma(a.currentList[e][a.options.rowFields.cells][f],b,e).general):sc(c[g].cellList[n].cell,rc(b,e,"cell").general),n++)}}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var e=a.columnsObj.getParent(b);e=a.columnsObj.getList(e);
var d=e.indexOf(b),f=-1;if(e){switch(c){case "first":f=0;break;case "left":var g=Bc(b,b[a.options.columnFields.fixed],!0);g&&(g=e.indexOf(g),0<=g&&(f=g));break;case "right":if(g=Cc(b,b[a.options.columnFields.fixed],!0))g=e.indexOf(g),0<=g&&(f=g);break;case "last":f=e.length-1}0<=f&&f<e.length&&(d<f?("first"==c||"left"==c)&&f--:d>f&&("last"==c||"right"==c)&&f++,a.moveObject(d,f,e),a.updateLayout(),a.callColumnPosChanged(y,a.hoverColumn))}}};a.moveRow=function(b,c,d,f){if(b){a.allowUpdate=!1;var e=
-1;switch(d){case "first":e=0;break;case "at":e=f}if(Array.isArray(b)){f=[];for(var g=0;g<b.length;g++){for(var k=!1,h=a.getParent(b[g]);h;){if(0<=b.indexOf(h)){k=!0;break}h=a.getParent(h)}k||f.push(b[g])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),g=a.getObjCurrentIndex(f[f.length-1]),b<=g)for(g=0;g<f.length;g++)xd(f[g],c,e,d);else for(g=f.length-1;0<=g;g--)xd(f[g],c,e,d)}else xd(b,c,e,d);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var xd=function(b,c,d,f){a.rowsObj.removeAt(b,-1,
null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Va="none",Z=!1,yb=null;Va="none";var Oc=0,yd=0,cb=null;p.$watch(function(){return q[0].offsetWidth},function(b,c){a.options.autoUpdate&&(100==F?a.updateLayout():b!=c&&(cb&&(f.cancel(cb),cb=null),cb=f(function(){Pa&&Pa.css("width",q[0].clientWidth+"px");Ra&&Ra.css("width",q[0].clientWidth+"px");a.updateCurrentLayout();
f.cancel(cb);cb=null},250)))});var db=null;p.$watch(function(){return q[0].offsetHeight},function(b,c){a.options.autoUpdate&&b!=c&&(a.options.autoSize?a.updateCurrentLayout():(db&&(f.cancel(db),db=null),db=f(function(){a.updateLayout();f.cancel(db);db=null},250)))});a.isColumnWithFixedWidth=function(b){return b&&b[a.options.columnFields.fixedWidth]?b[a.options.columnFields.fixedWidth]:!1};a.setColumnResizingParams=function(b,c,d){b&&(yb=b,Va=c,yd=d,Oc=a.getColumnWidthFromData(b))};a.isColumnFixed=
function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var Bc=function(b,c,d){var e=null,f=void 0==c?"none":c,g=a.getColumnCompleteIndex(b);if(0<=g.level){if(0<g.index)for(var k=g.index-1;0<=k;k--){var h=a.completeColumnList[g.level][k].column;if(!d||d&&a.isColumnVisible(h)){var l=a.isColumnFixed(h)?h[a.options.columnFields.fixed]:"none";if(l==f){e=h;break}}}e||(b=a.getParentColumn(b))&&(e=Bc(b,c,d))}return e},Cc=function(b,c,d){var e=null,f=
void 0==c?"none":c,g=a.getColumnCompleteIndex(b);if(0<=g.level){if(0<=g.index)for(var k=g.index+1;k<a.completeColumnList[g.level].length;k++){var h=a.completeColumnList[g.level][k].column;if(!d||d&&a.isColumnVisible(h)){var l=a.isColumnFixed(h)?h[a.options.columnFields.fixed]:"none";if(l==f){e=h;break}}}e||(b=a.getParentColumn(b))&&(e=Cc(b,c,d))}return e},$d=function(b,c){if(b)switch(columnFixedType=b[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){var e=Bc(b,b[a.options.columnFields.fixed]);
if(!e||a.isColumnWithFixedWidth(e))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<index;break;case "right":if("right"==columnFixedType&&(e=Cc(b,b[a.options.columnFields.fixed]),!e||a.isColumnWithFixedWidth(e)))return!1}return!0},Kb=[],Qe=function(b){if(b&&(b=b[a.options.columnFields.columns]))for(var c=0;c<b.length;c++)a.isColumnWithChildenVisible(b[c])&&(b[c][a.options.columnFields.columns]&&0<b[c][a.options.columnFields.columns].length?Qe(b[c]):Kb.push(b[c]))};a.resizeColumn=
function(b,c,d){var e=b[a.options.columnFields.fixed];0>=c&&(d=c=0);var f;if(f=a.getHeaderElem(e))f=angular.element(f.find("tr")),0!=d&&(a.resizeColumnWithChildren(b,f,c,d),a.resizeParentColumn(b,f,d));if(f=a.getFooterElem(e))for(f=angular.element(f.find("tr")),Kb.length=0,Kb.push(b),Qe(b),b=0;b<Kb.length;b++)c=a.getColumnCurrentIndex(Kb[b]),a.resizeColumnCells(Kb[b],f,c,Kb[b][a.options.columnFields.width],2,e)};a.resizeParentColumn=function(b,c,d){if(b=a.getParentColumn(b)){var e=b[a.options.columnFields.fixed],
f=a.getColumnWidthFromData(b);f="right"==e?f-d:f+d;0>=f&&(d=f=0);0!=d&&(b[a.options.columnFields.width]=f,a.resizeColumnCells(b,c,-1,f,1,e),a.resizeParentColumn(b,c,d))}};a.resizeColumnWithChildren=function(b,c,d,f){var e=b[a.options.columnFields.fixed];0>=d&&(f=d=0);if(0!=f){b[a.options.columnFields.width]=d;a.resizeColumnCells(b,c,-1,d,1,e);var g=b[a.options.columnFields.columns];if(g&&0<g.length){b=0;if(g&&0<g.length)for(d=0;d<g.length;d++)a.isColumnWithFixedWidth(g[d])||0<a.getColumnWidth(g[d])&&
b++;if(0<b){f/=b;for(b=0;b<g.length;b++)a.isColumnWithFixedWidth(g[b])||(d=a.getColumnWidth(g[b]),0>=d&&(f="right"==e?f-a.getColumnWidthFromData(g[b]):f+a.getColumnWidthFromData(g[b])));for(b=0;b<g.length;b++)a.isColumnWithFixedWidth(g[b])||(d=a.getColumnWidth(g[b]),0<=d?(d=a.getColumnWidthFromData(g[b]),d="right"==e?d-f:d+f):d=0,a.resizeColumnWithChildren(g[b],c,d,f))}}else a.resizeRows(b,d,e),a.resizeRows(b,d,e,"top"),a.resizeRows(b,d,e,"bottom")}};a.resizeRows=function(b,c,d,f){var e=a.getRowElems(d,
f);if(e){var g=a.getColumnCurrentIndex(b),k={top:0,right:0,bottom:0,left:0},h=a.getElemFromColumn(b,b[a.options.columnFields.fixed]);h&&(h=a.getChildElement(h,"column-header-cell"))&&(k=m.getPadding(h[0]));for(h=0;h<e.length;h++)currentRowElem=angular.element(e[h]),a.resizeColumnCells(b,angular.element(e[h]),g,c,0,d,!0,k,f)}};a.resizeColumnCells=function(b,c,d,f,h,l,m,p,q){if(c){var e=-1;m&&(e=a.getRowCurrentIndex(a.getRowFromElem(c)));c=0;0<=e&&!q&&(c=a.indentList[e]);switch(h){case 1:b=a.getElemFromColumnCell(b,
l);break;case 2:b=a.getElemFromColumnCell(b,l,!0,"column-footer",d);break;case 3:b=a.getElemFromColumnCell(b,l,!1,"column-expand-cell");break;default:b=a.getElemFromCell(e,d,l,q)}b&&0<b.children().length&&(b=b.children().eq(0))&&(p=p?p.left+c:c,0<=e&&d==a.options.expandColIndex&&(f-=p),f=0<=f?f:0,3==h&&(f+=2),b.css("width",f+"px"))}};var Ld=function(b){a.dropMark()},Md=function(a){Qb()},Nd=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};
angular.element(h).bind("dragenter",Ld);angular.element(h).bind("dragover",Md);angular.element(h).bind("dragend",Nd);var wa=angular.element('<div class="iui-grid-column-reorder-mark"><span></span></div>'),ha=angular.element('<div class="iui-grid-column-reorder-tooltip"><span></span></div>'),Ud=function(b){var c="initial";if(Y&&y){var e=!0;if(!a.hoverColumn||y==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&y[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])e=
!1;else if(a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&y[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]){var d=a.getColumnCompleteIndex(y),f=a.getColumnCompleteIndex(a.hoverColumn);if(y[a.options.columnFields.pid]!=a.hoverColumn[a.options.columnFields.pid]||d.level!=f.level)e=!1}e||(c="no-drop",b&&ha&&ha.css("display","none"))}q.css("cursor",c);document.body.style.cursor=c},pd=function(b){return b?{min:m.isFieldAvailable(b[a.options.columnFields.minWidth],
0),max:m.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Pd=function(b){if(0===b.button&&yb&&"none"!=Va){var c=a.getMousePos(b).x-yd,e=Oc+c;"right"==yb[a.options.columnFields.fixed]&&(e=Oc-c);e=0<=e?e:0;var d=pd(yb);e>=d.min&&e<=d.max&&(a.resizeColumn(yb,e,c),a.updateViewSize(),a.updateScrollVisibility(),cd())}W&&W.css("display","none");ha&&ha.css("display","none");Gc?la||1!==b.which||(V[0].getBoundingClientRect(),b=a.getMousePos(b),H.scrollMousePos||(H.scrollMousePos=
b),c=V[0].offsetLeft+(b.x-H.scrollMousePos.x),c<$a?c=$a:c+V[0].offsetWidth>sb&&(c=sb-V[0].offsetWidth),V.css("left",c+"px"),H.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((sb-V[0].offsetLeft-V[0].offsetWidth)*Gb,10):parseInt((V[0].offsetLeft-$a)*Gb,10),dd(),(zd(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):na&&(la||1!==b.which||(da[0].getBoundingClientRect(),b=a.getMousePos(b),H.scrollMousePos||(H.scrollMousePos=
b),c=da[0].offsetTop+(b.y-H.scrollMousePos.y),c<tb?c=tb:c+da[0].offsetHeight>Xb&&(c=Xb-da[0].offsetHeight),da.css("top",c+"px"),H.scrollMousePos=b,Jc=c-tb,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(Jc*Kc*U),(zd(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<U?Math.floor(a.scrollPos.y/U):0,newIndex+F-1>a.currentList.length&&(newIndex=a.currentList.length-F+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==w&&(w=newIndex,a.updateView(!0))))},
Qd=function(b){a.removeDropDownList();a.closeEditor(J);a.closeFilterWindow();d()},Rd=function(b){Ud(!0);W&&W.remove();1==b.which&&vb&&ea&&(b=a.getElemFromGroup(ea))&&b.css("display","inline-block");ha&&ha.remove();vb=Y=!1;ea=null;yb&&"none"!=Va&&a.callColumnSizeChanged(yb);yb=null;Va="none";yd=Oc=0;Z=!1;q.css("cursor","default");a.updateView();a.dropMark();na&&a.updateView();Qb();H.scrollMousePos=null;na=Gc=!1;q.css("cursor","default");document.body.style.cursor="default"},Od=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);
break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(h).bind("mousemove",Pd);angular.element(h).bind("mousedown",Qd);angular.element(h).bind("mouseup",Rd);angular.element(h).bind("keyup",Od);var Ad=!1,ac=0,Pc=null,Re=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return O;case "vertical":return Q}return O&&Q};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return R};
a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!la&&b){var e=!0;0>b.x&&(b.x=0,e=!1);b.x>R.x&&(b.x=R.x,e=!1);0>b.y&&(b.y=0,e=!1);b.y>R.y&&(b.y=R.y,e=!1);a.scrollPos=b;Jc=Math.floor(a.scrollPos.y/(U*Kc));var d=tb+Jc;var f=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Gb)-(sb-V[0].offsetWidth-$a):Math.floor(a.scrollPos.x/Gb)+$a;O&&V&&V.css("left",f+"px");Q&&da&&da.css("top",d+"px");dd();td(!0,c);e&&a.callScrollPosChanged()}};var zd=function(a){return 0<a.x&&a.x<R.x||0<a.y&&
a.y<R.y},Dc=function(b,c,d){Ad||(a.updateFocus(),ac=0,Ad=!0,Pc=l(function(){var e=c,d=a.getScrollPos();e||(0===ac&&(ac=5),ac+=5+Kc,Re+=.5,e=ac+=Math.floor(Re));d.y=b?d.y+e:d.y-e;a.setScrollPos(d);(0>=d.y||a.getScrollPos().y<d.y)&&Qb()},d?d:100))},Qb=function(){Pc&&(l.cancel(Pc),Pc=null);Ad=!1;ac=0};a.cancelScrollTimer=function(){Qb()};a.scrollTo=function(b,c){if(b){var e=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(e)){var d=e;switch(c){case "center":d=Math.floor(K/2)-1;d=e>d?e-d:0;break;case "bottom":d=
K-2,a.options.showHeader&&d--,a.options.showFooter&&d--,d=e>d?e-d:0}a.setScrollPos({x:a.scrollPos.x,y:d*U})}}};var dd=function(){var b=a.scrollPos.x;0>b&&(b=0);b>R.x&&(b=R.x);b*=-1;xa&&xa.css("left",b+S+"px");Wa&&Wa.css("left",b+S+"px");ka&&ka.css("left",b+S+"px");ja&&ja.css("left",b+S+"px");ba&&ba.css("left",b+S+"px")},td=function(b,c){if(!(0==b&&0>=U)){newIndex=0<U?Math.floor(a.scrollPos.y/U):0;a.scrollPos.y==R.y&&newIndex--;if(a.currentList.length>=F&&newIndex+F-1>a.currentList.length){newIndex=
a.currentList.length-F+1;var e=a.getRowElems();e||(e=a.getRowElems("left"));e||(e=a.getRowElems("right"));e&&0<e.length&&(e=angular.element(e[e.length-1]),e[0].offsetTop+e[0].offsetHeight>q[0].clientHeight-(D+N)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=w&&(w=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var Se=function(b,c){if(Q){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(J);a.closeFilterWindow();
d();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":e=U;break;case "slow":e=2*U;break;case "fast":e=Math.floor(q[0].clientHeight/2)-D-N-U;break;case "veryfast":e=Math.floor(q[0].clientHeight-D-N-U)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);zd(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};q.bind("mousewheel",function(b){b.preventDefault();
if(!la&&a.options.enabled){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Se(b,c)}});q.bind("DOMMouseScroll",function(b){b.preventDefault();if(!la&&a.options.enabled){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));Se(b,c)}});var tc={x:0,y:0},zb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();
a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(tc={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(zb={x:b[0].pageX,y:b[0].pageY});var c=zb.x-tc.x,e=zb.y-tc.y;(20<Math.abs(c)||20<Math.abs(e))&&document.activeElement&&document.activeElement.blur();var d=!1,f=!1,h=tc,m=a.scrollPos.x,p=a.scrollPos.y,q=l(function(){var b=a.scrollPos;-20>c?(h.x-=10,h.x>zb.x?b.x+=10:(b.x=m-c,d=!0)):20<c?(h.x+=10,h.x<zb.x?b.x-=10:(b.x=m-c,d=!0)):
d=!0;-20>e?(h.y-=10,h.y>zb.y?b.y+=10:(b.y=p-e,f=!0)):20<e?(h.y+=10,h.y<zb.y?b.y-=10:(b.y=p-e,f=!0)):f=!0;a.setScrollPos(b);d&&f&&l.cancel(q)},5);tc=zb}});var Oa=null,fa=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),Ea=angular.element('<ul class="iui-contextmenu-block"></ul>');p.$eval(xc.menuItems);fa.append(Ea);var Te=p.name,Qc=null,Lb={general:"iui-contextmenu",block:{general:"iui-contextmenu-block",marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",
bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",space:"iui-contextmenu-marker-expand-space"}}},item:{general:{disabled:"iui-contextmenu-item-disabled",focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",
hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},u={controlStyle:Lb,dataFields:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"},enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,
openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},uc=[],Ta=[],Bd=function(a,b,c){a.type||(a.type="item");a[u.dataFields.id]||(a[u.dataFields.id]=m.getUniqueId());b&&(a[u.dataFields.pid]=b);c?Ta.push(a):uc.push(a)},Ue=function(a,b,c){if(a[u.dataFields.items]){if(Bd(a,b,c),b=a[u.dataFields.items])for(var e=0;e<b.length;e++)Ue(b[e],a[u.dataFields.id],c)}else Bd(a,b,c)},uf=function(){Ta.length=0;if(Oa)for(var a=vc(Oa),b=0;b<a.length;b++)Ue(a[b],null,!0);return Ta},vf=function(){uc.length=
0;if(Oa){var a=vc(Oa);if(a)for(var b=0;b<a.length;b++)Bd(a[b],0,null,!1)}},Rc=function(a){return a&&Ta?Ta.indexOf(a):-1},vc=function(b){return"column"==b.type?b[a.options.columnFields.contextMenu]:b[a.options.rowFields.contextMenu]},Zd=function(a,b){if(b){var c=vc(b);if(!c||c&&0==c.length)return!1;a.ctrlKey||a.metaKey||(fa&&(fa.unbind("blur"),fa.remove()),wf(a));return!0}return!1};angular.element(h).bind("click",function(a){Fb()});angular.element(h).bind("contextmenu",function(a){Fb()});angular.element(h).bind("keydown",
function(a){switch(a.keyCode){case 27:Fb()}});var Sc=function(a){(a?a:Ea).unbind("contextmenu");a=a?a.find("li"):Ea.children();if(0<a.length)for(var b=0;b<a.length;b++)currentElem=angular.element(a[b]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},Cd=function(a){Sc(a);(a?a:Ea).bind("contextmenu",function(a){a.preventDefault()});var b=null;a=a?a.find("li"):Ea.children();if(0<a.length)for(var c=null,e=0;e<a.length;e++)c=angular.element(a[e]),(b=wc(c))&&b&&m.isEnabled(b[u.dataFields.enabled])&&
b&&"item"==b.type&&xf(c)},Ed=function(){for(var a=0;a<Fa.length;a++)Fa[a][u.dataFields.selected]=!1,Dd(Fa[a]);Fa.splice(0,Fa.length);Ga=null},xf=function(a){a&&(a.bind("mousedown",function(a){var b=wc(this);b&&(b.itemClick&&b.itemClick({parentName:Te,item:b,mousePos:{x:a.pageX,y:a.pageY}}),Fb());a.stopPropagation()}),a.bind("mouseenter",function(a){var b=wc(this);b&&(angular.element(this),Qc=b,bc(null,!0),Fd(b)&&b!=Ga&&Ed(),bb&&f.cancel(bb),bb=f(function(){bb&&yf(b)},500));a.stopPropagation()}),a.bind("mouseleave",
function(a){Qc=null;var b=wc(this);if(b){bc(null,!0);Fd(b)&&b==Ga&&Ed();Ga&&(Ga[u.dataFields.selected]=!0,bc(Ga));var c=f(function(){Dd(b);f.cancel(c)},250)}bb&&f.cancel(bb);bb=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();var b=m.getTouchData(a);if(b&&0<b.length){var c=wc(this);c&&(c.itemClick&&c.itemClick({parentName:Te,item:c,mousePos:{x:b[0].pageX,y:b[0].pageY}}),Fb());a.stopPropagation()}}))},Ga=null,Fa=[],Ve=function(a){return a?(a=a[u.dataFields.items],void 0!=
a&&0<a.length):!1},yf=function(a){var b=Gd(a);if(a&&Hd(a)&&ca&&b){var c=b.find("ul");if(0<c.length){c=angular.element(c.eq(0));Sc(c);Ve(a)&&(b.removeClass(u.controlStyle.block.marker.expand.down),b.removeClass(u.controlStyle.block.marker.expand.left),b.removeClass(u.controlStyle.block.marker.expand.right),b.removeClass(u.controlStyle.block.marker.expand.rtlDown));Ga=Fd(a)?a:Ga;Ga[u.dataFields.selected]=!0;0>Fa.indexOf(Ga)&&Fa.unshift(Ga);for(var e=0;e<Fa.length;e++)Fa[e]!=Ga&&(Fa[e][u.dataFields.selected]=
!1,Dd(Fa[e]));Fa.splice(1,Fa.length-1);if(Ve(a)){e=We(a);if(0<=e){var d=0,h="auto";h=angular.element(b.parent());m.getPadding(b[0]);var l=m.getPadding(h[0]);b=m.getPadding(b[0]);d-=l.top+b.top;h=h[0].offsetWidth-8;0<b.right&&(h+=b.right-4);b="display:block;"+("top:"+d+"px;");"auto"!=h&&(b+="left:"+h+"px;");(a=Tc(Uc(a)))&&a.data&&e<a.data.length&&(a.data[e].inlineBlockStyle=b,ca.$apply())}f(function(){Cd(c);Xe()},1)}}}},Dd=function(a){var b=Gd(a);if(a&&ca&&b){var c=b.find("ul");0<c.length&&(c=angular.element(c.eq(0)),
Sc(c),Hd(a)&&b.addClass(u.controlStyle.block.marker.expand.right),b=We(a),0<=b&&(a=Tc(Uc(a)))&&a.data&&b<a.data.length&&(a.data[b].inlineBlockStyle="display:none;",ca.$apply()))}},Fb=function(){Ed();Qc=null;fa&&(fa.unbind("blur"),fa.remove());if(document.body)for(var a=angular.element(document.body).children(),b=0;b<a.length;b++){var c=angular.element(a[b]);c[0].attributes&&c[0].attributes["data-element"]&&"context-menu"===c[0].attributes["data-element"].value&&c.remove()}Oa=Ga=null;bb&&f.cancel(bb);
bb=null},wf=function(a){if(document.body){fa.css("top","-999px");fa.css("tabindex","999");angular.element(document.body).append(fa);fa.bind("blur",function(a){Fb()});vf();uf();zf(void 0);var b=f(function(){fa[0].focus();var c=a.pageY,e=a.pageX,d=m.getPageRect(q[0]);switch(u.position){case "above":c=d.top-2-Ea[0].offsetHeight;e=d.right-Ea[0].offsetWidth+1;break;case "below":c=d.bottom+2;e=d.right-Ea[0].offsetWidth+1;break;case "left":c=d.top-1;e=d.left-2-Ea[0].offsetWidth;break;case "right":c=d.top-
1,e=d.right+2}fa.css("top",c+"px");fa.css("left",e+"px");Cd();u.open&&u.open({mousePos:{x:a.pageX,y:a.pageY}});f.cancel(b)},1)}},Gd=function(a){var b=null;if(a){a=Rc(a);var c=fa.find("li");if(c&&0<c.length)for(var e=0;e<c.length;e++){var d=angular.element(c[e]);if(d[0].attributes["data-index"]&&d[0].attributes["data-index"].value.toString()===a.toString()){b=d;break}}}return b},Af=function(a){var b=null;a&&(a=Gd(a))&&(a=a.find("ul"),0<a.length&&(b=angular.element(a.eq(0))));return b},wc=function(a){if(a&&
(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<Ta.length))return Ta[a]},Ye=function(a,b){var c=null;if(a&&b)for(var e=0;!c&&e<b.length;)c=b[e][u.dataFields.id]&&a[u.dataFields.pid]&&b[e][u.dataFields.id].toString()===a[u.dataFields.pid].toString()?b[e]:Ye(a,b[e][u.dataFields.items]),e++;return c},We=function(a){var b=Uc(a);b=Ze(b);var c=-1;b||(b=Ze());if(!a[u.dataFields.id]&&b)c=b.indexOf(a);else if(a&&b)for(var e=0;e<b.length;e++)if(b[e][u.dataFields.id]&&
a[u.dataFields.id]&&b[e][u.dataFields.id].toString()===a[u.dataFields.id].toString()){c=e;break}return c},Uc=function(a){if(Oa){var b=vc(Oa);return a&&b?Ye(a,b):null}return null},Ze=function(a){return a?(a[u.dataFields.items]||(a[u.dataFields.items]=[]),a[u.dataFields.items]):Oa?vc(Oa):[]},Bf=function(a){if(a&&"separator"!=a.type){if(0==a[u.dataFields.enabled])return"disabled";if(a==H.menuHoverItem)return"hovered";if(1==a[u.dataFields.selected])return"selected"}return"normal"},Fd=function(a){return!a||
void 0!=a[u.dataFields.pid]&&null!=a[u.dataFields.pid]?!1:!0},bb=null,ca=null,Hd=function(a){if(a){var b=a[u.dataFields.items];return a[u.dataFields.hasChildren]||b&&0<b.length}return!1};bd=function(a){return null!=a.icon||null!=u.itemIcon};var Cf=function(a,b,c){var e="";a[u.dataFields.icon]||""==a[u.dataFields.icon]?e=a[u.dataFields.icon]:u.itemIcon&&(e=u.itemIcon);return{icon:e,iconVisible:0!=u.showIcons&&bd(a),index:b,inlineBlockStyle:"display:none",item:a,style:{},visible:c}},Id=function(a){var b=
[];if(a)for(var c=0;c<a.length;c++)b.push(Cf(a[c],Rc(a[c])));return b},Xe=function(){var a=Ea.find("li");if(0<a.length)for(var b=0;b<a.length;b++)for(var c=angular.element(a[b]),d=c.children(),f=0;f<d.length;f++){var h=angular.element(d[f]);h[0].attributes["data-element"]&&"load-icon"==h[0].attributes["data-element"].value.toString()&&h.css("top",(c[0].clientHeight-h[0].offsetHeight)/2+"px")}},Df=function(){var a=Ea.find("li");if(0<a.length)for(var b=0;b<a.length;b++){var c=angular.element(a[b]);
c&&c.attr("data-index",b)}},$e=function(a,b){var c=null;if(a&&b)for(var e=0;!c&&e<a.length;)c=a[e].item==b?a[e]:$e(a[e].data,b),e++;return c},Tc=function(a){return a?$e(ca.data,a):ca},zf=function(a){var b=f(function(){Sc();u.rtl?fa.css("direction","rtl"):fa.css("direction","ltr");a||(Ea.empty(),ca&&ca.$destroy());f.cancel(b)},1),e=f(function(){var b="";if(a){var d=Tc(a);if(d){var g=a[u.dataFields.items];if(g&&0<g.length){d.data=Id(g);bc();ca.$apply();for(var h=0;h<g.length;h++)b+=Jd(h,g[h],d.scopeRef,
d.data);""!=b&&(d=Af(a))&&(d.empty(),d.append(c(b)(ca)))}Df()}}else{ca=p.$new();ca.data=Id(uc);bc();ca.$apply();for(d=0;d<uc.length;d++)b+=Jd(d,uc[d],"data",ca.data);""!=b&&Ea.append(c(b)(ca))}Cd();var k=f(function(){Xe();f.cancel(k)},1);f.cancel(e)},1)},Jd=function(a,b,c,d){Rc(b);var e='<li iui-class="{{'+c+"["+a+"].style";e="header"==b.type?e+'.header}}"':e+'.general}}"';e+=' data-index="'+Rc(b)+'">';switch(b.type){case "header":e=e+'<span data-element="header">'+("{{"+c+"["+a+"].item."+u.dataFields.text+
"}}");e+="</span>";break;case "separator":e+='<hr iui-class="{{'+c+"["+a+'].style.separator}}" data-element="separator" />';break;default:e=e+('<span iui-class="{{'+c+"["+a+'].icon}}" data-element="icon" ng-show="'+c+"["+a+'].iconVisible"></span>')+('<span iui-class="{{'+c+"["+a+'].style.content}}"  data-element="content">')+("{{"+c+"["+a+"].item."+u.dataFields.text+"}}"),e=e+"</span>"+('<span iui-class="{{'+c+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var f=b[u.dataFields.items];
if(b[u.dataFields.hasChildren]||f&&0<f.length){e+='<ul iui-class="{{'+c+"["+a+"].style.block";switch(u.displayMode){case "vertical":e=u.rtl?e+'.marker.right}}"':e+'.marker.left}}"';break;default:e=u.rtl?e+'.marker.right}}"':e+'.marker.left}}"'}e+=' iui-style="{{'+c+"["+a+'].inlineBlockStyle}}">';c+="["+a+"].data";d[a].data=Id(f);d[a].scopeRef=c;if(f&&0<f.length)for(b=0;b<f.length;b++)e+=Jd(b,f[b],d[a].scopeRef,d[a].data);e+="</ul>"}return e+"</li>"};this.getCurrentMenuItemStyle=function(a,b){var c=
u.controlStyle.item;if(a)switch(a.style){case "initial":break;case "parent":return H.getCurrentMenuItemStyle(H.getParentMenu(a),b);default:null!=a.style&&(c=a.style)}if(b){if(m.isString(c.general))return c.general;switch(b){case "disabled":return c.general&&c.general.disabled?c.general.disabled:u.controlStyle.item.general.disabled;case "focused":return c.general&&c.general.focused?c.general.focused:u.controlStyle.item.general.focused;case "hovered":return c.general&&c.general.hovered?c.general.hovered:
u.controlStyle.item.general.hovered;case "selected":return c.general&&c.general.selected?c.general.selected:u.controlStyle.item.general.selected;default:return c.general&&c.general.normal?c.general.normal:u.controlStyle.item.general.normal}}else return c?c:u.controlStyle.item};var bc=function(a,b){if(ca)if(a)switch(a.type){default:var c=Tc(a);if(c){var e=Hd(a),d=Bf(a),f={block:Lb.block,content:"",general:"",header:Lb.item.header,label:"",loadIcon:"",separator:Lb.item.separator};var g=Lb.item.general.normal;
u.controlStyle.item.general.normal!=g&&(g+=" "+u.controlStyle.item.general.normal);f.general=g;g=Lb.item.content;u.controlStyle.item.content!=g&&(g+=" "+u.controlStyle.item.content);f.content=g;g=Lb.item.loadIcon.general;u.controlStyle.item.loadIcon.general!=g&&(g+=" "+u.controlStyle.item.loadIcon.general);u.rtl&&(g+="-rtl");f.loadIcon=g;switch(a.type){case "header":g=getCurrentMenuItemStyle(a).header;g!=u.controlStyle.item.header&&(f.header+=" "+g);break;case "separator":g=getCurrentMenuItemStyle(a).separator;
g!=u.controlStyle.item.separator&&(f.separator+=" "+g);break;default:var h=getCurrentMenuItemStyle(a);g=getCurrentMenuItemStyle(a,d);g!=u.controlStyle.item.general.normal&&(f.general+=" "+g);e&&"selected"!=d&&!u.loadItem&&(f.general=u.rtl?f.general+(" "+u.controlStyle.block.marker.expand.left):f.general+(" "+u.controlStyle.block.marker.expand.right));g=h.content;g!=u.controlStyle.item.content&&(f.content+=" "+g);a==u.loadItem&&(g=h.loadIcon.icon,f.loadIcon+=" "+g,g!=u.controlStyle.item.loadIcon.icon&&
(f.loadIcon+=" "+g))}c.style=f;void 0==b&&ca.$apply()}}else{for(c=0;c<Ta.length;c++)Ta[c][u.dataFields.selected]=!1;for(c=Qc;c;)c[u.dataFields.selected]=!0,c=Uc(c);for(c=0;c<Ta.length;c++)bc(Ta[c],!1);1==b&&ca.$apply()}};H=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=
this.crpar();this.$tw=angular.element(this.crtr(H.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",
q[0].scrollLeft+"px"))};this.s1t=function(a){H.s3t();this.trlTime=f(function(){H.trActive||(H.trCount=0,H.trActive=!0,H.trId=l(function(){H.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(l.cancel(this.trId),this.trId=null);this.trlTime&&(f.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(p.options)?a.updateOptions(p.options):(0==p.allowAnimation&&(a.options.allowAnimation=
p.allowAnimation),0==p.allowCellFocus&&(a.options.allowCellFocus=p.allowCellFocus),1==p.allowColumnReorder&&(a.options.allowColumnReorder=p.allowColumnReorder),1==p.allowDrag&&(a.options.allowDrag=p.allowDrag),0==p.allowDrop&&(a.options.allowDrop=p.allowDrop),1==p.allowFilter&&(a.options.allowFilter=p.allowFilter),0==p.allowFocus&&(a.options.allowFocus=p.allowFocus),0==p.autoExpand&&(a.options.autoExpand=p.autoExpand),0==p.autoUpdate&&(a.options.autoUpdate=p.autoUpdate),angular.isDefined(p.animationSpeed)&&
200!==p.animationSpeed&&(a.options.animationSpeed=p.animationSpeed),angular.isDefined(p.controlStyle)&&a.updateControlStyle(p.controlStyle),angular.isDefined(p.displayMode)&&(a.options.displayMode=p.displayMode),angular.isDefined(p.editorSettings)&&a.updateEditorSettings(p.editorSettings),0==p.enabled&&(a.options.enabled=p.enabled),angular.isDefined(p.expandingColumnIndex)&&(a.options.expandColIndex=p.expandingColumnIndex),angular.isDefined(p.fields)&&(a.updateDataFields(p.fields),a.updateData()),
1==p.fillSpace&&(a.options.fillSpace=p.fillSpace),angular.isDefined(p.gridLines)&&(a.options.gridLines=p.gridLines),angular.isDefined(p.grouping)&&a.updateGrouping(p.grouping),1==p.hoverSelection&&(a.options.hoverSelection=p.hoverSelection),angular.isDefined(p.indent)&&(a.options.indent=p.indent),angular.isDefined(p.labelEdit)&&(a.options.labelEdit=p.labelEdit),angular.isDefined(p.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=p.mouseWheelSpeed),angular.isDefined(p.paging)&&a.updatePaging(p.paging),
angular.isDefined(p.rowHeight)&&(a.options.rowHeight=p.rowHeight),angular.isDefined(p.rowIcon)&&(a.options.rowIcon=p.rowIcon),1==p.rtl&&(a.options.rtl=p.rtl),angular.isDefined(p.selectedIndex)&&(a.options.selectedIndex=p.selectedIndex),angular.isDefined(p.selectedRow)&&(a.options.selectedRow=p.selectedRow),angular.isDefined(p.selectionMode)&&(a.options.selectionMode=p.selectionMode),0==p.showFooter&&(a.options.showFooter=p.showFooter),0==p.showHeader&&(a.options.showHeader=p.showHeader),0==p.showIcons&&
(a.options.showIcons=p.showIcons),angular.isDefined(p.sorting)&&(a.options.sorting=p.sorting));a.updateLayout()}}}]);